// ==UserScript==
// @name         !OP mod
// @author       NOTxxNOT Fixed by yusukedao command !!combat !!bars !!grind Shift + G bot Join clan with aaa22a
// @description  ENJOY Credits To Wynd
// @version      v10
// @match        *://*.moomoo.io/*
// @grant        none
// @license      MIT
// @namespace https://greasyfork.org/users/1023980
// ==/UserScript==

!function(){var xhr=new XMLHttpRequest,xhr=(xhr.open("GET",document.URL,!1),xhr.send(null),xhr.responseText),doc=document.implementation.createHTMLDocument(""+(document.title||"")),xhr=(doc.open(),doc.write(xhr),doc.close(),[...doc.getElementsByTagName("script")].find(e=>e?.src.endsWith("bundle.js"))?.remove(),document.replaceChild(document.importNode(doc.documentElement,!0),document.documentElement),document.createElement("style")),doc=(xhr.type="text/css",xhr.appendChild(document.createTextNode("")),document.getElementsByTagName("head")),bars=((0<doc.length?doc[0]:document.documentElement).appendChild(xhr),!1);function objDist(a,b){return Math.hypot(a.y-b.y,a.x-b.x)}function tmpObjDist(a,b){return Math.hypot(a.y2-b.y2,a.x2-b.x2)}function tmpObjLoc(a,b){return Math.atan2(a.y2-b.y2,a.x2-b.x2)}var antiBug=Number.MAX_VALUE;let bot=2,isConnected=!1,myConfig={clan:void 0,enemyCount:0,nearAim:0},botConfig={waitHeal:!1,botJoin:!1,stop:!1,atck:!1,nearDst:4444};let tmpClan=void 0,tmpAddress;var modules,installedModules,antiKick=!0,secPacket=0,minPacket=0,pktSended=0;function __webpack_require__(moduleId){var module;return(installedModules[moduleId]||(module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}},modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module)).exports}modules={"./node_modules/bad-words/lib/badwords.js":function(module,exports,__webpack_require__){const localList=__webpack_require__("./node_modules/bad-words/lib/lang.json").words,baseList=__webpack_require__("./node_modules/badwords-list/lib/index.js").array;module.exports=class{constructor(options={}){Object.assign(this,{list:options.emptyList?[]:Array.prototype.concat.apply(localList,[baseList,options.list||[]]),exclude:options.exclude||[],placeHolder:options.placeHolder||"*",regex:options.regex||/[^a-zA-Z0-9|\$|\@]|\^/g,replaceRegex:options.replaceRegex||/\w/g})}isProfane(string){return 0<this.list.filter(word=>{var wordExp=new RegExp(`\\b${word.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(word.toLowerCase())&&wordExp.test(string)}).length||!1}replaceWord(string){return string.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(string){return string.split(/\b/).map(word=>this.isProfane(word)?this.replaceWord(word):word).join("")}addWords(){var words=Array.from(arguments);this.list.push(...words),words.map(word=>word.toLowerCase()).forEach(word=>{this.exclude.includes(word)&&this.exclude.splice(this.exclude.indexOf(word),1)})}removeWords(){this.exclude.push(...Array.from(arguments).map(word=>word.toLowerCase()))}}},"./node_modules/bad-words/lib/lang.json":function(module){module.exports={words:["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","queer","queers","queerz","qweers","qweerz","qweir","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","lesbian","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"]}},"./node_modules/badwords-list/lib/array.js":function(module,exports){module.exports=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"]},"./node_modules/badwords-list/lib/index.js":function(module,exports,__webpack_require__){module.exports={object:__webpack_require__("./node_modules/badwords-list/lib/object.js"),array:__webpack_require__("./node_modules/badwords-list/lib/array.js"),regex:__webpack_require__("./node_modules/badwords-list/lib/regexp.js")}},"./node_modules/badwords-list/lib/object.js":function(module,exports){module.exports={"4r5e":1,"5h1t":1,"5hit":1,a55:1,anal:1,anus:1,ar5e:1,arrse:1,arse:1,ass:1,"ass-fucker":1,asses:1,assfucker:1,assfukka:1,asshole:1,assholes:1,asswhole:1,a_s_s:1,"b!tch":1,b00bs:1,b17ch:1,b1tch:1,ballbag:1,balls:1,ballsack:1,bastard:1,beastial:1,beastiality:1,bellend:1,bestial:1,bestiality:1,"bi+ch":1,biatch:1,bitch:1,bitcher:1,bitchers:1,bitches:1,bitchin:1,bitching:1,bloody:1,"blow job":1,blowjob:1,blowjobs:1,boiolas:1,bollock:1,bollok:1,boner:1,boob:1,boobs:1,booobs:1,boooobs:1,booooobs:1,booooooobs:1,breasts:1,buceta:1,bugger:1,bum:1,"bunny fucker":1,butt:1,butthole:1,buttmuch:1,buttplug:1,c0ck:1,c0cksucker:1,"carpet muncher":1,cawk:1,chink:1,cipa:1,cl1t:1,clit:1,clitoris:1,clits:1,cnut:1,cock:1,"cock-sucker":1,cockface:1,cockhead:1,cockmunch:1,cockmuncher:1,cocks:1,cocksuck:1,cocksucked:1,cocksucker:1,cocksucking:1,cocksucks:1,cocksuka:1,cocksukka:1,cok:1,cokmuncher:1,coksucka:1,coon:1,cox:1,crap:1,cum:1,cummer:1,cumming:1,cums:1,cumshot:1,cunilingus:1,cunillingus:1,cunnilingus:1,cunt:1,cuntlick:1,cuntlicker:1,cuntlicking:1,cunts:1,cyalis:1,cyberfuc:1,cyberfuck:1,cyberfucked:1,cyberfucker:1,cyberfuckers:1,cyberfucking:1,d1ck:1,damn:1,dick:1,dickhead:1,dildo:1,dildos:1,dink:1,dinks:1,dirsa:1,dlck:1,"dog-fucker":1,doggin:1,dogging:1,donkeyribber:1,doosh:1,duche:1,dyke:1,ejaculate:1,ejaculated:1,ejaculates:1,ejaculating:1,ejaculatings:1,ejaculation:1,ejakulate:1,"f u c k":1,"f u c k e r":1,f4nny:1,fag:1,fagging:1,faggitt:1,faggot:1,faggs:1,fagot:1,fagots:1,fags:1,fanny:1,fannyflaps:1,fannyfucker:1,fanyy:1,fatass:1,fcuk:1,fcuker:1,fcuking:1,feck:1,fecker:1,felching:1,fellate:1,fellatio:1,fingerfuck:1,fingerfucked:1,fingerfucker:1,fingerfuckers:1,fingerfucking:1,fingerfucks:1,fistfuck:1,fistfucked:1,fistfucker:1,fistfuckers:1,fistfucking:1,fistfuckings:1,fistfucks:1,flange:1,fook:1,fooker:1,fuck:1,fucka:1,fucked:1,fucker:1,fuckers:1,fuckhead:1,fuckheads:1,fuckin:1,fucking:1,fuckings:1,fuckingshitmotherfucker:1,fuckme:1,fucks:1,fuckwhit:1,fuckwit:1,"fudge packer":1,fudgepacker:1,fuk:1,fuker:1,fukker:1,fukkin:1,fuks:1,fukwhit:1,fukwit:1,fux:1,fux0r:1,f_u_c_k:1,gangbang:1,gangbanged:1,gangbangs:1,gaylord:1,gaysex:1,goatse:1,God:1,"god-dam":1,"god-damned":1,goddamn:1,goddamned:1,hardcoresex:1,hell:1,heshe:1,hoar:1,hoare:1,hoer:1,homo:1,hore:1,horniest:1,horny:1,hotsex:1,"jack-off":1,jackoff:1,jap:1,"jerk-off":1,jism:1,jiz:1,jizm:1,jizz:1,kawk:1,knob:1,knobead:1,knobed:1,knobend:1,knobhead:1,knobjocky:1,knobjokey:1,kock:1,kondum:1,kondums:1,kum:1,kummer:1,kumming:1,kums:1,kunilingus:1,"l3i+ch":1,l3itch:1,labia:1,lust:1,lusting:1,m0f0:1,m0fo:1,m45terbate:1,ma5terb8:1,ma5terbate:1,masochist:1,"master-bate":1,masterb8:1,"masterbat*":1,masterbat3:1,masterbate:1,masterbation:1,masterbations:1,masturbate:1,"mo-fo":1,mof0:1,mofo:1,mothafuck:1,mothafucka:1,mothafuckas:1,mothafuckaz:1,mothafucked:1,mothafucker:1,mothafuckers:1,mothafuckin:1,mothafucking:1,mothafuckings:1,mothafucks:1,"mother fucker":1,motherfuck:1,motherfucked:1,motherfucker:1,motherfuckers:1,motherfuckin:1,motherfucking:1,motherfuckings:1,motherfuckka:1,motherfucks:1,muff:1,mutha:1,muthafecker:1,muthafuckker:1,muther:1,mutherfucker:1,n1gga:1,n1gger:1,nazi:1,nigg3r:1,nigg4h:1,nigga:1,niggah:1,niggas:1,niggaz:1,nigger:1,niggers:1,nob:1,"nob jokey":1,nobhead:1,nobjocky:1,nobjokey:1,numbnuts:1,nutsack:1,orgasim:1,orgasims:1,orgasm:1,orgasms:1,p0rn:1,pawn:1,pecker:1,penis:1,penisfucker:1,phonesex:1,phuck:1,phuk:1,phuked:1,phuking:1,phukked:1,phukking:1,phuks:1,phuq:1,pigfucker:1,pimpis:1,piss:1,pissed:1,pisser:1,pissers:1,pisses:1,pissflaps:1,pissin:1,pissing:1,pissoff:1,poop:1,porn:1,porno:1,pornography:1,pornos:1,prick:1,pricks:1,pron:1,pube:1,pusse:1,pussi:1,pussies:1,pussy:1,pussys:1,rectum:1,retard:1,rimjaw:1,rimming:1,"s hit":1,"s.o.b.":1,sadist:1,schlong:1,screwing:1,scroat:1,scrote:1,scrotum:1,semen:1,sex:1,"sh!+":1,"sh!t":1,sh1t:1,shag:1,shagger:1,shaggin:1,shagging:1,shemale:1,"shi+":1,shit:1,shitdick:1,shite:1,shited:1,shitey:1,shitfuck:1,shitfull:1,shithead:1,shiting:1,shitings:1,shits:1,shitted:1,shitter:1,shitters:1,shitting:1,shittings:1,shitty:1,skank:1,slut:1,sluts:1,smegma:1,smut:1,snatch:1,"son-of-a-bitch":1,spac:1,spunk:1,s_h_i_t:1,t1tt1e5:1,t1tties:1,teets:1,teez:1,testical:1,testicle:1,tit:1,titfuck:1,tits:1,titt:1,tittie5:1,tittiefucker:1,titties:1,tittyfuck:1,tittywank:1,titwank:1,tosser:1,turd:1,tw4t:1,twat:1,twathead:1,twatty:1,twunt:1,twunter:1,v14gra:1,v1gra:1,vagina:1,viagra:1,vulva:1,w00se:1,wang:1,wank:1,wanker:1,wanky:1,whoar:1,whore:1,willies:1,willy:1,xrated:1,xxx:1}},"./node_modules/badwords-list/lib/regexp.js":function(module,exports){module.exports=/\b(4r5e|5h1t|5hit|a55|anal|anus|ar5e|arrse|arse|ass|ass-fucker|asses|assfucker|assfukka|asshole|assholes|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|blowjobs|boiolas|bollock|bollok|boner|boob|boobs|booobs|boooobs|booooobs|booooooobs|breasts|buceta|bugger|bum|bunny fucker|butt|butthole|buttmuch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|clits|cnut|cock|cock-sucker|cockface|cockhead|cockmunch|cockmuncher|cocks|cocksuck|cocksucked|cocksucker|cocksucking|cocksucks|cocksuka|cocksukka|cok|cokmuncher|coksucka|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cuntlick|cuntlicker|cuntlicking|cunts|cyalis|cyberfuc|cyberfuck|cyberfucked|cyberfucker|cyberfuckers|cyberfucking|d1ck|damn|dick|dickhead|dildo|dildos|dink|dinks|dirsa|dlck|dog-fucker|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculate|ejaculated|ejaculates|ejaculating|ejaculatings|ejaculation|ejakulate|f u c k|f u c k e r|f4nny|fag|fagging|faggitt|faggot|faggs|fagot|fagots|fags|fanny|fannyflaps|fannyfucker|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|fingerfuck|fingerfucked|fingerfucker|fingerfuckers|fingerfucking|fingerfucks|fistfuck|fistfucked|fistfucker|fistfuckers|fistfucking|fistfuckings|fistfucks|flange|fook|fooker|fuck|fucka|fucked|fucker|fuckers|fuckhead|fuckheads|fuckin|fucking|fuckings|fuckingshitmotherfucker|fuckme|fucks|fuckwhit|fuckwit|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|hell|heshe|hoar|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbate|masterbation|masterbations|masturbate|mo-fo|mof0|mofo|mothafuck|mothafucka|mothafuckas|mothafuckaz|mothafucked|mothafucker|mothafuckers|mothafuckin|mothafucking|mothafuckings|mothafucks|mother fucker|motherfuck|motherfucked|motherfucker|motherfuckers|motherfuckin|motherfucking|motherfuckings|motherfuckka|motherfucks|muff|mutha|muthafecker|muthafuckker|muther|mutherfucker|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|pissed|pisser|pissers|pisses|pissflaps|pissin|pissing|pissoff|poop|porn|porno|pornography|pornos|prick|pricks|pron|pube|pusse|pussi|pussies|pussy|pussys|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|shit|shitdick|shite|shited|shitey|shitfuck|shitfull|shithead|shiting|shitings|shits|shitted|shitter|shitters|shitting|shittings|shitty|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spac|spunk|s_h_i_t|t1tt1e5|t1tties|teets|teez|testical|testicle|tit|titfuck|tits|titt|tittie5|tittiefucker|titties|tittyfuck|tittywank|titwank|tosser|turd|tw4t|twat|twathead|twatty|twunt|twunter|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|willies|willy|xrated|xxx)\b/gi},"./node_modules/base64-js/index.js":function(module,exports,__webpack_require__){"use strict";exports.byteLength=function(b64){var b64=getLens(b64),validLen=b64[0],b64=b64[1];return 3*(validLen+b64)/4-b64},exports.toByteArray=function(b64){var tmp,i,lens=getLens(b64),validLen=lens[0],lens=lens[1],arr=new Arr(function(validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(validLen,lens)),curByte=0,len=0<lens?validLen-4:validLen;for(i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===lens&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===lens&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(function(uint8,start,end){for(var tmp,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(function(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]}(tmp));return output.join("")}(uint8,i,len2<i+16383?len2:i+16383));1==extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2==extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(0<len%4)throw new Error("Invalid string. Length must be a multiple of 4");b64=b64.indexOf("="),len=(b64=-1===b64?len:b64)===len?0:4-b64%4;return[b64,len]}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(module,exports,__webpack_require__){"use strict";!function(global){var base64=__webpack_require__("./node_modules/base64-js/index.js"),ieee754=__webpack_require__("./node_modules/ieee754/index.js"),isArray=__webpack_require__("./node_modules/buffer/node_modules/isarray/index.js");function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(that=new Uint8Array(length)).__proto__=Buffer.prototype:(that=null===that?new Buffer(length):that).length=length,that}function Buffer(arg,encodingOrOffset,length){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(arg,encodingOrOffset,length);if("number"!=typeof arg)return from(this,arg,encodingOrOffset,length);if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,arg)}function from(that,value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer?function(that,array,byteOffset,length){if(array.byteLength,byteOffset<0||array.byteLength<byteOffset)throw new RangeError("'offset' is out of bounds");if(array.byteLength<byteOffset+(length||0))throw new RangeError("'length' is out of bounds");array=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);Buffer.TYPED_ARRAY_SUPPORT?(that=array).__proto__=Buffer.prototype:that=fromArrayLike(that,array);return that}(that,value,encodingOrOffset,length):"string"==typeof value?function(that,string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError('"encoding" must be a valid string encoding');var length=0|byteLength(string,encoding),string=(that=createBuffer(that,length)).write(string,encoding);string!==length&&(that=that.slice(0,string));return that}(that,value,encodingOrOffset):function(that,obj){{var len;if(Buffer.isBuffer(obj))return len=0|checked(obj.length),0!==(that=createBuffer(that,len)).length&&obj.copy(that,0,0,len),that}if(obj){if("undefined"!=typeof ArrayBuffer&&obj.buffer instanceof ArrayBuffer||"length"in obj)return"number"!=typeof obj.length||function(val){return val!=val}(obj.length)?createBuffer(that,0):fromArrayLike(that,obj);if("Buffer"===obj.type&&isArray(obj.data))return fromArrayLike(that,obj.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(that,value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be a number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(that,size){if(assertSize(size),that=createBuffer(that,size<0?0:0|checked(size)),!Buffer.TYPED_ARRAY_SUPPORT)for(var i=0;i<size;++i)that[i]=0;return that}function fromArrayLike(that,array){var length=array.length<0?0:0|checked(array.length);that=createBuffer(that,length);for(var i=0;i<length;i+=1)that[i]=255&array[i];return that}function checked(length){if(length>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer))return string.byteLength;var len=(string="string"!=typeof string?""+string:string).length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function slowToString(encoding,start,end){var loweredCase=!1;if((start=void 0===start||start<0?0:start)>this.length)return"";if((end=void 0===end||end>this.length?this.length:end)<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding=encoding||"utf8";;)switch(encoding){case"hex":return function(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0);(!end||end<0||len<end)&&(end=len);for(var out="",i=start;i<end;++i)out+=function(n){return n<16?"0"+n.toString(16):n.toString(16)}(buf[i]);return out}(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return function(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}(this,start,end);case"latin1":case"binary":return function(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}(this,start,end);case"base64":return function(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):2147483647<byteOffset?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),byteOffset=+byteOffset,(byteOffset=(byteOffset=isNaN(byteOffset)?dir?0:buffer.length-1:byteOffset)<0?buffer.length+byteOffset:byteOffset)>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(dir?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;arrLength/=indexSize=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir)for(var foundIndex=-1,i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(i-(foundIndex=-1===foundIndex?i:foundIndex)+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1;else for(i=byteOffset=arrLength<byteOffset+valLength?arrLength-valLength:byteOffset;0<=i;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,byteArray.push(c%256),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=239<firstByte?4:223<firstByte?3:191<firstByte?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&127<(tempCodePoint=(31&firstByte)<<6|63&secondByte)&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&2047<(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)&&(tempCodePoint<55296||57343<tempCodePoint)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&65535<(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):65535<codePoint&&(res.push((codePoint-=65536)>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()&&"function"==typeof arr.subarray&&0===arr.subarray(1,1).byteLength}catch(e){return!1}}(),exports.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(arr){return arr.__proto__=Buffer.prototype,arr},Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0}),Buffer.alloc=function(size,fill,encoding){return function(that,size,fill,encoding){return assertSize(size),!(size<=0)&&void 0!==fill?"string"==typeof encoding?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill):createBuffer(that,size)}(null,size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)},Buffer.isBuffer=function(b){return!(null==b||!b._isBuffer)},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);if(void 0===length)for(i=length=0;i<list.length;++i)length+=list[i].length;for(var buffer=Buffer.allocUnsafe(length),pos=0,i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toString=function(){var length=0|this.length;return 0==length?"":0===arguments.length?utf8Slice(this,0,length):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(b){if(Buffer.isBuffer(b))return this===b||0===Buffer.compare(this,b);throw new TypeError("Argument must be a Buffer")},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return 0<this.length&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max)&&(str+=" ... "),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),(start=void 0===start?0:start)<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisEnd<=thisStart&&end<=start)return 0;if(thisEnd<=thisStart)return-1;if(end<=start)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset|=0,isFinite(length)?(length|=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||remaining<length)&&(length=remaining),0<string.length&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding=encoding||"utf8";for(var loweredCase=!1;;)switch(encoding){case"hex":return function(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if((!length||remaining<(length=Number(length)))&&(length=remaining),(remaining=string.length)%2!=0)throw new TypeError("Invalid hex string");remaining/2<length&&(length=remaining/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}(this,string,offset,length);case"utf8":case"utf-8":return function(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return asciiWrite(this,string,offset,length);case"base64":return function(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(length<offset+ext)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(max<value||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function objectWriteUInt16(buf,value,offset,littleEndian){value<0&&(value=65535+value+1);for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function objectWriteUInt32(buf,value,offset,littleEndian){value<0&&(value=4294967295+value+1);for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function checkIEEE754(buf,value,offset,ext){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var len=this.length;if((start=~~start)<0?(start+=len)<0&&(start=0):len<start&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):len<end&&(end=len),end<start&&(end=start),Buffer.TYPED_ARRAY_SUPPORT)(newBuf=this.subarray(start,end)).__proto__=Buffer.prototype;else for(var sliceLen=end-start,newBuf=new Buffer(sliceLen,void 0),i=0;i<sliceLen;++i)newBuf[i]=this[i+start];return newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;0<byteLength&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset|=0,byteLength|=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];0<i&&(mul*=256);)val+=this[offset+--i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);noAssert=this[offset]|this[offset+1]<<8;return 32768&noAssert?4294901760|noAssert:noAssert},Buffer.prototype.readInt16BE=function(offset,noAssert){noAssert||checkOffset(offset,2,this.length);noAssert=this[offset+1]|this[offset]<<8;return 32768&noAssert?4294901760|noAssert:noAssert},Buffer.prototype.readInt32LE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,byteLength|=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,byteLength|=0,noAssert||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,noAssert||checkInt(this,value,offset,byteLength,(noAssert=Math.pow(2,8*byteLength-1))-1,-noAssert);var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){value=+value,offset|=0,noAssert||checkInt(this,value,offset,byteLength,(noAssert=Math.pow(2,8*byteLength-1))-1,-noAssert);var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(value=Math.floor(value)),this[offset]=255&(value=value<0?255+value+1:value),offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8):objectWriteUInt16(this,value,offset,!0),offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>8,this[offset+1]=255&value):objectWriteUInt16(this,value,offset,!1),offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24):objectWriteUInt32(this,value,offset,!0),offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset|=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),Buffer.TYPED_ARRAY_SUPPORT?(this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value):objectWriteUInt32(this,value,offset,!1),offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(start=start||0,end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),(end=0<end&&end<start?start:end)===start)return 0;if(0===target.length||0===this.length)return 0;if((targetStart=targetStart||0)<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length);var i,len=(end=target.length-targetStart<end-start?target.length-targetStart+start:end)-start;if(this===target&&start<targetStart&&targetStart<end)for(i=len-1;0<=i;--i)target[i+targetStart]=this[i+start];else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<len;++i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){var code;if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),1===val.length&&(code=val.charCodeAt(0))<256&&(val=code),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding)}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(!(end<=start))if(start>>>=0,end=void 0===end?this.length:end>>>0,"number"==typeof(val=val||0))for(i=start;i<end;++i)this[i]=val;else for(var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString()),len=bytes.length,i=0;i<end-start;++i)this[i+start]=bytes[i%len];return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function utf8ToBytes(string,units){units=units||1/0;for(var codePoint,length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(55295<(codePoint=string.charCodeAt(i))&&codePoint<57344){if(!leadSurrogate){if(56319<codePoint){-1<(units-=3)&&bytes.push(239,191,189);continue}if(i+1===length){-1<(units-=3)&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){-1<(units-=3)&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&-1<(units-=3)&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if(--units<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=function(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}(str).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}}.call(this,__webpack_require__("./node_modules/webpack/buildin/global.js"))},"./node_modules/buffer/node_modules/isarray/index.js":function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},"./node_modules/charenc/charenc.js":function(module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(255&str.charCodeAt(i));return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},"./node_modules/crypt/crypt.js":function(module,exports){var base64map,crypt;base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return 16711935&crypt.rotl(n,8)|4278255360&crypt.rotl(n,24);for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];0<n;n--)bytes.push(Math.floor(256*Math.random()));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((15&bytes[i]).toString(16));return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;j<4;j++)8*i+6*j<=8*bytes.length?base64.push(base64map.charAt(triplet>>>6*(3-j)&63)):base64.push("=");return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)0!=imod4&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<2*imod4|base64map.indexOf(base64.charAt(i))>>>6-2*imod4);return bytes}},module.exports=crypt},"./node_modules/event-lite/event-lite.js":function(module,exports,__webpack_require__){!function(EventLite){module.exports=EventLite;var LISTENERS="listeners",methods={on:function(type,func){return getListeners(this,type).push(func),this},once:function(type,func){var that=this;return wrap.originalListener=func,getListeners(that,type).push(wrap),that;function wrap(){off.call(that,type,wrap),func.apply(this,arguments)}},off:off,emit:function(type,value){var that=this,listeners=getListeners(that,type,!0);if(!listeners)return!1;var arglen=arguments.length;{var args;1===arglen?listeners.forEach(function(func){func.call(that)}):2===arglen?listeners.forEach(function(func){func.call(that,value)}):(args=Array.prototype.slice.call(arguments,1),listeners.forEach(function(func){func.apply(that,args)}))}return!!listeners.length}};function mixin(target){for(var key in methods)target[key]=methods[key];return target}function off(type,func){var listners;if(arguments.length){if(func){if(listners=getListeners(this,type,!0)){if(!(listners=listners.filter(function(test){return test!==func&&test.originalListener!==func})).length)return off.call(this,type);this[LISTENERS][type]=listners}}else if((listners=this[LISTENERS])&&(delete listners[type],!Object.keys(listners).length))return off.call(this)}else delete this[LISTENERS];return this}function getListeners(that,type,readonly){if(!readonly||that[LISTENERS])return(readonly=that[LISTENERS]||(that[LISTENERS]={}))[type]||(readonly[type]=[])}mixin(EventLite.prototype),EventLite.mixin=mixin}(function EventLite(){if(!(this instanceof EventLite))return new EventLite})},"./node_modules/ieee754/index.js":function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,nBytes=buffer[offset+i];for(i+=d,e=nBytes&(1<<-nBits)-1,nBytes>>=-nBits,nBits+=eLen;0<nBits;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;0<nBits;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(nBytes?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(nBytes?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,nBytes=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(isLE=Math.pow(2,-e))<1&&(e--,isLE*=2),2<=(value+=1<=e+eBias?rt/isLE:rt*Math.pow(2,1-eBias))*isLE&&(e++,isLE/=2),eMax<=e+eBias?(m=0,e=eMax):1<=e+eBias?(m=(value*isLE-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));8<=mLen;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;0<eLen;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*nBytes}},"./node_modules/int64-buffer/int64-buffer.js":function(module,exports,__webpack_require__){!function(Buffer){!function(exports){var storage,BUFFER=void 0!==Buffer&&Buffer,UINT8ARRAY="undefined"!=typeof Uint8Array&&Uint8Array,ARRAYBUFFER="undefined"!=typeof ArrayBuffer&&ArrayBuffer,ZERO=[0,0,0,0,0,0,0,0],isArray=Array.isArray||function(val){return!!val&&"[object Array]"==Object.prototype.toString.call(val)},BIT32=4294967296;function factory(name,bigendian,unsigned){var posH=bigendian?0:4,posL=bigendian?4:0,pos0=bigendian?0:3,pos1=bigendian?1:2,pos2=bigendian?2:1,pos3=bigendian?3:0,fromPositive=bigendian?fromPositiveBE:fromPositiveLE,fromNegative=bigendian?fromNegativeBE:fromNegativeLE,bigendian=Int64.prototype,isName="is"+name,_isInt64="_"+isName;return bigendian.buffer=void 0,bigendian.offset=0,bigendian[_isInt64]=!0,bigendian.toNumber=toNumber,bigendian.toString=function(radix){var buffer=this.buffer,offset=this.offset,high=readInt32(buffer,offset+posH),low=readInt32(buffer,offset+posL),str="",buffer=!unsigned&&2147483648&high;buffer&&(high=~high,low=BIT32-low);radix=radix||10;for(;;){var mod=high%radix*BIT32+low;if(high=Math.floor(high/radix),low=Math.floor(mod/radix),str=(mod%radix).toString(radix)+str,!high&&!low)break}buffer&&(str="-"+str);return str},bigendian.toJSON=toNumber,bigendian.toArray=toArray,BUFFER&&(bigendian.toBuffer=toBuffer),UINT8ARRAY&&(bigendian.toArrayBuffer=toArrayBuffer),Int64[isName]=function(b){return!(!b||!b[_isInt64])},exports[name]=Int64;function Int64(buffer,offset,value,raddix){return this instanceof Int64?function(that,buffer,offset,value,raddix){UINT8ARRAY&&ARRAYBUFFER&&(buffer instanceof ARRAYBUFFER&&(buffer=new UINT8ARRAY(buffer)),value instanceof ARRAYBUFFER)&&(value=new UINT8ARRAY(value));var _storage;buffer||offset||value||storage?(isValidBuffer(buffer,offset)||(_storage=storage||Array,raddix=offset,value=buffer,offset=0,buffer=new _storage(8)),that.buffer=buffer,that.offset=offset|=0,void 0!==value&&("string"==typeof value?function(buffer,offset,str,raddix){var pos=0,len=str.length,high=0,low=0;"-"===str[0]&&pos++;var sign=pos;for(;pos<len;){var chr=parseInt(str[pos++],raddix);if(!(0<=chr))break;low=low*raddix+chr,high=high*raddix+Math.floor(low/BIT32),low%=BIT32}sign&&(high=~high,low?low=BIT32-low:high++);writeInt32(buffer,offset+posH,high),writeInt32(buffer,offset+posL,low)}(buffer,offset,value,raddix||10):isValidBuffer(value,raddix)?fromArray(buffer,offset,value,raddix):"number"==typeof raddix?(writeInt32(buffer,offset+posH,value),writeInt32(buffer,offset+posL,raddix)):0<value?fromPositive(buffer,offset,value):value<0?fromNegative(buffer,offset,value):fromArray(buffer,offset,ZERO,0))):that.buffer=newArray(ZERO,0)}(this,buffer,offset,value,raddix):new Int64(buffer,offset,value,raddix)}function toNumber(){var buffer=this.buffer,offset=this.offset,high=readInt32(buffer,offset+posH),buffer=readInt32(buffer,offset+posL);return unsigned||(high|=0),high?high*BIT32+buffer:buffer}function writeInt32(buffer,offset,value){buffer[offset+pos3]=255&value,buffer[offset+pos2]=255&(value>>=8),buffer[offset+pos1]=255&(value>>=8),buffer[offset+pos0]=255&(value>>=8)}function readInt32(buffer,offset){return 16777216*buffer[offset+pos0]+(buffer[offset+pos1]<<16)+(buffer[offset+pos2]<<8)+buffer[offset+pos3]}}function toArray(raw){var buffer=this.buffer,offset=this.offset;return storage=null,!1!==raw&&0===offset&&8===buffer.length&&isArray(buffer)?buffer:newArray(buffer,offset)}function toBuffer(raw){var buffer=this.buffer,offset=this.offset;return storage=BUFFER,!1!==raw&&0===offset&&8===buffer.length&&Buffer.isBuffer(buffer)?buffer:(fromArray(raw=new BUFFER(8),0,buffer,offset),raw)}function toArrayBuffer(raw){var buffer=this.buffer,offset=this.offset,arrbuf=buffer.buffer;return storage=UINT8ARRAY,!1!==raw&&0===offset&&arrbuf instanceof ARRAYBUFFER&&8===arrbuf.byteLength?arrbuf:(fromArray(raw=new UINT8ARRAY(8),0,buffer,offset),raw.buffer)}function isValidBuffer(buffer,offset){var len=buffer&&buffer.length;return offset|=0,len&&offset+8<=len&&"string"!=typeof buffer[offset]}function fromArray(destbuf,destoff,srcbuf,srcoff){destoff|=0,srcoff|=0;for(var i=0;i<8;i++)destbuf[destoff++]=255&srcbuf[srcoff++]}function newArray(buffer,offset){return Array.prototype.slice.call(buffer,offset,offset+8)}function fromPositiveBE(buffer,offset,value){for(var pos=offset+8;offset<pos;)buffer[--pos]=255&value,value/=256}function fromNegativeBE(buffer,offset,value){var pos=offset+8;for(value++;offset<pos;)buffer[--pos]=255&-value^255,value/=256}function fromPositiveLE(buffer,offset,value){for(var end=offset+8;offset<end;)buffer[offset++]=255&value,value/=256}function fromNegativeLE(buffer,offset,value){var end=offset+8;for(value++;offset<end;)buffer[offset++]=255&-value^255,value/=256}factory("Uint64BE",!0,!0),factory("Int64BE",!0,!1),factory("Uint64LE",!1,!0),factory("Int64LE",!1,!1)}("string"!=typeof exports.nodeName?exports:this||{})}.call(this,__webpack_require__("./node_modules/buffer/index.js").Buffer)},"./node_modules/is-buffer/index.js":function(module,exports){function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}module.exports=function(obj){return null!=obj&&(isBuffer(obj)||function(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}(obj)||!!obj._isBuffer)}},"./node_modules/md5/md5.js":function(module,exports,__webpack_require__){function md5(message,options){message.constructor==String?message=(options&&"binary"===options.encoding?bin:utf8).stringToBytes(message):isBuffer(message)?message=Array.prototype.slice.call(message,0):Array.isArray(message)||(message=message.toString());for(var m=crypt.bytesToWords(message),options=8*message.length,a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<m.length;i++)m[i]=16711935&(m[i]<<8|m[i]>>>24)|4278255360&(m[i]<<24|m[i]>>>8);m[options>>>5]|=128<<options%32,m[14+(64+options>>>9<<4)]=options;for(var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii,i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d,a=FF(a,b,c,d,m[i+0],7,-680876936),d=FF(d,a,b,c,m[i+1],12,-389564586),c=FF(c,d,a,b,m[i+2],17,606105819),b=FF(b,c,d,a,m[i+3],22,-1044525330);a=FF(a,b,c,d,m[i+4],7,-176418897),d=FF(d,a,b,c,m[i+5],12,1200080426),c=FF(c,d,a,b,m[i+6],17,-1473231341),b=FF(b,c,d,a,m[i+7],22,-45705983),a=FF(a,b,c,d,m[i+8],7,1770035416),d=FF(d,a,b,c,m[i+9],12,-1958414417),c=FF(c,d,a,b,m[i+10],17,-42063),b=FF(b,c,d,a,m[i+11],22,-1990404162),a=FF(a,b,c,d,m[i+12],7,1804603682),d=FF(d,a,b,c,m[i+13],12,-40341101),c=FF(c,d,a,b,m[i+14],17,-1502002290),a=GG(a,b=FF(b,c,d,a,m[i+15],22,1236535329),c,d,m[i+1],5,-165796510),d=GG(d,a,b,c,m[i+6],9,-1069501632),c=GG(c,d,a,b,m[i+11],14,643717713),b=GG(b,c,d,a,m[i+0],20,-373897302),a=GG(a,b,c,d,m[i+5],5,-701558691),d=GG(d,a,b,c,m[i+10],9,38016083),c=GG(c,d,a,b,m[i+15],14,-660478335),b=GG(b,c,d,a,m[i+4],20,-405537848),a=GG(a,b,c,d,m[i+9],5,568446438),d=GG(d,a,b,c,m[i+14],9,-1019803690),c=GG(c,d,a,b,m[i+3],14,-187363961),b=GG(b,c,d,a,m[i+8],20,1163531501),a=GG(a,b,c,d,m[i+13],5,-1444681467),d=GG(d,a,b,c,m[i+2],9,-51403784),c=GG(c,d,a,b,m[i+7],14,1735328473),a=HH(a,b=GG(b,c,d,a,m[i+12],20,-1926607734),c,d,m[i+5],4,-378558),d=HH(d,a,b,c,m[i+8],11,-2022574463),c=HH(c,d,a,b,m[i+11],16,1839030562),b=HH(b,c,d,a,m[i+14],23,-35309556),a=HH(a,b,c,d,m[i+1],4,-1530992060),d=HH(d,a,b,c,m[i+4],11,1272893353),c=HH(c,d,a,b,m[i+7],16,-155497632),b=HH(b,c,d,a,m[i+10],23,-1094730640),a=HH(a,b,c,d,m[i+13],4,681279174),d=HH(d,a,b,c,m[i+0],11,-358537222),c=HH(c,d,a,b,m[i+3],16,-722521979),b=HH(b,c,d,a,m[i+6],23,76029189),a=HH(a,b,c,d,m[i+9],4,-640364487),d=HH(d,a,b,c,m[i+12],11,-421815835),c=HH(c,d,a,b,m[i+15],16,530742520),a=II(a,b=HH(b,c,d,a,m[i+2],23,-995338651),c,d,m[i+0],6,-198630844),d=II(d,a,b,c,m[i+7],10,1126891415),c=II(c,d,a,b,m[i+14],15,-1416354905),b=II(b,c,d,a,m[i+5],21,-57434055),a=II(a,b,c,d,m[i+12],6,1700485571),d=II(d,a,b,c,m[i+3],10,-1894986606),c=II(c,d,a,b,m[i+10],15,-1051523),b=II(b,c,d,a,m[i+1],21,-2054922799),a=II(a,b,c,d,m[i+8],6,1873313359),d=II(d,a,b,c,m[i+15],10,-30611744),c=II(c,d,a,b,m[i+6],15,-1560198380),b=II(b,c,d,a,m[i+13],21,1309151649),a=II(a,b,c,d,m[i+4],6,-145523070),d=II(d,a,b,c,m[i+11],10,-1120210379),c=II(c,d,a,b,m[i+2],15,718787259),b=II(b,c,d,a,m[i+9],21,-343485551),a=a+aa>>>0,b=b+bb>>>0,c=c+cc>>>0,d=d+dd>>>0}return crypt.endian([a,b,c,d])}var crypt,utf8,isBuffer,bin;crypt=__webpack_require__("./node_modules/crypt/crypt.js"),utf8=__webpack_require__("./node_modules/charenc/charenc.js").utf8,isBuffer=__webpack_require__("./node_modules/is-buffer/index.js"),bin=__webpack_require__("./node_modules/charenc/charenc.js").bin,md5._ff=function(a,b,c,d,x,s,t){a=a+(b&c|~b&d)+(x>>>0)+t;return(a<<s|a>>>32-s)+b},md5._gg=function(a,b,c,d,x,s,t){a=a+(b&d|c&~d)+(x>>>0)+t;return(a<<s|a>>>32-s)+b},md5._hh=function(a,b,c,d,x,s,t){a=a+(b^c^d)+(x>>>0)+t;return(a<<s|a>>>32-s)+b},md5._ii=function(a,b,c,d,x,s,t){a=a+(c^(b|~d))+(x>>>0)+t;return(a<<s|a>>>32-s)+b},md5._blocksize=16,md5._digestsize=16,module.exports=function(message,options){if(null==message)throw new Error("Illegal argument "+message);message=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?message:options&&options.asString?bin.bytesToString(message):crypt.bytesToHex(message)}},"./node_modules/msgpack-lite/lib/browser.js":function(module,exports,__webpack_require__){exports.encode=__webpack_require__("./node_modules/msgpack-lite/lib/encode.js").encode,exports.decode=__webpack_require__("./node_modules/msgpack-lite/lib/decode.js").decode,exports.Encoder=__webpack_require__("./node_modules/msgpack-lite/lib/encoder.js").Encoder,exports.Decoder=__webpack_require__("./node_modules/msgpack-lite/lib/decoder.js").Decoder,exports.createCodec=__webpack_require__("./node_modules/msgpack-lite/lib/ext.js").createCodec,exports.codec=__webpack_require__("./node_modules/msgpack-lite/lib/codec.js").codec},"./node_modules/msgpack-lite/lib/buffer-global.js":function(module,exports,__webpack_require__){!function(Buffer){function c(B){return B&&B.isBuffer&&B}module.exports=c(void 0!==Buffer&&Buffer)||c(this.Buffer)||c("undefined"!=typeof window&&window.Buffer)||this.Buffer}.call(this,__webpack_require__("./node_modules/buffer/index.js").Buffer)},"./node_modules/msgpack-lite/lib/buffer-lite.js":function(module,exports){exports.copy=function(target,targetStart,start,end){var i;start=start||0;end||0===end||(end=this.length);targetStart=targetStart||0;var len=end-start;if(target===this&&start<targetStart&&targetStart<end)for(i=len-1;0<=i;i--)target[i+targetStart]=this[i+start];else for(i=0;i<len;i++)target[i+targetStart]=this[i+start];return len},exports.toString=function(encoding,start,end){var index=0|start;end=end||this.length;var string="",chr=0;for(;index<end;)!((chr=this[index++])<128)&&(192==(224&chr)?chr=(31&chr)<<6|63&this[index++]:224==(240&chr)?chr=(15&chr)<<12|(63&this[index++])<<6|63&this[index++]:240==(248&chr)&&(chr=(7&chr)<<18|(63&this[index++])<<12|(63&this[index++])<<6|63&this[index++]),65536<=chr)?(chr-=65536,string+=String.fromCharCode(55296+(chr>>>10),56320+(1023&chr))):string+=String.fromCharCode(chr);return string},exports.write=function(string,offset){var index=offset||(offset|=0),length=string.length,chr=0,i=0;for(;i<length;)(chr=string.charCodeAt(i++))<128?this[index++]=chr:(chr<2048?this[index++]=192|chr>>>6:(chr<55296||57343<chr?this[index++]=224|chr>>>12:(chr=65536+(chr-55296<<10|string.charCodeAt(i++)-56320),this[index++]=240|chr>>>18,this[index++]=128|chr>>>12&63),this[index++]=128|chr>>>6&63),this[index++]=128|63&chr);return index-offset}},"./node_modules/msgpack-lite/lib/bufferish-array.js":function(module,exports,__webpack_require__){var Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js");function alloc(size){return new Array(size)}(exports=module.exports=alloc(0)).alloc=alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value))value=Bufferish.Uint8Array.from(value);else if(Bufferish.isArrayBuffer(value))value=new Uint8Array(value);else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(value)}},"./node_modules/msgpack-lite/lib/bufferish-buffer.js":function(module,exports,__webpack_require__){var Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"),Buffer=Bufferish.global;function alloc(size){return new Buffer(size)}(exports=module.exports=Bufferish.hasBuffer?alloc(0):[]).alloc=Bufferish.hasBuffer&&Buffer.alloc||alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(!Bufferish.isBuffer(value)&&Bufferish.isView(value))value=Bufferish.Uint8Array.from(value);else if(Bufferish.isArrayBuffer(value))value=new Uint8Array(value);else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return Buffer.from&&1!==Buffer.from.length?Buffer.from(value):new Buffer(value)}},"./node_modules/msgpack-lite/lib/bufferish-proto.js":function(module,exports,__webpack_require__){var method,BufferLite=__webpack_require__("./node_modules/msgpack-lite/lib/buffer-lite.js"),Bufferish=(exports.copy=copy,exports.slice=slice,exports.toString=function(encoding,start,end){return(!isBufferShim&&Bufferish.isBuffer(this)?this:BufferLite).toString.apply(this,arguments)},exports.write=(method="write",function(){return(this[method]||BufferLite[method]).apply(this,arguments)}),__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js")),exports=Bufferish.global,isBufferShim=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in exports,brokenTypedArray=isBufferShim&&!exports.TYPED_ARRAY_SUPPORT;function copy(target,targetStart,start,end){var thisIsBuffer=Bufferish.isBuffer(this),targetIsBuffer=Bufferish.isBuffer(target);return thisIsBuffer&&targetIsBuffer?this.copy(target,targetStart,start,end):brokenTypedArray||thisIsBuffer||targetIsBuffer||!Bufferish.isView(this)||!Bufferish.isView(target)?BufferLite.copy.call(this,target,targetStart,start,end):(thisIsBuffer=start||null!=end?slice.call(this,start,end):this,target.set(thisIsBuffer,targetStart),thisIsBuffer.length)}function slice(start,end){var f=this.slice||!brokenTypedArray&&this.subarray;return f?f.call(this,start,end):(f=Bufferish.alloc.call(this,end-start),copy.call(this,f,0,start,end),f)}},"./node_modules/msgpack-lite/lib/bufferish-uint8array.js":function(module,exports,__webpack_require__){var Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js");function alloc(size){return new Uint8Array(size)}(exports=module.exports=Bufferish.hasArrayBuffer?alloc(0):[]).alloc=alloc,exports.concat=Bufferish.concat,exports.from=function(value){if(Bufferish.isView(value)){var byteOffset=value.byteOffset,byteLength=value.byteLength;(value=value.buffer).byteLength!==byteLength&&(value.slice?value=value.slice(byteOffset,byteOffset+byteLength):(value=new Uint8Array(value)).byteLength!==byteLength&&(value=Array.prototype.slice.call(value,byteOffset,byteOffset+byteLength)))}else{if("string"==typeof value)return Bufferish.from.call(exports,value);if("number"==typeof value)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(value)}},"./node_modules/msgpack-lite/lib/bufferish.js":function(module,exports,__webpack_require__){var Buffer=exports.global=__webpack_require__("./node_modules/msgpack-lite/lib/buffer-global.js"),hasBuffer=exports.hasBuffer=Buffer&&!!Buffer.isBuffer,hasArrayBuffer=exports.hasArrayBuffer="undefined"!=typeof ArrayBuffer,isArray=exports.isArray=__webpack_require__("./node_modules/msgpack-lite/node_modules/isarray/index.js"),isBuffer=(exports.isArrayBuffer=hasArrayBuffer?function(value){return value instanceof ArrayBuffer||_isArrayBuffer(value)}:_false,exports.isBuffer=hasBuffer?Buffer.isBuffer:_false),isView=exports.isView=hasArrayBuffer?ArrayBuffer.isView||_is("ArrayBuffer","buffer"):_false,BufferArray=(exports.alloc=alloc,exports.concat=function(list,length){length||(length=0,Array.prototype.forEach.call(list,function(buffer){length+=buffer.length}));var ref=this!==exports&&this||list[0],result=alloc.call(ref,length),offset=0;return Array.prototype.forEach.call(list,function(buffer){offset+=BufferProto.copy.call(buffer,result,offset)}),result},exports.from=function(value){return"string"==typeof value?function(value){var expected=3*value.length,that=alloc.call(this,expected),value=BufferProto.write.call(that,value);expected!==value&&(that=BufferProto.slice.call(that,0,value));return that}.call(this,value):auto(this).from(value)},exports.Array=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-array.js")),BufferBuffer=exports.Buffer=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-buffer.js"),BufferUint8Array=exports.Uint8Array=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-uint8array.js"),BufferProto=exports.prototype=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-proto.js");function alloc(size){return auto(this).alloc(size)}var _isArrayBuffer=_is("ArrayBuffer");function auto(that){return isBuffer(that)?BufferBuffer:isView(that)?BufferUint8Array:isArray(that)?BufferArray:hasBuffer?BufferBuffer:hasArrayBuffer?BufferUint8Array:BufferArray}function _false(){return!1}function _is(name,key){return name="[object "+name+"]",function(value){return null!=value&&{}.toString.call(key?value[key]:value)===name}}},"./node_modules/msgpack-lite/lib/codec-base.js":function(module,exports,__webpack_require__){var IS_ARRAY=__webpack_require__("./node_modules/msgpack-lite/node_modules/isarray/index.js"),Bufferish=(exports.createCodec=createCodec,exports.install=function(props){for(var key in props)Codec.prototype[key]=function(a,b){return a&&b?function(){return a.apply(this,arguments),b.apply(this,arguments)}:a||b}(Codec.prototype[key],props[key])},exports.filter=function(filter){return IS_ARRAY(filter)?function(filters){return filters=filters.slice(),function(value){return filters.reduce(iterator,value)};function iterator(value,filter){return filter(value)}}(filter):filter},__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"));function Codec(options){if(!(this instanceof Codec))return new Codec(options);this.options=options,this.init()}function createCodec(options){return new Codec(options)}Codec.prototype.init=function(){var options=this.options;return options&&options.uint8array&&(this.bufferish=Bufferish.Uint8Array),this},exports.preset=new Codec({preset:!0})},"./node_modules/msgpack-lite/lib/codec.js":function(module,exports,__webpack_require__){__webpack_require__("./node_modules/msgpack-lite/lib/read-core.js"),__webpack_require__("./node_modules/msgpack-lite/lib/write-core.js"),exports.codec={preset:__webpack_require__("./node_modules/msgpack-lite/lib/codec-base.js").preset}},"./node_modules/msgpack-lite/lib/decode-buffer.js":function(module,exports,__webpack_require__){exports.DecodeBuffer=DecodeBuffer;exports=__webpack_require__("./node_modules/msgpack-lite/lib/read-core.js").preset;function DecodeBuffer(options){if(!(this instanceof DecodeBuffer))return new DecodeBuffer(options);options&&(this.options=options).codec&&(options=this.codec=options.codec).bufferish&&(this.bufferish=options.bufferish)}__webpack_require__("./node_modules/msgpack-lite/lib/flex-buffer.js").FlexDecoder.mixin(DecodeBuffer.prototype),DecodeBuffer.prototype.codec=exports,DecodeBuffer.prototype.fetch=function(){return this.codec.decode(this)}},"./node_modules/msgpack-lite/lib/decode.js":function(module,exports,__webpack_require__){exports.decode=function(input,options){options=new DecodeBuffer(options);return options.write(input),options.read()};var DecodeBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/decode-buffer.js").DecodeBuffer},"./node_modules/msgpack-lite/lib/decoder.js":function(module,exports,__webpack_require__){exports.Decoder=Decoder;var exports=__webpack_require__("./node_modules/event-lite/event-lite.js"),DecodeBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/decode-buffer.js").DecodeBuffer;function Decoder(options){if(!(this instanceof Decoder))return new Decoder(options);DecodeBuffer.call(this,options)}Decoder.prototype=new DecodeBuffer,exports.mixin(Decoder.prototype),Decoder.prototype.decode=function(chunk){arguments.length&&this.write(chunk),this.flush()},Decoder.prototype.push=function(chunk){this.emit("data",chunk)},Decoder.prototype.end=function(chunk){this.decode(chunk),this.emit("end")}},"./node_modules/msgpack-lite/lib/encode-buffer.js":function(module,exports,__webpack_require__){exports.EncodeBuffer=EncodeBuffer;exports=__webpack_require__("./node_modules/msgpack-lite/lib/write-core.js").preset;function EncodeBuffer(options){if(!(this instanceof EncodeBuffer))return new EncodeBuffer(options);options&&(this.options=options).codec&&(options=this.codec=options.codec).bufferish&&(this.bufferish=options.bufferish)}__webpack_require__("./node_modules/msgpack-lite/lib/flex-buffer.js").FlexEncoder.mixin(EncodeBuffer.prototype),EncodeBuffer.prototype.codec=exports,EncodeBuffer.prototype.write=function(input){this.codec.encode(this,input)}},"./node_modules/msgpack-lite/lib/encode.js":function(module,exports,__webpack_require__){exports.encode=function(input,options){options=new EncodeBuffer(options);return options.write(input),options.read()};var EncodeBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/encode-buffer.js").EncodeBuffer},"./node_modules/msgpack-lite/lib/encoder.js":function(module,exports,__webpack_require__){exports.Encoder=Encoder;var exports=__webpack_require__("./node_modules/event-lite/event-lite.js"),EncodeBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/encode-buffer.js").EncodeBuffer;function Encoder(options){if(!(this instanceof Encoder))return new Encoder(options);EncodeBuffer.call(this,options)}Encoder.prototype=new EncodeBuffer,exports.mixin(Encoder.prototype),Encoder.prototype.encode=function(chunk){this.write(chunk),this.emit("data",this.read())},Encoder.prototype.end=function(chunk){arguments.length&&this.encode(chunk),this.flush(),this.emit("end")}},"./node_modules/msgpack-lite/lib/ext-buffer.js":function(module,exports,__webpack_require__){exports.ExtBuffer=function ExtBuffer(buffer,type){if(!(this instanceof ExtBuffer))return new ExtBuffer(buffer,type);this.buffer=Bufferish.from(buffer);this.type=type};var Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js")},"./node_modules/msgpack-lite/lib/ext-packer.js":function(module,exports,__webpack_require__){exports.setExtPackers=function(codec){codec.addExtPacker(14,Error,[packError,encode]),codec.addExtPacker(1,EvalError,[packError,encode]),codec.addExtPacker(2,RangeError,[packError,encode]),codec.addExtPacker(3,ReferenceError,[packError,encode]),codec.addExtPacker(4,SyntaxError,[packError,encode]),codec.addExtPacker(5,TypeError,[packError,encode]),codec.addExtPacker(6,URIError,[packError,encode]),codec.addExtPacker(10,RegExp,[packRegExp,encode]),codec.addExtPacker(11,Boolean,[packValueOf,encode]),codec.addExtPacker(12,String,[packValueOf,encode]),codec.addExtPacker(13,Date,[Number,encode]),codec.addExtPacker(15,Number,[packValueOf,encode]),"undefined"!=typeof Uint8Array&&(codec.addExtPacker(17,Int8Array,packTypedArray),codec.addExtPacker(18,Uint8Array,packTypedArray),codec.addExtPacker(19,Int16Array,packTypedArray),codec.addExtPacker(20,Uint16Array,packTypedArray),codec.addExtPacker(21,Int32Array,packTypedArray),codec.addExtPacker(22,Uint32Array,packTypedArray),codec.addExtPacker(23,Float32Array,packTypedArray),"undefined"!=typeof Float64Array&&codec.addExtPacker(24,Float64Array,packTypedArray),"undefined"!=typeof Uint8ClampedArray&&codec.addExtPacker(25,Uint8ClampedArray,packTypedArray),codec.addExtPacker(26,ArrayBuffer,packTypedArray),codec.addExtPacker(29,DataView,packTypedArray));Bufferish.hasBuffer&&codec.addExtPacker(27,Buffer,Bufferish.from)};var _encode,Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"),Buffer=Bufferish.global,packTypedArray=Bufferish.Uint8Array.from,ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function encode(input){return(_encode=_encode||__webpack_require__("./node_modules/msgpack-lite/lib/encode.js").encode)(input)}function packValueOf(value){return value.valueOf()}function packRegExp(value){(value=RegExp.prototype.toString.call(value).split("/")).shift();var out=[value.pop()];return out.unshift(value.join("/")),out}function packError(value){var key,out={};for(key in ERROR_COLUMNS)out[key]=value[key];return out}},"./node_modules/msgpack-lite/lib/ext-unpacker.js":function(module,exports,__webpack_require__){exports.setExtUnpackers=function(codec){codec.addExtUnpacker(14,[decode,unpackError(Error)]),codec.addExtUnpacker(1,[decode,unpackError(EvalError)]),codec.addExtUnpacker(2,[decode,unpackError(RangeError)]),codec.addExtUnpacker(3,[decode,unpackError(ReferenceError)]),codec.addExtUnpacker(4,[decode,unpackError(SyntaxError)]),codec.addExtUnpacker(5,[decode,unpackError(TypeError)]),codec.addExtUnpacker(6,[decode,unpackError(URIError)]),codec.addExtUnpacker(10,[decode,unpackRegExp]),codec.addExtUnpacker(11,[decode,unpackClass(Boolean)]),codec.addExtUnpacker(12,[decode,unpackClass(String)]),codec.addExtUnpacker(13,[decode,unpackClass(Date)]),codec.addExtUnpacker(15,[decode,unpackClass(Number)]),"undefined"!=typeof Uint8Array&&(codec.addExtUnpacker(17,unpackClass(Int8Array)),codec.addExtUnpacker(18,unpackClass(Uint8Array)),codec.addExtUnpacker(19,[unpackArrayBuffer,unpackClass(Int16Array)]),codec.addExtUnpacker(20,[unpackArrayBuffer,unpackClass(Uint16Array)]),codec.addExtUnpacker(21,[unpackArrayBuffer,unpackClass(Int32Array)]),codec.addExtUnpacker(22,[unpackArrayBuffer,unpackClass(Uint32Array)]),codec.addExtUnpacker(23,[unpackArrayBuffer,unpackClass(Float32Array)]),"undefined"!=typeof Float64Array&&codec.addExtUnpacker(24,[unpackArrayBuffer,unpackClass(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&codec.addExtUnpacker(25,unpackClass(Uint8ClampedArray)),codec.addExtUnpacker(26,unpackArrayBuffer),codec.addExtUnpacker(29,[unpackArrayBuffer,unpackClass(DataView)]));Bufferish.hasBuffer&&codec.addExtUnpacker(27,unpackClass(Buffer))};var _decode,Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"),Buffer=Bufferish.global,ERROR_COLUMNS={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function decode(input){return(_decode=_decode||__webpack_require__("./node_modules/msgpack-lite/lib/decode.js").decode)(input)}function unpackRegExp(value){return RegExp.apply(null,value)}function unpackError(Class){return function(value){var key,out=new Class;for(key in ERROR_COLUMNS)out[key]=value[key];return out}}function unpackClass(Class){return function(value){return new Class(value)}}function unpackArrayBuffer(value){return new Uint8Array(value).buffer}},"./node_modules/msgpack-lite/lib/ext.js":function(module,exports,__webpack_require__){__webpack_require__("./node_modules/msgpack-lite/lib/read-core.js"),__webpack_require__("./node_modules/msgpack-lite/lib/write-core.js"),exports.createCodec=__webpack_require__("./node_modules/msgpack-lite/lib/codec-base.js").createCodec},"./node_modules/msgpack-lite/lib/flex-buffer.js":function(module,exports,__webpack_require__){exports.FlexDecoder=FlexDecoder,exports.FlexEncoder=FlexEncoder;var Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js");function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}function write(){throw new Error("method not implemented: write()")}function fetch(){throw new Error("method not implemented: fetch()")}function read(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function push(chunk){(this.buffers||(this.buffers=[])).push(chunk)}function pull(){return(this.buffers||(this.buffers=[])).shift()}function mixinFactory(source){return function(target){for(var key in source)target[key]=source[key];return target}}FlexDecoder.mixin=mixinFactory({bufferish:Bufferish,write:function(chunk){var prev=this.offset?Bufferish.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=prev?chunk?this.bufferish.concat([prev,chunk]):prev:chunk,this.offset=0},fetch:fetch,flush:function(){for(;this.offset<this.buffer.length;){var value,start=this.offset;try{value=this.fetch()}catch(e){if(e&&"BUFFER_SHORTAGE"!=e.message)throw e;this.offset=start;break}this.push(value)}},push:push,pull:pull,read:read,reserve:function(length){var start=this.offset,length=start+length;if(length>this.buffer.length)throw new Error("BUFFER_SHORTAGE");return this.offset=length,start},offset:0}),FlexDecoder.mixin(FlexDecoder.prototype),FlexEncoder.mixin=mixinFactory({bufferish:Bufferish,write:write,fetch:function(){var start=this.start;{var end;if(start<this.offset)return end=this.start=this.offset,Bufferish.prototype.slice.call(this.buffer,start,end)}},flush:function(){for(;this.start<this.offset;){var value=this.fetch();value&&this.push(value)}},push:push,pull:function(){var buffers=this.buffers||(this.buffers=[]),chunk=1<buffers.length?this.bufferish.concat(buffers):buffers[0];return buffers.length=0,chunk},read:read,reserve:function(length){var req=0|length;if(this.buffer){var size=this.buffer.length,start=0|this.offset,end=start+req;if(end<size)return this.offset=end,start;this.flush(),length=Math.max(length,Math.min(2*size,this.maxBufferSize))}return length=Math.max(length,this.minBufferSize),this.buffer=this.bufferish.alloc(length),this.start=0,this.offset=req,0},send:function(buffer){var length=buffer.length;length>this.minBufferSize?(this.flush(),this.push(buffer)):(length=this.reserve(length),Bufferish.prototype.copy.call(buffer,this.buffer,length))},maxBufferSize:65536,minBufferSize:2048,offset:0,start:0}),FlexEncoder.mixin(FlexEncoder.prototype)},"./node_modules/msgpack-lite/lib/read-core.js":function(module,exports,__webpack_require__){var ExtBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/ext-buffer.js").ExtBuffer,ExtUnpacker=__webpack_require__("./node_modules/msgpack-lite/lib/ext-unpacker.js"),readUint8=__webpack_require__("./node_modules/msgpack-lite/lib/read-format.js").readUint8,ReadToken=__webpack_require__("./node_modules/msgpack-lite/lib/read-token.js"),CodecBase=__webpack_require__("./node_modules/msgpack-lite/lib/codec-base.js");function getDecoder(options){var readToken=ReadToken.getReadToken(options);return function(decoder){var type=readUint8(decoder),func=readToken[type];if(func)return func(decoder);throw new Error("Invalid type: "+(type&&"0x"+type.toString(16)))}}function init(){var options=this.options;return this.decode=getDecoder(options),options&&options.preset&&ExtUnpacker.setExtUnpackers(this),this}CodecBase.install({addExtUnpacker:function(etype,unpacker){(this.extUnpackers||(this.extUnpackers=[]))[etype]=CodecBase.filter(unpacker)},getExtUnpacker:function(type){return(this.extUnpackers||(this.extUnpackers=[]))[type]||function(buffer){return new ExtBuffer(buffer,type)}},init:init}),exports.preset=init.call(CodecBase.preset)},"./node_modules/msgpack-lite/lib/read-format.js":function(module,exports,__webpack_require__){var ieee754=__webpack_require__("./node_modules/ieee754/index.js"),Int64Buffer=__webpack_require__("./node_modules/int64-buffer/int64-buffer.js"),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE,Bufferish=(exports.getReadFormat=function(options){var binarraybuffer=Bufferish.hasArrayBuffer&&options&&options.binarraybuffer,int64=options&&options.int64;return{map:HAS_MAP&&options&&options.usemap?map_to_map:map_to_obj,array:array,str:str,bin:binarraybuffer?bin_arraybuffer:bin_buffer,ext:ext,uint8:uint8,uint16:uint16,uint32:uint32,uint64:read(8,int64?readUInt64BE_int64:readUInt64BE),int8:int8,int16:int16,int32:int32,int64:read(8,int64?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)}},exports.readUint8=uint8,__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js")),BufferProto=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-proto.js"),HAS_MAP="undefined"!=typeof Map,NO_ASSERT=!0;function map_to_obj(decoder,len){for(var value={},k=new Array(len),v=new Array(len),decode=decoder.codec.decode,i=0;i<len;i++)k[i]=decode(decoder),v[i]=decode(decoder);for(i=0;i<len;i++)value[k[i]]=v[i];return value}function map_to_map(decoder,len){for(var value=new Map,k=new Array(len),v=new Array(len),decode=decoder.codec.decode,i=0;i<len;i++)k[i]=decode(decoder),v[i]=decode(decoder);for(i=0;i<len;i++)value.set(k[i],v[i]);return value}function array(decoder,len){for(var value=new Array(len),decode=decoder.codec.decode,i=0;i<len;i++)value[i]=decode(decoder);return value}function str(decoder,len){var start=decoder.reserve(len);return BufferProto.toString.call(decoder.buffer,"utf-8",start,start+len)}function bin_buffer(decoder,len){var start=decoder.reserve(len),decoder=BufferProto.slice.call(decoder.buffer,start,start+len);return Bufferish.from(decoder)}function bin_arraybuffer(decoder,len){var start=decoder.reserve(len),decoder=BufferProto.slice.call(decoder.buffer,start,start+len);return Bufferish.Uint8Array.from(decoder).buffer}function ext(decoder,len){var start=decoder.reserve(len+1),type=decoder.buffer[start++],len=start+len,unpack=decoder.codec.getExtUnpacker(type);if(unpack)return unpack(BufferProto.slice.call(decoder.buffer,start,len));throw new Error("Invalid ext type: "+(type&&"0x"+type.toString(16)))}function uint8(decoder){var start=decoder.reserve(1);return decoder.buffer[start]}function int8(decoder){var start=decoder.reserve(1),decoder=decoder.buffer[start];return 128&decoder?decoder-256:decoder}function uint16(decoder){var start=decoder.reserve(2),decoder=decoder.buffer;return decoder[start++]<<8|decoder[start]}function int16(decoder){var start=decoder.reserve(2),decoder=decoder.buffer,decoder=decoder[start++]<<8|decoder[start];return 32768&decoder?decoder-65536:decoder}function uint32(decoder){var start=decoder.reserve(4),decoder=decoder.buffer;return 16777216*decoder[start++]+(decoder[start++]<<16)+(decoder[start++]<<8)+decoder[start]}function int32(decoder){var start=decoder.reserve(4),decoder=decoder.buffer;return decoder[start++]<<24|decoder[start++]<<16|decoder[start++]<<8|decoder[start]}function read(len,method){return function(decoder){var start=decoder.reserve(len);return method.call(decoder.buffer,start,NO_ASSERT)}}function readUInt64BE(start){return new Uint64BE(this,start).toNumber()}function readInt64BE(start){return new Int64BE(this,start).toNumber()}function readUInt64BE_int64(start){return new Uint64BE(this,start)}function readInt64BE_int64(start){return new Int64BE(this,start)}function readFloatBE(start){return ieee754.read(this,start,!1,23,4)}function readDoubleBE(start){return ieee754.read(this,start,!1,52,8)}},"./node_modules/msgpack-lite/lib/read-token.js":function(module,exports,__webpack_require__){var ReadFormat=__webpack_require__("./node_modules/msgpack-lite/lib/read-format.js");function init_token(format){for(var token=new Array(256),i=0;i<=127;i++)token[i]=constant(i);for(i=128;i<=143;i++)token[i]=fix(i-128,format.map);for(i=144;i<=159;i++)token[i]=fix(i-144,format.array);for(i=160;i<=191;i++)token[i]=fix(i-160,format.str);for(token[192]=constant(null),token[193]=null,token[194]=constant(!1),token[195]=constant(!0),token[196]=flex(format.uint8,format.bin),token[197]=flex(format.uint16,format.bin),token[198]=flex(format.uint32,format.bin),token[199]=flex(format.uint8,format.ext),token[200]=flex(format.uint16,format.ext),token[201]=flex(format.uint32,format.ext),token[202]=format.float32,token[203]=format.float64,token[204]=format.uint8,token[205]=format.uint16,token[206]=format.uint32,token[207]=format.uint64,token[208]=format.int8,token[209]=format.int16,token[210]=format.int32,token[211]=format.int64,token[212]=fix(1,format.ext),token[213]=fix(2,format.ext),token[214]=fix(4,format.ext),token[215]=fix(8,format.ext),token[216]=fix(16,format.ext),token[217]=flex(format.uint8,format.str),token[218]=flex(format.uint16,format.str),token[219]=flex(format.uint32,format.str),token[220]=flex(format.uint16,format.array),token[221]=flex(format.uint32,format.array),token[222]=flex(format.uint16,format.map),token[223]=flex(format.uint32,format.map),i=224;i<=255;i++)token[i]=constant(i-256);return token}function constant(value){return function(){return value}}function flex(lenFunc,decodeFunc){return function(decoder){var len=lenFunc(decoder);return decodeFunc(decoder,len)}}function fix(len,method){return function(decoder){return method(decoder,len)}}exports.getReadToken=function(options){var format=ReadFormat.getReadFormat(options);return(options&&options.useraw?function(format){var i,token=init_token(format).slice();for(token[217]=token[196],token[218]=token[197],token[219]=token[198],i=160;i<=191;i++)token[i]=fix(i-160,format.bin);return token}:init_token)(format)}},"./node_modules/msgpack-lite/lib/write-core.js":function(module,exports,__webpack_require__){var ExtBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/ext-buffer.js").ExtBuffer,ExtPacker=__webpack_require__("./node_modules/msgpack-lite/lib/ext-packer.js"),WriteType=__webpack_require__("./node_modules/msgpack-lite/lib/write-type.js"),CodecBase=__webpack_require__("./node_modules/msgpack-lite/lib/codec-base.js");function getEncoder(options){var writeType=WriteType.getWriteType(options);return function(encoder,value){var func=writeType[typeof value];if(!func)throw new Error('Unsupported type "'+typeof value+'": '+value);func(encoder,value)}}function init(){var options=this.options;return this.encode=getEncoder(options),options&&options.preset&&ExtPacker.setExtPackers(this),this}CodecBase.install({addExtPacker:function(etype,Class,packer){packer=CodecBase.filter(packer);var name=Class.name;name&&"Object"!==name?(this.extPackers||(this.extPackers={}))[name]=extPacker:(this.extEncoderList||(this.extEncoderList=[])).unshift([Class,extPacker]);function extPacker(value){return packer&&(value=packer(value)),new ExtBuffer(value,etype)}},getExtPacker:function(value){var packers=this.extPackers||(this.extPackers={}),c=value.constructor,value=c&&c.name&&packers[c.name];if(value)return value;for(var list=this.extEncoderList||(this.extEncoderList=[]),len=list.length,i=0;i<len;i++){var pair=list[i];if(c===pair[0])return pair[1]}},init:init}),exports.preset=init.call(CodecBase.preset)},"./node_modules/msgpack-lite/lib/write-token.js":function(module,exports,__webpack_require__){var ieee754=__webpack_require__("./node_modules/ieee754/index.js"),Int64Buffer=__webpack_require__("./node_modules/int64-buffer/int64-buffer.js"),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE,uint8=__webpack_require__("./node_modules/msgpack-lite/lib/write-uint8.js").uint8,Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"),Buffer=Bufferish.global,NO_TYPED_ARRAY=Bufferish.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer&&!Buffer.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish.hasBuffer&&Buffer.prototype||{};function init_token(){var token=uint8.slice();return token[196]=write1(196),token[197]=write2(197),token[198]=write4(198),token[199]=write1(199),token[200]=write2(200),token[201]=write4(201),token[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),token[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),token[204]=write1(204),token[205]=write2(205),token[206]=write4(206),token[207]=writeN(207,8,writeUInt64BE),token[208]=write1(208),token[209]=write2(209),token[210]=write4(210),token[211]=writeN(211,8,writeInt64BE),token[217]=write1(217),token[218]=write2(218),token[219]=write4(219),token[220]=write2(220),token[221]=write4(221),token[222]=write2(222),token[223]=write4(223),token}function write1(type){return function(encoder,value){var offset=encoder.reserve(2),encoder=encoder.buffer;encoder[offset++]=type,encoder[offset]=value}}function write2(type){return function(encoder,value){var offset=encoder.reserve(3),encoder=encoder.buffer;encoder[offset++]=type,encoder[offset++]=value>>>8,encoder[offset]=value}}function write4(type){return function(encoder,value){var offset=encoder.reserve(5),encoder=encoder.buffer;encoder[offset++]=type,encoder[offset++]=value>>>24,encoder[offset++]=value>>>16,encoder[offset++]=value>>>8,encoder[offset]=value}}function writeN(type,len,method,noAssert){return function(encoder,value){var offset=encoder.reserve(len+1);encoder.buffer[offset++]=type,method.call(encoder.buffer,value,offset,noAssert)}}function writeUInt64BE(value,offset){new Uint64BE(this,offset,value)}function writeInt64BE(value,offset){new Int64BE(this,offset,value)}function writeFloatBE(value,offset){ieee754.write(this,value,offset,!1,23,4)}function writeDoubleBE(value,offset){ieee754.write(this,value,offset,!1,52,8)}exports.getWriteToken=function(options){return(options&&options.uint8array?function(){var token=init_token();return token[202]=writeN(202,4,writeFloatBE),token[203]=writeN(203,8,writeDoubleBE),token}:NO_TYPED_ARRAY||Bufferish.hasBuffer&&options&&options.safe?function(){var token=uint8.slice();return token[196]=writeN(196,1,Buffer.prototype.writeUInt8),token[197]=writeN(197,2,Buffer.prototype.writeUInt16BE),token[198]=writeN(198,4,Buffer.prototype.writeUInt32BE),token[199]=writeN(199,1,Buffer.prototype.writeUInt8),token[200]=writeN(200,2,Buffer.prototype.writeUInt16BE),token[201]=writeN(201,4,Buffer.prototype.writeUInt32BE),token[202]=writeN(202,4,Buffer.prototype.writeFloatBE),token[203]=writeN(203,8,Buffer.prototype.writeDoubleBE),token[204]=writeN(204,1,Buffer.prototype.writeUInt8),token[205]=writeN(205,2,Buffer.prototype.writeUInt16BE),token[206]=writeN(206,4,Buffer.prototype.writeUInt32BE),token[207]=writeN(207,8,writeUInt64BE),token[208]=writeN(208,1,Buffer.prototype.writeInt8),token[209]=writeN(209,2,Buffer.prototype.writeInt16BE),token[210]=writeN(210,4,Buffer.prototype.writeInt32BE),token[211]=writeN(211,8,writeInt64BE),token[217]=writeN(217,1,Buffer.prototype.writeUInt8),token[218]=writeN(218,2,Buffer.prototype.writeUInt16BE),token[219]=writeN(219,4,Buffer.prototype.writeUInt32BE),token[220]=writeN(220,2,Buffer.prototype.writeUInt16BE),token[221]=writeN(221,4,Buffer.prototype.writeUInt32BE),token[222]=writeN(222,2,Buffer.prototype.writeUInt16BE),token[223]=writeN(223,4,Buffer.prototype.writeUInt32BE),token}:init_token)()}},"./node_modules/msgpack-lite/lib/write-type.js":function(module,exports,__webpack_require__){var IS_ARRAY=__webpack_require__("./node_modules/msgpack-lite/node_modules/isarray/index.js"),Int64Buffer=__webpack_require__("./node_modules/int64-buffer/int64-buffer.js"),Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE,Bufferish=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish.js"),BufferProto=__webpack_require__("./node_modules/msgpack-lite/lib/bufferish-proto.js"),WriteToken=__webpack_require__("./node_modules/msgpack-lite/lib/write-token.js"),uint8=__webpack_require__("./node_modules/msgpack-lite/lib/write-uint8.js").uint8,ExtBuffer=__webpack_require__("./node_modules/msgpack-lite/lib/ext-buffer.js").ExtBuffer,HAS_UINT8ARRAY="undefined"!=typeof Uint8Array,HAS_MAP="undefined"!=typeof Map,extmap=[];extmap[1]=212,extmap[2]=213,extmap[4]=214,extmap[8]=215,extmap[16]=216,exports.getWriteType=function(options){var token=WriteToken.getWriteToken(options),useraw=options&&options.useraw,binarraybuffer=HAS_UINT8ARRAY&&options&&options.binarraybuffer,isBuffer=binarraybuffer?Bufferish.isArrayBuffer:Bufferish.isBuffer,bin=binarraybuffer?function(encoder,value){bin_buffer(encoder,new Uint8Array(value))}:bin_buffer,map=HAS_MAP&&options&&options.usemap?function(encoder,value){if(!(value instanceof Map))return obj_to_map(encoder,value);var length=value.size,encode=(token[length<16?128+length:length<=65535?222:223](encoder,length),encoder.codec.encode);value.forEach(function(val,key,m){encode(encoder,key),encode(encoder,val)})}:obj_to_map;return{boolean:function(encoder,value){token[value?195:194](encoder,value)},function:nil,number:function(encoder,value){var ivalue=0|value;value!==ivalue?token[203](encoder,value):token[-32<=ivalue&&ivalue<=127?255&ivalue:0<=ivalue?ivalue<=255?204:ivalue<=65535?205:206:-128<=ivalue?208:-32768<=ivalue?209:210](encoder,ivalue)},object:useraw?function(encoder,value){if(isBuffer(value))return function(encoder,value){var length=value.length;token[length<32?160+length:length<=65535?218:219](encoder,length),encoder.send(value)}(encoder,value);object(encoder,value)}:object,string:function(head_size){return function(encoder,value){var length=value.length,maxsize=5+3*length,maxsize=(encoder.offset=encoder.reserve(maxsize),encoder.buffer),expected=head_size(length),start=encoder.offset+expected,value=(length=BufferProto.write.call(maxsize,value,start),head_size(length));{var end;expected!==value&&(expected=start+value-expected,end=start+length,BufferProto.copy.call(maxsize,maxsize,expected,start,end))}token[1===value?160+length:value<=3?215+value:219](encoder,length),encoder.offset+=length}}(useraw?function(length){return length<32?1:length<=65535?3:5}:function(length){return length<32?1:length<=255?2:length<=65535?3:5}),symbol:nil,undefined:nil};function object(encoder,value){var packer;return null===value?nil(encoder,value):isBuffer(value)?bin(encoder,value):IS_ARRAY(value)?function(encoder,value){for(var length=value.length,encode=(token[length<16?144+length:length<=65535?220:221](encoder,length),encoder.codec.encode),i=0;i<length;i++)encode(encoder,value[i])}(encoder,value):Uint64BE.isUint64BE(value)?function(encoder,value){token[207](encoder,value.toArray())}(encoder,value):Int64BE.isInt64BE(value)?function(encoder,value){token[211](encoder,value.toArray())}(encoder,value):(value=(packer=encoder.codec.getExtPacker(value))?packer(value):value)instanceof ExtBuffer?function(encoder,value){var buffer=value.buffer,length=buffer.length;token[extmap[length]||(length<255?199:length<=65535?200:201)](encoder,length),uint8[value.type](encoder),encoder.send(buffer)}(encoder,value):void map(encoder,value)}function nil(encoder,value){token[192](encoder,value)}function bin_buffer(encoder,value){var length=value.length;token[length<255?196:length<=65535?197:198](encoder,length),encoder.send(value)}function obj_to_map(encoder,value){var keys=Object.keys(value),length=keys.length,encode=(token[length<16?128+length:length<=65535?222:223](encoder,length),encoder.codec.encode);keys.forEach(function(key){encode(encoder,key),encode(encoder,value[key])})}}},"./node_modules/msgpack-lite/lib/write-uint8.js":function(module,exports){for(var constant=exports.uint8=new Array(256),i=0;i<=255;i++)constant[i]=function(type){return function(encoder){var offset=encoder.reserve(1);encoder.buffer[offset]=type}}(i)},"./node_modules/msgpack-lite/node_modules/isarray/index.js":function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},"./node_modules/process/browser.js":function(module,exports){var cachedSetTimeout,cachedClearTimeout,module=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return(cachedSetTimeout=setTimeout)(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length)&&drainQueue()}function drainQueue(){if(!draining){for(var timeout=runTimeout(cleanUpNextTick),len=(draining=!0,queue.length);len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,!function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return(cachedClearTimeout=clearTimeout)(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}module.nextTick=function(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},module.title="browser",module.browser=!0,module.env={},module.argv=[],module.version="",module.versions={},module.on=noop,module.addListener=noop,module.once=noop,module.off=noop,module.removeListener=noop,module.removeAllListeners=noop,module.emit=noop,module.prependListener=noop,module.prependOnceListener=noop,module.listeners=function(name){return[]},module.binding=function(name){throw new Error("process.binding is not supported")},module.cwd=function(){return"/"},module.chdir=function(dir){throw new Error("process.chdir is not supported")},module.umask=function(){return 0}},"./node_modules/punycode/punycode.js":function(module,exports,__webpack_require__){!function(module,global){var punycode,maxInt,base,tMax,skew,damp,regexPunycode,regexNonASCII,regexSeparators,errors,baseMinusTMin,floor,stringFromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="",parts=(1<parts.length&&(result=parts[0]+"@",string=parts[1]),(string=string.replace(regexSeparators,".")).split("."));return result+map(parts,fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)55296<=(value=string.charCodeAt(counter++))&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return 65535<value&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);baseMinusTMin*tMax>>1<delta;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,j,index,oldi,w,k,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72,basic=input.lastIndexOf("-");for(basic<0&&(basic=0),j=0;j<basic;++j)128<=input.charCodeAt(j)&&error("not-basic"),output.push(input.charCodeAt(j));for(index=0<basic?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;inputLength<=index&&error("invalid-input"),codePoint=input.charCodeAt(index++),(base<=(codePoint=codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base)||codePoint>floor((maxInt-i)/w))&&error("overflow"),i+=codePoint*w,!(codePoint<(codePoint=k<=bias?1:bias+tMax<=k?tMax:k-bias));k+=base)w>floor(maxInt/(codePoint=base-codePoint))&&error("overflow"),w*=codePoint;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){for(var delta,handledCPCount,basicLength,m,q,k,currentValue,handledCPCountPlusOne,t,qMinusT,output=[],inputLength=(input=ucs2decode(input)).length,n=128,bias=72,j=delta=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)n<=(currentValue=input[j])&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;!(q<(t=k<=bias?1:bias+tMax<=k?tMax:k-bias));k+=base)output.push(stringFromCharCode(digitToBasic(t+(qMinusT=q-t)%(t=base-t),0))),q=floor(qMinusT/t);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}exports&&exports.nodeType,module&&module.nodeType,(global="object"==typeof global&&global).global!==global&&global.window!==global&&global.self,maxInt=2147483647,tMax=26,skew=38,damp=700,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=(base=36)-1,floor=Math.floor,stringFromCharCode=String.fromCharCode,punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})},toUnicode:function(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}},void 0!==(global=function(){return punycode}.call(exports,__webpack_require__,exports,module))&&(module.exports=global)}.call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module),__webpack_require__("./node_modules/webpack/buildin/global.js"))},"./node_modules/querystring-es3/decode.js":function(module,exports,__webpack_require__){"use strict";module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"==typeof qs&&0!==qs.length){var regexp=/\+/g,sep=(qs=qs.split(sep),1e3),len=(options&&"number"==typeof options.maxKeys&&(sep=options.maxKeys),qs.length);0<sep&&sep<len&&(len=sep);for(var i=0;i<len;++i){var kstr,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),idx=0<=idx?(kstr=x.substr(0,idx),x.substr(idx+1)):(kstr=x,""),x=decodeURIComponent(kstr),idx=decodeURIComponent(idx);!function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}(obj,x)?obj[x]=idx:isArray(obj[x])?obj[x].push(idx):obj[x]=[obj[x],idx]}}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},"./node_modules/querystring-es3/encode.js":function(module,exports,__webpack_require__){"use strict";function stringifyPrimitive(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}}module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=","object"==typeof(obj=null===obj?void 0:obj)?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var key,res=[];for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},"./node_modules/querystring-es3/index.js":function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__("./node_modules/querystring-es3/decode.js"),exports.encode=exports.stringify=__webpack_require__("./node_modules/querystring-es3/encode.js")},"./node_modules/url/url.js":function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__("./node_modules/punycode/punycode.js"),util=__webpack_require__("./node_modules/url/util.js");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){util.isString(obj)&&(obj=urlParse(obj));return obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,exports=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(exports),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=__webpack_require__("./node_modules/querystring-es3/index.js");function urlParse(url,parseQueryString,slashesDenoteHost){var u;return url&&util.isObject(url)&&url instanceof Url?url:((u=new Url).parse(url,parseQueryString,slashesDenoteHost),u)}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),queryIndex=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(queryIndex);uSplit[0]=uSplit[0].replace(/\\/g,"/");var rest=(rest=url=uSplit.join(queryIndex)).trim();if(!slashesDenoteHost&&1===url.split("#").length){uSplit=simplePathPattern.exec(rest);if(uSplit)return this.path=rest,this.href=rest,this.pathname=uSplit[1],uSplit[2]?(this.search=uSplit[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var lowerProto,queryIndex=protocolPattern.exec(rest);if(queryIndex&&(lowerProto=(queryIndex=queryIndex[0]).toLowerCase(),this.protocol=lowerProto,rest=rest.substr(queryIndex.length)),!(slashesDenoteHost||queryIndex||rest.match(/^\/\/[^@\/]+@[^@\/]+/))||!(slashes="//"===rest.substr(0,2))||queryIndex&&hostlessProtocol[queryIndex]||(rest=rest.substr(2),this.slashes=!0),!hostlessProtocol[queryIndex]&&(slashes||queryIndex&&!slashedProtocol[queryIndex])){for(var hostEnd=-1,i=0;i<hostEndingChars.length;i++)-1!==(hec=rest.indexOf(hostEndingChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec);-1!==(url=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd))&&(uSplit=rest.slice(0,url),rest=rest.slice(url+1),this.auth=decodeURIComponent(uSplit));for(var hec,hostEnd=-1,i=0;i<nonHostChars.length;i++)-1!==(hec=rest.indexOf(nonHostChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec);-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";slashesDenoteHost="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!slashesDenoteHost)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)127<part.charCodeAt(j)?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),slashesDenoteHost||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",slashes=this.hostname||"";this.host=slashes+p,this.href+=this.host,slashesDenoteHost&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0])&&(rest="/"+rest)}if(!unsafeProtocol[lowerProto])for(i=0,l=autoEscape.length;i<l;i++){var esc,ae=autoEscape[i];-1!==rest.indexOf(ae)&&((esc=encodeURIComponent(ae))===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc))}queryIndex=rest.indexOf("#"),-1!==queryIndex&&(this.hash=rest.substr(queryIndex),rest=rest.slice(0,queryIndex)),url=rest.indexOf("?");return-1!==url?(this.search=rest.substr(url),this.query=rest.substr(url+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,url)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(p=this.pathname||"",uSplit=this.search||"",this.path=p+uSplit),this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"",protocol=(auth&&(auth=(auth=encodeURIComponent(auth)).replace(/%3A/i,":"),auth+="@"),this.protocol||""),pathname=this.pathname||"",hash=this.hash||"",host=!1,query="",auth=(this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(host+=":"+this.port),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query)),this.search||query&&"?"+query||"");return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host=host||"",hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),auth&&"?"!==auth.charAt(0)&&(auth="?"+auth),protocol+host+(pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}))+(auth=auth.replace("#","%23"))+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){util.isString(relative)&&((rel=new Url).parse(relative,!1,!0),relative=rel);for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""!==relative.href)if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/")}else if(relative.protocol&&relative.protocol!==result.protocol)if(slashedProtocol[relative.protocol]){if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,(result.pathname||result.search)&&(rel=result.pathname||"",s=result.search||"",result.path=rel+s),result.slashes=result.slashes||relative.slashes}else for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}else{var rel=result.pathname&&"/"===result.pathname.charAt(0),s=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),rel=s||rel||result.host&&relative.pathname,removeAllDots=rel,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),rel=rel&&(""===relPath[0]||""===srcPath[0])),s)result.host=(relative.host||""===relative.host?relative:result).host,result.hostname=(relative.hostname||""===relative.hostname?relative:result).hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)(srcPath=srcPath||[]).pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search))return psychotic&&(result.hostname=result.host=srcPath.shift(),authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()),result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname||"")+(result.search||"")),result.href=result.format(),result;if(srcPath.length){for(var last=srcPath.slice(-1)[0],s=(result.host||relative.host||1<srcPath.length)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;0<=i;i--)"."===(last=srcPath[i])?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!rel&&!removeAllDots)for(;up--;)srcPath.unshift("..");!rel||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),s&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var authInHost,removeAllDots=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);psychotic&&(result.hostname=result.host=!removeAllDots&&srcPath.length?srcPath.shift():"",authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()),(rel=rel||result.host&&srcPath.length)&&!removeAllDots&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname||"")+(result.search||"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes}else result.pathname=null,result.search?result.path="/"+result.search:result.path=null}return result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(":"!==(port=port[0])&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},"./node_modules/url/util.js":function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},"./node_modules/webpack/buildin/global.js":function(module,exports){var g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g},"./node_modules/webpack/buildin/module.js":function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},"./src/js/app.js":function(module,exports,__webpack_require__){"use strict";function bConnect(token,bothing){let o=token&&new WebSocket(tmpAddress+"&token="+encodeURIComponent(token));o.binaryType="arraybuffer",o.botthing=bothing,o.weapons=[0],o.fixItems=[0,3,6,10],o.waitHeal=!1,o.testTickCount=0,o.lessmove=void 0,o.mill={x:0,y:0},o.old={x:0,y:0},o.skins=[0],o.tails=[0],o.millCount=0,o.score=0,o.enemyCount=[],o.nearDist=[],o.nearAim=0,o.inTrap=!1,o.trapData={sid:void 0,x:void 0,y:void 0},o.waita=0,o.sTime=0,o.sCount=0,o.health=100,o.owner=!1;function wsSend(ms){o.send(new Uint8Array(Array.from(window.msgpack.encode(ms))))}function objPlc(id,ang){o.stop,wsSend(["5",[o.fixItems[id]]]),wsSend(["c",[1,ang]]),wsSend(["5",[o.weapon,1]])}function rad(ang){return ang*(Math.PI/180)}function objectPlace(a,b){return Math.atan2(a.y-b.y,a.x-b.x)}function objectDist(a,b){return Math.hypot(a.y-b.y,a.x-b.x)}function storeEquip(id,index){wsSend(["13c",[0,id,index]])}function storeBuy(id,index){wsSend(["13c",[1,id,index]])}function buyEquip(id,index){0==index?o.skins[id]?o.hat!=id&&storeEquip(id,0):(40==id&&15e3<=o.score||53==id&&1e4<=o.score||12==id&&6e3<=o.score||6==id&&4e3<=o.score||31==id&&2500<=o.score||15==id&&600<=o.score)&&storeBuy(id,0):1==index&&(o.tails[id]?o.accessory!=id&&storeEquip(id,1):21==id&&15e3<=o.score&&storeBuy(id,1))}function botSpawn(){o.fixItems=[0,3,6,10],o.weapons=[0],o.age=0,o.upgraded=0,o.score=0,wsSend(["sp",[{name:"aaa22",moofoll:1,skin:10==Math.floor(11*Math.random())?"constructor":Math.floor(11*Math.random())}]]),wsSend(["7",[1]]),o.randomAng=Math.random()*(2*Math.PI),"sandbox.moomoo.io"!=window.location.hostname&&(objPlc(3,o.randomAng),objPlc(3,o.randomAng+Math.PI)),setTimeout(()=>{wsSend(["c",[1]]),wsSend(["5",[o.weapons[0],!0]])},1e3)}function sendUpgrade(index){wsSend(["6",[index]])}o.onmessage=function(ms){ms=window.msgpack.decode(new Uint8Array(ms.data));let data;1<ms.length?(data=[ms[0],...ms[1]])[1]instanceof Array&&(data=data):data=ms;var a,b,timeHit;data[0];if(data){if("1"==data[0]&&null==o.id&&(o.id=data[1]),"st"==data[0]&&o&&(o.clan=data[1],o.owner=data[2]),"33"==data[0]){o.enemyCount=[],o.nearDist=[],o.nearAim=0,o.testTickCount++;for(let i=0;i<data[1].length/13;i++){var playerInfo=data[1].slice(13*i,13*i+13);playerInfo[0]==o.id&&(o.id=playerInfo[0],o.x=playerInfo[1],o.y=playerInfo[2],o.dir=playerInfo[3],o.object=playerInfo[4],o.weapon=playerInfo[5],o.clan=playerInfo[7],o.isLeader=playerInfo[8],o.hat=playerInfo[9],o.accessory=playerInfo[10],o.isSkull=playerInfo[11]),playerInfo[0]==o.id||playerInfo[7]&&playerInfo[7]==o.clan||o.enemyCount.push(data[1].slice(13*i,13*i+13)),o.nearAim2=window.player?Math.atan2(window.player.y-o.y,window.player.x-o.x):o.dir,o.nearAim=window.player?Math.atan2(o.y-window.nearDist.y,o.x-window.nearDist.x):o.dir,o.testTickCount%9==0&&(tmpClan="aaa22a",o.clan||wsSend(["10",[tmpClan]])),objectDist(o.trapData,o)<=60&&o.trapData.id!=o.id&&o.trapData.id!=o.clan?(o.inTrap=!0,o.trapAim=objectPlace(o.trapData,o),o.testTickCount%3==0&&wsSend(["2",[o.trapAim]])):o.inTrap=!1,o.inTrap?buyEquip(40,0):o.y<=2400?buyEquip(15,0):6838<=o.y&&o.y<=7562?buyEquip(31,0):buyEquip(6,0),buyEquip(21,1),o.testTickCount,o.inTrap||(objectDist(o,window.player)<=3e3?window.nearDist&&tmpObjDist(window.nearDist,window.player)<=600?o.testTickCount%4==0&&o.lessmove!=(o.waita,o.nearAim+Math.PI)&&(o.lessmove=(o.waita,o.nearAim+Math.PI),wsSend(["33",[o.lessmove]]),wsSend(["2",[o.lessmove]])):o.testTickCount%4==0&&o.lessmove!=(3<o.waita?o.nearAim2+Math.PI:o.nearAim2)&&(o.lessmove=3<o.waita?o.nearAim2+Math.PI:o.nearAim2,wsSend(["33",[o.lessmove]]),wsSend(["2",[o.lessmove]])):(o.testTickCount%46==0&&(o.randomAng=Math.random()*(2*Math.PI),o.lessmove!=o.randomAng)&&(o.lessmove=o.randomAng,wsSend(["33",[o.randomAng]]),wsSend(["2",[o.randomAng]])),!(o.millCount<=96)||6838<=o.y&&o.y<=7562||"sandbox.moomoo.io"!=window.location.hostname||o.oldy==o.y&&o.oldx==o.x||(94<objectDist(o.mill,o)&&(objPlc(3,(playerInfo=objectPlace(o.old,o))+rad(75.2)),objPlc(3,playerInfo-rad(75.2)),objPlc(3,playerInfo),o.mill.x=o.x,o.mill.y=o.y),o.old.x=o.x,o.old.y=o.y)))}}if("5"==data[0])for(var i=0;i<data[1].length/3;i++){var boardInfo=data[1].slice(3*i,3*i+3);boardInfo[0]==o.id&&(o.score=boardInfo[2])}if("11"==data[0]&&botSpawn(),"12"==data[0])if(o.trapData.sid==data[1]&&(o.trapData={sid:void 0,x:void 0,y:void 0},o.inTrap=!1),o.waita++,setTimeout(()=>{o.waita--},1e3),window.nearDist&&260<objectDist(o,window.nearDist))for(let i=0;i<2*Math.PI;i+=Math.PI/1.5)objPlc(4,o.nearAim+i);else if(window.nearDist&&objectDist(o,window.nearDist)<=260)for(let i=0;i<2*Math.PI;i+=Math.PI/1.5)objPlc(2,o.nearAim+i);if("14"==data[0]&&3==data[1]&&(o.millCount=data[2]),"15"==data[0]&&(o.age=data[3]),"16"==data[0]&&0<data[1]&&(0==o.upgraded?sendUpgrade(3):1==o.upgraded?sendUpgrade(17):2==o.upgraded?sendUpgrade(31):3==o.upgraded?sendUpgrade(27):4==o.upgraded?sendUpgrade(10):5==o.upgraded?sendUpgrade(38):6==o.upgraded?sendUpgrade(4):7==o.upgraded&&sendUpgrade(25),o.upgraded++),"6"==data[0])for(let i=0;i<data[1].length/8;i++){var Obj=data[1].slice(8*i,8*i+8);15==Obj[6]&&(a=Obj,b=o,Math.hypot(a[2]-b.y,a[1]-b.x)<=90)&&Obj[7]!=o.id&&Obj[7]!=o.clan&&(o.inTrap=!0,o.trapData={sid:Obj[0],x:Obj[1],y:Obj[2],id:Obj[7]})}"17"==data[0]&&data[1]&&(data[2]?o.weapons=data[1]:o.fixItems=data[1]),"h"==data[0]&&data[1]==o.id&&(ms=o.health-data[2],o.health-data[2]<0?o.sTime&&(timeHit=Date.now()-o.sTime,o.sTime=0,timeHit<=120?o.sCount++:o.sCount=Math.max(0,o.sCount-2)):o.sTime=Date.now(),ms>(6==o.hat?45:9)&&o.sCount<4?objPlc(0):setTimeout(()=>{objPlc(0)},150),o.health=data[2]),"us"==data[0]&&(data[3]?data[1]?o.accessory=data[2]:o.tails[data[2]]=1:data[1]?o.hat=data[2]:o.skins[data[2]]=1)}},o.onopen=function(){isConnected=!0,botSpawn()},o.onclose=function(){isConnected=!1}}window.loadedScript=!0;var isProd="127.0.0.1"!==location.hostname&&!location.hostname.startsWith("192.168."),io=(__webpack_require__("./src/js/libs/modernizr.js"),__webpack_require__("./src/js/libs/io-client.js")),UTILS=__webpack_require__("./src/js/libs/utils.js"),animText=__webpack_require__("./src/js/libs/animText.js"),config=__webpack_require__("./src/js/config.js"),GameObject=__webpack_require__("./src/js/data/gameObject.js"),items=__webpack_require__("./src/js/data/items.js"),ObjectManager=(__webpack_require__("./src/js/data/mapManager.js"),__webpack_require__("./src/js/data/objectManager.js")),Player=__webpack_require__("./src/js/data/player.js"),store=__webpack_require__("./src/js/data/store.js"),Projectile=__webpack_require__("./src/js/data/projectile.js"),ProjectileManager=__webpack_require__("./src/js/data/projectileManager.js"),SoundManager=__webpack_require__("./src/js/libs/soundManager.js").obj,textManager=new animText.TextManager,vultrClient=new(__webpack_require__("./vultr/VultrClient.js"))("moomoo.io",3e3,config.maxPlayers,5,!1);vultrClient.debugLog=!1;var startedConnecting=!1;function connectSocketIfReady(){didLoad&&captchaReady&&(startedConnecting=!0,isProd?window.grecaptcha.execute("6LevKusUAAAAAAFknhlV8sPtXAk5Z5dGP5T2FYIZ",{action:"homepage"}).then(function(token){connectSocket(token)}):connectSocket(null))}function connectSocket(token){vultrClient.start(function(address,port,gameIndex){var protocol=isProd?"wss":"ws",wsAddress=protocol+"://"+address+":8008/?gameIndex="+gameIndex;token&&(wsAddress+="&token="+encodeURIComponent(token)),tmpAddress=protocol+"://"+address+":8008/?gameIndex="+gameIndex,io.connect(wsAddress,function(error){if(setInterval(()=>{minPacket=Math.max(0,minPacket-2700)},6e4),setInterval(()=>{secPacket=Math.max(0,secPacket-50)},1e3),pingSocket(),setInterval(()=>pingSocket(),500),error)disconnect(error);else{enterGameButton.onclick=UTILS.checkTrusted(function(){var validGame,validTime;validGame=1<++preAdGameCount,validTime=Date.now()-preAdLastShowTime>preAdInterval,(validGame&&validTime?(preAdLastShowTime=Date.now(),showPreAd):enterGame)()}),UTILS.hookTouchEvents(enterGameButton),promoImageButton.onclick=UTILS.checkTrusted(function(){openLink("https://krunker.io/?play=SquidGame_KB")}),UTILS.hookTouchEvents(promoImageButton),joinPartyButton.onclick=UTILS.checkTrusted(function(){setTimeout(function(){var currentKey;currentKey=serverBrowser.value,(currentKey=prompt("party key",currentKey))&&(window.onbeforeunload=void 0,window.location.href="/?server="+currentKey)},10)}),UTILS.hookTouchEvents(joinPartyButton),settingsButton.onclick=UTILS.checkTrusted(function(){guideCard.classList.contains("showing")?(guideCard.classList.remove("showing"),settingsButtonTitle.innerText="Settings"):(guideCard.classList.add("showing"),settingsButtonTitle.innerText="Close")}),UTILS.hookTouchEvents(settingsButton),allianceButton.onclick=UTILS.checkTrusted(function(){resetMoveDir(),"block"!=allianceMenu.style.display?showAllianceMenu():allianceMenu.style.display="none"}),UTILS.hookTouchEvents(allianceButton),storeButton.onclick=UTILS.checkTrusted(function(){"block"!=storeMenu.style.display?(storeMenu.style.display="block",allianceMenu.style.display="none",closeChat(),generateStoreList()):storeMenu.style.display="none"}),UTILS.hookTouchEvents(storeButton),chatButton.onclick=UTILS.checkTrusted(function(){toggleChat()}),UTILS.hookTouchEvents(chatButton),mapDisplay.onclick=UTILS.checkTrusted(function(){sendMapPing()}),UTILS.hookTouchEvents(mapDisplay),function(){for(var i=0;i<icons.length;++i){var tmpSprite=new Image;tmpSprite.onload=function(){this.isLoaded=!0},tmpSprite.src=".././img/icons/"+icons[i]+".png",iconSprites[icons[i]]=tmpSprite}}(),loadingText.style.display="none",menuCardHolder.style.display="block",nameInput.value=getSavedVal("moo_name")||"";error=getSavedVal("native_resolution");setUseNativeResolution(error?"true"==error:"undefined"!=typeof cordova),showPing="true"==getSavedVal("show_ping"),pingDisplay.hidden=!showPing,getSavedVal("moo_moosic"),setInterval(function(){window.cordova&&(document.getElementById("downloadButtonContainer").classList.add("cordova"),document.getElementById("mobileDownloadButtonContainer").classList.add("cordova"))},1e3),updateSkinColorPicker(),UTILS.removeAllChildren(actionBar);for(var i=0;i<items.weapons.length+items.list.length;++i)!function(i){UTILS.generateElement({id:"actionBarItem"+i,class:"actionBarItem",style:"display:none",onmouseout:function(){showItemInfo()},parent:actionBar})}(i);for(i=0;i<items.list.length+items.weapons.length;++i)!function(i){var tmpSprite,tmpScale,tmpUnit,tmpCanvas=document.createElement("canvas"),tmpContext=(tmpCanvas.width=tmpCanvas.height=66,tmpCanvas.getContext("2d"));tmpContext.translate(tmpCanvas.width/2,tmpCanvas.height/2),tmpContext.imageSmoothingEnabled=!1,tmpContext.webkitImageSmoothingEnabled=!1,tmpContext.mozImageSmoothingEnabled=!1,items.weapons[i]?(tmpContext.rotate(Math.PI/4+Math.PI),tmpSprite=new Image,(toolSprites[items.weapons[i].src]=tmpSprite).onload=function(){this.isLoaded=!0;var tmpPad=1/(this.height/this.width),tmpMlt=items.weapons[i].iPad||1;tmpContext.drawImage(this,-(tmpCanvas.width*tmpMlt*config.iconPad)*tmpPad/2,-(tmpCanvas.height*tmpMlt*config.iconPad)/2,tmpCanvas.width*tmpMlt*tmpPad*config.iconPad,tmpCanvas.height*tmpMlt*config.iconPad),tmpContext.fillStyle="rgba(0, 0, 70, 0.1)",tmpContext.globalCompositeOperation="source-atop",tmpContext.fillRect(-tmpCanvas.width/2,-tmpCanvas.height/2,tmpCanvas.width,tmpCanvas.height),document.getElementById("actionBarItem"+i).style.backgroundImage="url("+tmpCanvas.toDataURL()+")"},tmpSprite.src=".././img/weapons/"+items.weapons[i].src+".png",(tmpUnit=document.getElementById("actionBarItem"+i)).onmouseover=UTILS.checkTrusted(function(){showItemInfo(items.weapons[i],!0)}),tmpUnit.onclick=UTILS.checkTrusted(function(){selectToBuild(i,!0)})):(tmpSprite=getItemSprite(items.list[i-items.weapons.length],!0),tmpScale=Math.min(tmpCanvas.width-config.iconPadding,tmpSprite.width),tmpContext.globalAlpha=1,tmpContext.drawImage(tmpSprite,-tmpScale/2,-tmpScale/2,tmpScale,tmpScale),tmpContext.fillStyle="rgba(0, 0, 70, 0.1)",tmpContext.globalCompositeOperation="source-atop",tmpContext.fillRect(-tmpScale/2,-tmpScale/2,tmpScale,tmpScale),document.getElementById("actionBarItem"+i).style.backgroundImage="url("+tmpCanvas.toDataURL()+")",(tmpUnit=document.getElementById("actionBarItem"+i)).onmouseover=UTILS.checkTrusted(function(){showItemInfo(items.list[i-items.weapons.length])}),tmpUnit.onclick=UTILS.checkTrusted(function(){selectToBuild(i-items.weapons.length)})),UTILS.hookTouchEvents(tmpUnit)}(i);nameInput.ontouchstart=UTILS.checkTrusted(function(e){e.preventDefault();var newValue=prompt("enter name",e.currentTarget.value);e.currentTarget.value=newValue.slice(0,15)}),nativeResolutionCheckbox.checked=useNativeResolution,nativeResolutionCheckbox.onchange=UTILS.checkTrusted(function(e){setUseNativeResolution(e.target.checked)}),showPingCheckbox.checked=showPing,showPingCheckbox.onchange=UTILS.checkTrusted(function(e){showPing=showPingCheckbox.checked,pingDisplay.hidden=!showPing,saveVal("show_ping",showPing?"true":"false")})}},{id:setInitData,d:disconnect,1:setupGame,2:addPlayer,4:removePlayer,33:updatePlayers,5:updateLeaderboard,6:loadGameObject,a:loadAI,aa:animateAI,7:gatherAnimation,8:wiggleGameObject,sp:shootTurret,9:updatePlayerValue,h:updateHealth,11:killPlayer,12:killObject,13:killObjects,14:updateItemCounts,15:updateAge,16:updateUpgrades,17:updateItems,18:addProjectile,19:remProjectile,20:serverShutdownNotice,ac:addAlliance,ad:deleteAlliance,an:allianceNotification,st:setPlayerTeam,sa:setAlliancePlayers,us:updateStoreItems,ch:receiveChat,mm:updateMinimap,t:showText,p:pingMap,pp:pingSocketResponse}),setupServerStatus(),setTimeout(()=>updateServerList(),3e3)},function(error){console.error("Vultr error:",error),disconnect("disconnected")})}var Sound=new SoundManager(config,UTILS);var canStore,mathPI=Math.PI,mathPI2=2*mathPI;function saveVal(name,val){canStore&&localStorage.setItem(name,val)}function getSavedVal(name){return canStore?localStorage.getItem(name):null}Math.lerpAngle=function(value1,value2,amount){var difference=Math.abs(value2-value1),difference=(mathPI<difference&&(value2<value1?value2+=mathPI2:value1+=mathPI2),value2+(value1-value2)*amount);return 0<=difference&&difference<=mathPI2?difference:difference%mathPI2},CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){return(r=h<2*(r=w<2*r?w/2:r)?h/2:r)<0&&(r=0),this.beginPath(),this.moveTo(x+r,y),this.arcTo(x+w,y,x+w,y+h,r),this.arcTo(x+w,y+h,x,y+h,r),this.arcTo(x,y+h,x,y,r),this.arcTo(x,y,x+w,y,r),this.closePath(),this},"undefined"!=typeof Storage&&(canStore=!0);var useNativeResolution,showPing,moofoll=getSavedVal("moofoll");var delta,now,lastSent,attackState,player,playerSID,tmpObj,camX,camY,tmpDir,screenWidth,screenHeight,pixelDensity=1,lastUpdate=Date.now(),ais=[],players=[],alliances=[],gameObjects=[],projectiles=[],projectileManager=new ProjectileManager(Projectile,projectiles,players,ais,objectManager,items,config,UTILS),animText=__webpack_require__("./src/js/data/aiManager.js"),SoundManager=__webpack_require__("./src/js/data/ai.js"),aiManager=new animText(ais,SoundManager,players,items,null,config,UTILS),waterMult=1,waterPlus=0,mouseX=0,mouseY=0,controllingTouch={id:-1,startX:0,startY:0,currentX:0,currentY:0},attackingTouch={id:-1,startX:0,startY:0,currentX:0,currentY:0},skinColor=0,maxScreenWidth=config.maxScreenWidth,maxScreenHeight=config.maxScreenHeight,inGame=!1,mainMenu=(document.getElementById("ad-container"),document.getElementById("mainMenu")),enterGameButton=document.getElementById("enterGame"),promoImageButton=document.getElementById("promoImg"),partyButton=document.getElementById("partyButton"),joinPartyButton=document.getElementById("joinPartyButton"),settingsButton=document.getElementById("settingsButton"),settingsButtonTitle=settingsButton.getElementsByTagName("span")[0],allianceButton=document.getElementById("allianceButton"),storeButton=document.getElementById("storeButton"),chatButton=document.getElementById("chatButton"),gameCanvas=document.getElementById("gameCanvas"),mainContext=gameCanvas.getContext("2d"),serverBrowser=document.getElementById("serverBrowser"),nativeResolutionCheckbox=document.getElementById("nativeResolution"),showPingCheckbox=document.getElementById("showPing"),pingDisplay=(document.getElementById("playMusic"),document.getElementById("pingDisplay")),shutdownDisplay=document.getElementById("shutdownDisplay"),menuCardHolder=document.getElementById("menuCardHolder"),guideCard=document.getElementById("guideCard"),loadingText=document.getElementById("loadingText"),gameUI=document.getElementById("gameUI"),actionBar=document.getElementById("actionBar"),scoreDisplay=document.getElementById("scoreDisplay"),foodDisplay=document.getElementById("foodDisplay"),woodDisplay=document.getElementById("woodDisplay"),stoneDisplay=document.getElementById("stoneDisplay"),killCounter=document.getElementById("killCounter"),leaderboardData=document.getElementById("leaderboardData"),nameInput=document.getElementById("nameInput"),itemInfoHolder=document.getElementById("itemInfoHolder"),ageText=document.getElementById("ageText"),ageBarBody=document.getElementById("ageBarBody"),upgradeHolder=document.getElementById("upgradeHolder"),upgradeCounter=document.getElementById("upgradeCounter"),allianceMenu=document.getElementById("allianceMenu"),allianceHolder=document.getElementById("allianceHolder"),allianceManager=document.getElementById("allianceManager"),mapDisplay=document.getElementById("mapDisplay"),diedText=document.getElementById("diedText"),skinColorHolder=document.getElementById("skinColorHolder"),mapContext=mapDisplay.getContext("2d"),storeMenu=(mapDisplay.width=300,mapDisplay.height=300,document.getElementById("storeMenu")),storeHolder=document.getElementById("storeHolder"),noticationDisplay=document.getElementById("noticationDisplay"),hats=store.hats,accessories=store.accessories,objectManager=new ObjectManager(GameObject,gameObjects,UTILS,config),outlineColor="#525252",darkOutlineColor="#3d3f42",outlineWidth=Math.PI;function setInitData(data){alliances=data.teams}var ProjectileManager=document.getElementById("featuredYoutube"),Projectile=[{name:"InsanityMon",link:"https://www.youtube.com/channel/UCuAXFkgsw1L7xaCfnd5JJOw"},{name:"Skid",link:"https://www.youtube.com/@King_DG"},{name:"Shame",link:"https://www.youtube.com/@user-ne2vz4gc3j"},{name:"Dog",link:"https://www.youtube.com/@Dream2947YT"},{name:"Ae's dog",link:"https://www.youtube.com/@Zyenith"},{name:"Pro",link:"https://www.youtube.com/@literallynuro"},{name:"Fan",link:"https://www.youtube.com/@insspixelzyx4360"},{name:"Balwan",link:"https://www.youtube.com/@SabrinaSophina"},{name:"Gay",link:"https://www.youtube.com/@bevis2910"},{name:"Pls",link:"https://www.youtube.com/@zechy256"},{name:"CowGamer69",link:"https://www.youtube.com/@sopeCow"},{name:"Send Mod",link:"https://www.youtube.com/@waves440"},{name:"Bad",link:"https://www.youtube.com/@Xiaokai.2"},{name:"Ohio",link:"https://www.youtube.com/@squewe"},{name:"meee mega boob :o",link:"https://www.youtube.com/@duckman7118"},{name:"be mega boob",link:"https://www.youtube.com/@memeganoob"},{name:"Ass",link:"https://www.youtube.com/@content7054"}],__webpack_require__=Projectile[UTILS.randInt(0,Projectile.length-1)],inWindow=(ProjectileManager.innerHTML="<a target='_blank' class='ytLink' href='"+__webpack_require__.link+"'><i class='material-icons' style='vertical-align: top;'>&#xE064;</i> "+__webpack_require__.name+"</a>",!0),didLoad=!1,captchaReady=!1;function disconnect(reason){io.close(),showLoadingText(reason)}function showLoadingText(text){mainMenu.style.display="block",gameUI.style.display="none",menuCardHolder.style.display="none",diedText.style.display="none",loadingText.style.display="block",loadingText.innerHTML=text+"<a href='javascript:window.location.href=window.location.href' class='ytLink'>reload</a>"}window.onblur=function(){inWindow=!1},window.onfocus=function(){inWindow=!0,player&&player.alive&&resetMoveDir()},window.onload=function(){didLoad=!0,connectSocketIfReady(),setTimeout(function(){startedConnecting||window.location.reload()},2e4)},window.captchaCallback=function(){captchaReady=!0,connectSocketIfReady()},gameCanvas.oncontextmenu=function(){return!1};var gamesPerServer=1;function setupServerStatus(){var region,altServerText,altServerURL,tmpHTML="",overallTotal=0;for(region in vultrClient.servers){for(var serverList=vultrClient.servers[region],totalPlayers=0,i=0;i<serverList.length;i++)for(var j=0;j<serverList[i].games.length;j++)totalPlayers+=serverList[i].games[j].playerCount;overallTotal+=totalPlayers;var regionName=vultrClient.regionInfo[region].name;tmpHTML+="<option disabled>"+regionName+" - "+totalPlayers+" players</option>";for(var serverIndex=0;serverIndex<serverList.length;serverIndex++)for(var server=serverList[serverIndex],gameIndex=0;gameIndex<server.games.length;gameIndex++){var game=server.games[gameIndex],adjustedIndex=server.index*gamesPerServer+gameIndex+1,isSelected=vultrClient.server&&vultrClient.server.region===server.region&&vultrClient.server.index===server.index&&vultrClient.gameIndex==gameIndex,adjustedIndex=regionName+" "+adjustedIndex+" ["+Math.min(game.playerCount,config.maxPlayers)+"/"+config.maxPlayers+"]",game=vultrClient.stripRegion(region)+":"+serverIndex+":"+gameIndex,isSelected=(isSelected&&(partyButton.getElementsByTagName("span")[0].innerText=game),isSelected?"selected":"");tmpHTML+="<option value='"+game+"' "+isSelected+">"+adjustedIndex+"</option>"}tmpHTML+="<option disabled></option>",0}serverBrowser.innerHTML=tmpHTML+="<option disabled>All Servers - "+overallTotal+" players</option>",altServerURL="sandbox.moomoo.io"==location.hostname?(altServerText="Back to MooMoo","//moomoo.io/"):(altServerText="Try the sandbox","//sandbox.moomoo.io/"),document.getElementById("altServer").innerHTML="<a href='"+altServerURL+"'>"+altServerText+"<i class='material-icons' style='font-size:10px;vertical-align:middle'>arrow_forward_ios</i></a>"}function updateServerList(){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){4==this.readyState&&(200==this.status?(window.vultr=JSON.parse(this.responseText),vultrClient.processServers(vultr.servers),setupServerStatus()):console.error("Failed to load server data with status code:",this.status))},xmlhttp.open("GET","/serverData",!0),xmlhttp.send()}serverBrowser.addEventListener("change",UTILS.checkTrusted(function(){var parts=serverBrowser.value.split(":");vultrClient.switchServer(parts[0],parts[1],parts[2])}));document.getElementById("pre-content-container");var preAdInterval=3e5,preAdLastShowTime=0,preAdGameCount=0;function showPreAd(){if(!window.adsbygoogle)return console.log("Failed to load video ad API");window.adsbygoogle.push({type:"next",adBreakDone:()=>{enterGame()}})}function showItemInfo(item,isWeapon,isStoreItem){if(player&&item){if(UTILS.removeAllChildren(itemInfoHolder),itemInfoHolder.classList.add("visible"),UTILS.generateElement({id:"itemInfoName",text:UTILS.capitalizeFirst(item.name),parent:itemInfoHolder}),UTILS.generateElement({id:"itemInfoDesc",text:item.desc,parent:itemInfoHolder}),!isStoreItem)if(isWeapon)UTILS.generateElement({class:"itemInfoReq",text:item.type?"secondary":"primary",parent:itemInfoHolder});else{for(var i=0;i<item.req.length;i+=2)UTILS.generateElement({class:"itemInfoReq",html:item.req[i]+"<span class='itemInfoReqVal'> x"+item.req[i+1]+"</span>",parent:itemInfoHolder});item.group.limit&&UTILS.generateElement({class:"itemInfoLmt",text:(player.itemCounts[item.group.id]||0)+"/"+item.group.limit,parent:itemInfoHolder})}}else itemInfoHolder.classList.remove("visible")}window.adsbygoogle&&adsbygoogle.push({preloadAdBreaks:"on"}),window.showPreAd=showPreAd;var lastDeath,minimapData,mapMarker,allianceNotifications=[],alliancePlayers=[];function allianceNotification(sid,name){allianceNotifications.push({sid:sid,name:name}),updateNotifications()}function updateNotifications(){var tmpN;allianceNotifications[0]?(tmpN=allianceNotifications[0],UTILS.removeAllChildren(noticationDisplay),noticationDisplay.style.display="block",UTILS.generateElement({class:"notificationText",text:tmpN.name,parent:noticationDisplay}),UTILS.generateElement({class:"notifButton",html:"<i class='material-icons' style='font-size:28px;color:#cc5151;'>&#xE14C;</i>",parent:noticationDisplay,onclick:function(){aJoinReq(0)},hookTouch:!0}),UTILS.generateElement({class:"notifButton",html:"<i class='material-icons' style='font-size:28px;color:#8ecc51;'>&#xE876;</i>",parent:noticationDisplay,onclick:function(){aJoinReq(1)},hookTouch:!0})):noticationDisplay.style.display="none"}function addAlliance(data){alliances.push(data),"block"==allianceMenu.style.display&&showAllianceMenu()}function setPlayerTeam(team,isOwner){player&&(player.team=team,player.isOwner=isOwner,"block"==allianceMenu.style.display)&&showAllianceMenu()}function setAlliancePlayers(data){alliancePlayers=data,"block"==allianceMenu.style.display&&showAllianceMenu()}function deleteAlliance(sid){for(var i=alliances.length-1;0<=i;i--)alliances[i].sid==sid&&alliances.splice(i,1);"block"==allianceMenu.style.display&&showAllianceMenu()}function showAllianceMenu(){if(player&&player.alive){if(closeChat(),storeMenu.style.display="none",allianceMenu.style.display="block",UTILS.removeAllChildren(allianceHolder),player.team)for(var i=0;i<alliancePlayers.length;i+=2)!function(i){var tmp=UTILS.generateElement({class:"allianceItem",style:"color:"+(alliancePlayers[i]==player.sid?"#fff":"rgba(255,255,255,0.6)"),text:alliancePlayers[i+1],parent:allianceHolder});player.isOwner&&alliancePlayers[i]!=player.sid&&UTILS.generateElement({class:"joinAlBtn",text:"Kick",onclick:function(){kickFromClan(alliancePlayers[i])},hookTouch:!0,parent:tmp})}(i);else if(alliances.length)for(i=0;i<alliances.length;++i)!function(i){var tmp=UTILS.generateElement({class:"allianceItem",style:"color:"+(alliances[i].sid==player.team?"#fff":"rgba(255,255,255,0.6)"),text:alliances[i].sid,parent:allianceHolder});UTILS.generateElement({class:"joinAlBtn",text:"Join",onclick:function(){sendJoin(i)},hookTouch:!0,parent:tmp})}(i);else UTILS.generateElement({class:"allianceItem",text:"No Tribes Yet",parent:allianceHolder});UTILS.removeAllChildren(allianceManager),player.team?UTILS.generateElement({class:"allianceButtonM",style:"width: 360px",text:player.isOwner?"Delete Tribe":"Leave Tribe",onclick:function(){leaveAlliance()},hookTouch:!0,parent:allianceManager}):(UTILS.generateElement({tag:"input",type:"text",id:"allianceInput",maxLength:7,placeholder:"unique name",ontouchstart:function(ev){ev.preventDefault();var newValue=prompt("unique name",ev.currentTarget.value);ev.currentTarget.value=newValue.slice(0,7)},parent:allianceManager}),UTILS.generateElement({tag:"div",class:"allianceButtonM",style:"width: 140px;",text:"Create",onclick:function(){createAlliance()},hookTouch:!0,parent:allianceManager}))}}function aJoinReq(join){io.send("11",allianceNotifications[0].sid,join),allianceNotifications.splice(0,1),updateNotifications()}function kickFromClan(sid){io.send("12",sid)}function sendJoin(index){io.send("10",alliances[index].sid)}function createAlliance(){io.send("8",document.getElementById("allianceInput").value)}function leaveAlliance(){allianceNotifications=[],updateNotifications(),io.send("9")}var tmpPing,tmpObjPing,mapPings=[],objMapPings=[];function MapPing(){this.init=function(x,y){this.scale=0,this.x=x,this.y=y,this.active=!0},this.update=function(ctxt,delta){this.active&&(this.scale+=.05*delta,this.scale>=config.mapPingScale?this.active=!1:(ctxt.globalAlpha=1-Math.max(0,this.scale/config.mapPingScale),ctxt.beginPath(),ctxt.arc(this.x/config.mapScale*mapDisplay.width,this.y/config.mapScale*mapDisplay.width,this.scale,0,2*Math.PI),ctxt.stroke()))}}function pingMap(x,y){for(var i=0;i<mapPings.length;++i)if(!mapPings[i].active){tmpPing=mapPings[i];break}tmpPing||(tmpPing=new MapPing,mapPings.push(tmpPing)),tmpPing.init(x,y)}function updateMinimap(data){minimapData=data}var currentStoreIndex=0;function updateStoreItems(type,id,index){index?type?player.tailIndex=id:player.tails[id]=1:type?player.skinIndex=id:player.skins[id]=1,"block"==storeMenu.style.display&&generateStoreList()}function generateStoreList(){if(player){UTILS.removeAllChildren(storeHolder);for(var index=currentStoreIndex,tmpArray=index?accessories:hats,i=0;i<tmpArray.length;++i)tmpArray[i].dontSell||!function(i){var tmp=UTILS.generateElement({id:"storeDisplay"+i,class:"storeItem",onmouseout:function(){showItemInfo()},onmouseover:function(){showItemInfo(tmpArray[i],!1,!0)},parent:storeHolder});UTILS.hookTouchEvents(tmp,!0),UTILS.generateElement({tag:"img",class:"hatPreview",src:"../img/"+(index?"accessories/access_":"hats/hat_")+tmpArray[i].id+(tmpArray[i].topSprite?"_p":"")+".png",parent:tmp}),UTILS.generateElement({tag:"span",text:tmpArray[i].name,parent:tmp}),(index?player.tails:player.skins)[tmpArray[i].id]?(index?player.tailIndex:player.skinIndex)==tmpArray[i].id?UTILS.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Unequip",onclick:function(){storeEquip(0,index)},hookTouch:!0,parent:tmp}):UTILS.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Equip",onclick:function(){storeEquip(tmpArray[i].id,index)},hookTouch:!0,parent:tmp}):(UTILS.generateElement({class:"joinAlBtn",style:"margin-top: 5px",text:"Buy",onclick:function(){storeBuy(tmpArray[i].id,index)},hookTouch:!0,parent:tmp}),UTILS.generateElement({tag:"span",class:"itemPrice",text:tmpArray[i].price,parent:tmp}))}(i)}}function storeEquip(id,index){io.send("13c",0,id,index)}function storeBuy(id,index){io.send("13c",1,id,index)}function buyEquip(id,index,isHat){player.alive&&(0==index?player.skins[id]?isHat&&player.skinIndex==id||io.send("13c",0,id,0):(isHat?0!=player.skinIndex&&io.send("13c",0,0,0):io.send("13c",0,50,0),io.send("13c",1,id,0)):1==index&&(player.tails[id]?isHat&&player.tailIndex==id||io.send("13c",0,id,1):(isHat&&0==player.tailIndex||io.send("13c",0,0,1),io.send("13c",1,id,1))))}function hideAllWindows(){storeMenu.style.display="none",allianceMenu.style.display="none",closeChat()}function updateItems(data,wpn){data&&(wpn?player.weapons=data:player.items=data);for(var i=0;i<items.list.length;++i){var tmpI=items.weapons.length+i;document.getElementById("actionBarItem"+tmpI).style.display=0<=player.items.indexOf(items.list[i].id)?"inline-block":"none"}for(i=0;i<items.weapons.length;++i)document.getElementById("actionBarItem"+i).style.display=player.weapons[items.weapons[i].type]==items.weapons[i].id?"inline-block":"none"}function setUseNativeResolution(useNative){pixelDensity=(useNativeResolution=useNative)&&window.devicePixelRatio||1,saveVal("native_resolution",(nativeResolutionCheckbox.checked=useNative).toString()),resize()}let selectColorIndex=0;function updateSkinColorPicker(){for(var tmpHTML="",i=0;i<config.skinColors.length;++i)i==selectColorIndex?tmpHTML+="<div class='skinColorItem activeSkin' style='background-color:"+config.skinColors[i]+"' onclick='selectSkinColor("+i+")'></div>":tmpHTML+="<div class='skinColorItem' style='background-color:"+config.skinColors[i]+"' onclick='selectSkinColor("+i+")'></div>";skinColorHolder.innerHTML=tmpHTML}var chatBox=document.getElementById("chatBox"),chatHolder=document.getElementById("chatHolder");function toggleChat(){usingTouch?setTimeout(function(){var chatMessage=prompt("chat message");chatMessage&&sendChat(chatMessage)},1):("block"==chatHolder.style.display?(chatBox.value&&sendChat(chatBox.value),closeChat):(storeMenu.style.display="none",allianceMenu.style.display="none",chatHolder.style.display="block",chatBox.focus(),resetMoveDir))(),chatBox.value=""}function sendChat(message){function command(chat){return message=="!!"+chat}command("dir")?showSettingText(500,showDir=!showDir):command("bull")?showSettingText(500,autoBullSpam=!autoBullSpam):command("spin")?showSettingText(500,autoSpin=!autoSpin):message=="!!speed "+message.slice(8)?(spinSpeed=Math.PI/Math.max(1,message.slice(8)),textManager.showText(player.x,player.y,50,.18,500,"Spinspeed "+Math.max(1,message.slice(8)),"#8ecc51")):command("join")?(botConfig.stop=!botConfig.stop,showSettingText(500,botConfig.stop)):command("atck")?(botConfig.atck=!botConfig.atck,showSettingText(500,botConfig.atck)):command("antikik")?showSettingText(500,antiKick=!antiKick):command("combat")?showSettingText(500,cBull=!cBull):command("bars")?showSettingText(500,bars=!bars):command("heals")?showSettingText(500,showHeal=!showHeal):command("grind")?showSettingText(500,grinder=!grinder):command("change")?showSettingText(500,hammerLol=!hammerLol):message=="!!set "+message.slice(6)?(setAcc=message.slice(6),textManager.showText(player.x,player.y,50,.18,500,"Set To "+setAcc,"#8ecc51")):message=="!!test "+message.slice(7)?textManager.showText(player.x,player.y,50,.18,500,message.slice(7),"#8ecc51"):command("texture")?showSettingText(500,renderFuck=!renderFuck):io.send("ch",message.slice(0,90))}function closeChat(){chatBox.value="",chatHolder.style.display="none"}var usingTouch,profanityList=["cunt","whore","fuck","shit","faggot","nigger","nigga","dick","vagina","minge","cock","rape","cum","sex","tits","penis","clit","pussy","meatcurtain","jizz","prune","douche","wanker","damn","bitch","dick","fag","bastard"];function receiveChat(sid,message){sid=findPlayerBySID(sid);sid&&(sid.chatMessage=function(text){for(var i=0;i<profanityList.length;++i)if(-1<text.indexOf(profanityList[i])){for(var tmpString="",y=0;y<profanityList[i].length;++y)tmpString+=tmpString.length?"o":"M";var re=new RegExp(profanityList[i],"g");text=text.replace(re,tmpString)}return text}(message),sid.chatCountdown=config.chatCountdown)}function resize(){screenWidth=window.innerWidth,screenHeight=window.innerHeight;var scaleFillNative=Math.max(screenWidth/maxScreenWidth,screenHeight/maxScreenHeight)*pixelDensity;gameCanvas.width=screenWidth*pixelDensity,gameCanvas.height=screenHeight*pixelDensity,gameCanvas.style.width=screenWidth+"px",gameCanvas.style.height=screenHeight+"px",mainContext.setTransform(scaleFillNative,0,0,scaleFillNative,(screenWidth*pixelDensity-maxScreenWidth*scaleFillNative)/2,(screenHeight*pixelDensity-maxScreenHeight*scaleFillNative)/2)}function setUsingTouch(using){(usingTouch=using)?guideCard.classList.add("touch"):guideCard.classList.remove("touch")}function touchEnd(ev){ev.preventDefault(),ev.stopPropagation(),setUsingTouch(!0);for(var i=0;i<ev.changedTouches.length;i++){var t=ev.changedTouches[i];t.identifier==controllingTouch.id?(controllingTouch.id=-1,sendMoveDir()):t.identifier==attackingTouch.id&&(attackingTouch.id=-1,0<=player.buildIndex&&(attackState=1,sendAtckState()),attackState=0,sendAtckState())}}window.addEventListener("resize",UTILS.checkTrusted(resize)),resize(),setUsingTouch(!1),window.setUsingTouch=setUsingTouch,gameCanvas.addEventListener("touchmove",UTILS.checkTrusted(function(ev){ev.preventDefault(),ev.stopPropagation(),setUsingTouch(!0);for(var i=0;i<ev.changedTouches.length;i++){var t=ev.changedTouches[i];t.identifier==controllingTouch.id?(controllingTouch.currentX=t.pageX,controllingTouch.currentY=t.pageY,sendMoveDir()):t.identifier==attackingTouch.id&&(attackingTouch.currentX=t.pageX,attackingTouch.currentY=t.pageY,attackState=1)}}),!1),gameCanvas.addEventListener("touchstart",UTILS.checkTrusted(function(ev){ev.preventDefault(),ev.stopPropagation(),setUsingTouch(!0);for(var i=0;i<ev.changedTouches.length;i++){var t=ev.changedTouches[i];t.pageX<document.body.scrollWidth/2&&-1==controllingTouch.id?(controllingTouch.id=t.identifier,controllingTouch.startX=controllingTouch.currentX=t.pageX,controllingTouch.startY=controllingTouch.currentY=t.pageY,sendMoveDir()):t.pageX>document.body.scrollWidth/2&&-1==attackingTouch.id&&(attackingTouch.id=t.identifier,attackingTouch.startX=attackingTouch.currentX=t.pageX,attackingTouch.startY=attackingTouch.currentY=t.pageY,player.buildIndex<0)&&(attackState=1,sendAtckState())}}),!1),gameCanvas.addEventListener("touchend",UTILS.checkTrusted(touchEnd),!1),gameCanvas.addEventListener("touchcancel",UTILS.checkTrusted(touchEnd),!1),gameCanvas.addEventListener("touchleave",UTILS.checkTrusted(touchEnd),!1),gameCanvas.addEventListener("mousemove",function(e){e.preventDefault(),e.stopPropagation(),setUsingTouch(!1),mouseX=e.clientX,mouseY=e.clientY},!1),gameCanvas.addEventListener("mousedown",function(e){setUsingTouch(!1),1!=attackState&&(attackState=1,sendAtckState(),0==e.button?lC=!0:2==e.button&&(rC=!0),isPress=!0)},!1);var isPress=!1,lC=!1,rC=!1;gameCanvas.addEventListener("mouseup",function(e){setUsingTouch(!1),0!=attackState&&(attackState=0,sendAtckState(),0==e.button?lC=!1:2==e.button&&(rC=!1),lC||rC||(isPress=!1))},!1);var lastDir;gameCanvas.addEventListener("wheel",function(e){e.deltaY<0?buyEquip(7,0):buyEquip(6,0)},!1);var lessDir=null;function getAttackDir(){return player?aimToNear||isSpamming?nearAim:!aimToNear&&inTrap&&1==(isHammer?player.sR:player.pR)?trapAim:(-1!=attackingTouch.id?lastDir=Math.atan2(attackingTouch.currentY-attackingTouch.startY,attackingTouch.currentX-attackingTouch.startX):player.lockDir||usingTouch||(lastDir=Math.atan2(mouseY-screenHeight/2,mouseX-screenWidth/2)),UTILS.fixTo(lastDir||0,2)):0}var autoSpin=!1,spinSpeed=Math.PI/6;var keys={},moveKeys={87:[0,-1],38:[0,-1],83:[0,1],40:[0,1],65:[-1,0],37:[-1,0],68:[1,0],39:[1,0]};function resetMoveDir(){keys={},io.send("rmd")}function keysActive(){return"block"!=allianceMenu.style.display&&"block"!=chatHolder.style.display}var ae1=!1,ae2=!1,ae3=!1,ae4=!1;function sendAtckState(){player&&player.alive&&io.send("c",attackState,0<=player.buildIndex?getAttackDir():null)}window.addEventListener("keydown",UTILS.checkTrusted(function(event){var keyNum=event.which||event.keyCode||0;if(27==keyNum)hideAllWindows();else if(player&&player.alive&&keysActive()&&!keys[keyNum])if(keys[keyNum]=1,69==keyNum)sendAutoGather();else if(67==keyNum)(mapMarker=mapMarker||{}).x=player.x,mapMarker.y=player.y;else if(77==keyNum)plcmill=!plcmill;else if(88==keyNum)player.lockDir=player.lockDir?0:1,io.send("7",0);else if(null!=player.weapons[keyNum-49])wpc=player.weapons[keyNum-49],selectToBuild(player.weapons[keyNum-49],!0);else if(null!=player.items[keyNum-49-player.weapons.length])selectToBuild(player.items[keyNum-49-player.weapons.length]);else if(82==keyNum)waitInsta=!waitInsta,sendMapPing();else if(moveKeys[keyNum])sendMoveDir();else if(32==keyNum)attackState=1,sendAtckState();else if("q"==event.key)plc(0,getAttackDir()),ae1=!0;else if("f"==event.key)ae2=!0;else if("v"==event.key)ae3=!0;else if("h"==event.key)ae4=!0;else if("B"==event.key)testtest=!testtest,setAcc=player.tailIndex<=0?0:player.tailIndex,textManager.showText(player.x,player.y,50,.18,500,player.tailIndex<=0?"Set To Unequip":"Set To "+setAcc,"#8ecc51");else if("G"==event.key){for(let i=0;i<bot;i++)isProd&&tmpAddress?window.grecaptcha.execute("6LevKusUAAAAAAFknhlV8sPtXAk5Z5dGP5T2FYIZ",{action:"homepage"}).then(function(token){bConnect(token,i)}):bConnect(null,i);bot=4}else"L"==event.key&&console.log(actionBar)})),window.addEventListener("keyup",UTILS.checkTrusted(function(event){var keyNum;player&&player.alive&&(13==(keyNum=event.which||event.keyCode||0)?toggleChat():keysActive()&&keys[keyNum]&&(keys[keyNum]=0,moveKeys[keyNum]?sendMoveDir():32==keyNum?(attackState=0,sendAtckState()):"q"==event.key?ae1=!1:"f"==event.key?ae2=!1:"v"==event.key?ae3=!1:"h"==event.key&&(ae4=!1)))}));var lastMoveDir=void 0,isMoveDir=void 0;function sendMoveDir(){var newMoveDir=function(){var dx=0,dy=0;if(-1!=controllingTouch.id)dx+=controllingTouch.currentX-controllingTouch.startX,dy+=controllingTouch.currentY-controllingTouch.startY;else for(var key in moveKeys){var tmpDir=moveKeys[key];dx+=!!keys[key]*tmpDir[0],dy+=!!keys[key]*tmpDir[1]}return 0==dx&&0==dy?void 0:UTILS.fixTo(Math.atan2(dy,dx),2)}();(null==lastMoveDir||null==newMoveDir||.3<Math.abs(newMoveDir-lastMoveDir))&&(io.send("33",newMoveDir),isMoveDir=lastMoveDir=newMoveDir)}function sendMapPing(){io.send("14",1)}function sendAutoGather(){io.send("7",1)}function selectToBuild(index,wpn){io.send("5",index,wpn)}function enterGame(){var cookie;saveVal("moo_name",nameInput.value),!inGame&&io.connected&&(inGame=!(upgraded=0),Sound.stop("menu"),showLoadingText("Loading..."),io.send("sp",{name:nameInput.value,moofoll:moofoll,skin:skinColor}),cookie=document.getElementById("ot-sdk-btn-floating"))&&(cookie.style.display="none")}var firstSetup=!0;function setupGame(yourSID){loadingText.style.display="none",menuCardHolder.style.display="block",mainMenu.style.display="none",keys={},playerSID=yourSID,inGame=!(attackState=0),firstSetup&&(firstSetup=!1,gameObjects.length=0)}function showText(x,y,value,type){textManager.showText(x,y,50,.18,500,Math.abs(value),0<=value?"#fff":"#8ecc51")}function showSettingText(life,setting){textManager.showText(player.x,player.y,player.scale,.1,life,setting?"Enabled":"Disabled",setting?"#fff":"#cc5151")}var deathTextScale=99999;function killPlayer(){inGame=!1;try{factorem.refreshAds([2],!0)}catch(e){}gameUI.style.display="none",hideAllWindows(),lastDeath={x:player.x,y:player.y},loadingText.style.display="none",diedText.style.display="block",diedText.style.fontSize="0px",deathTextScale=0,setTimeout(function(){menuCardHolder.style.display="block",mainMenu.style.display="block",diedText.style.display="none"},config.deathFadeout),updateServerList()}function killObjects(sid){player&&objectManager.removeAllItems(sid)}var spikeTick=!1,waitSpikeTick=!1,grinder=!1;function killObject(sid){var findObj=findObjectBySid(sid),objAim=Math.atan2(findObj.y-player.y2,findObj.x-player.x2),objDst=Math.hypot(findObj.y-player.y2,findObj.x-player.x2);if(player.alive)if(grinder)objDst<=135&&(plc(player.items[5]?5:1,Math.atan2(findObj.y-player.y2,findObj.x-player.x2)),io.send("2",player?(-1!=attackingTouch.id?lastDir=Math.atan2(attackingTouch.currentY-attackingTouch.startY,attackingTouch.currentX-attackingTouch.startX):player.lockDir||usingTouch||(lastDir=Math.atan2(mouseY-screenHeight/2,mouseX-screenWidth/2)),UTILS.fixTo(lastDir||0,2)):0));else if(enemyCount.length&&objDst<=486)if(objDst<=200&&tmpObjDist(nearDist,player)<=180&&!isPress&&!inTrap&&!spikeTick&&1==player.pR)plc(2,objAim),waitSpikeTick=!0;else if(tmpObjDist(nearDist,player)<=250){let tmpCount=-1;for(let i=-90;i<180;i+=90)tmpCount++,rad(i),1==tmpCount&&objDst<=200?plc(2,objAim):checkPlc(2,objAim+rad(i))}else if(250<tmpObjDist(nearDist,player)&&tmpObjDist(nearDist,player)<500){let tmpCount=-1;for(let i=0;i<2*Math.PI;i+=Math.PI/2)15==player.items[4]&&(tmpCount++,rad(i),0==tmpCount&&objDst<=200?plc(4,objAim):checkPlc(4,objAim+i))}if(1200<objDist(findObj,player)){for(var x=findObj.x,findObj=findObj.y,i=0;i<objMapPings.length;++i)if(!objMapPings[i].active){tmpObjPing=objMapPings[i];break}tmpObjPing||(tmpObjPing=new MapPing,objMapPings.push(tmpObjPing)),tmpObjPing.init(x,findObj)}loadObjects.forEach(tmpObject=>{tmpObject[0]==sid&&(tmpObject.ueheua=0)}),objectManager.disableBySid(sid)}var place2=!1;var waitInsta=!1,instaKill=!1;function updateStatusDisplay(){scoreDisplay.innerText=player.points,foodDisplay.innerText=player.food,woodDisplay.innerText=player.wood,stoneDisplay.innerText=player.stone,killCounter.innerText=player.kills}var iconSprites={},icons=["crown","skull"];var tmpList=[],upgraded=0,hammerLol=!0;function updateUpgrades(points,age){if(player.upgradePoints=points,player.upgrAge=age,0<points){tmpList.length=0,UTILS.removeAllChildren(upgradeHolder);for(var i=0;i<items.weapons.length;++i)items.weapons[i].age==age&&(null==items.weapons[i].pre||0<=player.weapons.indexOf(items.weapons[i].pre))&&(UTILS.generateElement({id:"upgradeItem"+i,class:"actionBarItem",onmouseout:function(){showItemInfo()},parent:upgradeHolder}).style.backgroundImage=document.getElementById("actionBarItem"+i).style.backgroundImage,tmpList.push(i));for(var tmpI,i=0;i<items.list.length;++i)items.list[i].age==age&&(null==items.list[i].pre||0<=player.items.indexOf(items.list[i].pre))&&(tmpI=items.weapons.length+i,UTILS.generateElement({id:"upgradeItem"+tmpI,class:"actionBarItem",onmouseout:function(){showItemInfo()},parent:upgradeHolder}).style.backgroundImage=document.getElementById("actionBarItem"+tmpI).style.backgroundImage,tmpList.push(tmpI));for(i=0;i<tmpList.length;i++)!function(i){var tmpItem=document.getElementById("upgradeItem"+i);tmpItem.onmouseover=function(){items.weapons[i]?showItemInfo(items.weapons[i],!0):showItemInfo(items.list[i-items.weapons.length])},tmpItem.onclick=UTILS.checkTrusted(function(){0<=i&&i<=15&&((wpc=i)<9?player.pR=1:8<i&&(player.sR=1)),io.send("6",i)}),UTILS.hookTouchEvents(tmpItem)}(tmpList[i]);tmpList.length?(upgradeHolder.style.display="block",upgradeCounter.style.display="block",upgradeCounter.innerHTML="SELECT ITEMS ("+points+")"):(upgradeHolder.style.display="none",upgradeCounter.style.display="none",showItemInfo()),player.alive&&(0==upgraded?sendUpgrade(3):1==upgraded?sendUpgrade(17):2==upgraded?sendUpgrade(31):3==upgraded?sendUpgrade(27):4==upgraded?sendUpgrade(hammerLol?10:9):5==upgraded?sendUpgrade(38):6==upgraded?sendUpgrade(4):7==upgraded&&sendUpgrade(25),upgraded++)}else upgradeHolder.style.display="none",upgradeCounter.style.display="none",showItemInfo()}function sendUpgrade(index){0<=index&&index<=15&&((wpc=index)<9?player.pR=1:8<index&&(player.sR=1)),io.send("6",index)}function updateAge(xp,mxp,age){null!=xp&&(player.XP=xp),null!=mxp&&(player.maxXP=mxp),null!=age&&(player.age=age),age==config.maxAge?ageText.innerHTML="MAX AGE":ageText.innerHTML="AGE "+player.age,ageBarBody.style.width="0%"}function updateLeaderboard(data){UTILS.removeAllChildren(leaderboardData);for(var tmpC=1,i=0;i<data.length;i+=3)!function(i){UTILS.generateElement({class:"leaderHolder",parent:leaderboardData,children:[UTILS.generateElement({class:"leaderboardItem",style:"color:"+(data[i]==playerSID?"#fff":"rgba(255,255,255,0.6)"),text:tmpC+". "+(""!=data[i+1]?data[i+1]:"unknown")}),UTILS.generateElement({class:"leaderScore",text:UTILS.kFormat(data[i+2])||"0"})]})}(i),tmpC++}Math.random(),config.mapScale;let isNight=!1,dayCycle=.35;function updateGame(){player&&(!lastSent||now-lastSent>=1e3/config.clientSendRate)&&(lastSent=now,atckDir=getAttackDir(),lessDir!==atckDir)&&(lessDir=atckDir,io.send("2",atckDir)),deathTextScale<120&&(deathTextScale+=.1*delta,diedText.style.fontSize=Math.min(Math.round(deathTextScale),120)+"px"),player?(atckDir=UTILS.getDistance(camX,camY,player.x,player.y),tmpDir=UTILS.getDirection(player.x,player.y,camX,camY),camSpd=Math.min(.01*atckDir*delta,atckDir),.05<atckDir?(camX+=camSpd*Math.cos(tmpDir),camY+=camSpd*Math.sin(tmpDir)):(camX=player.x,camY=player.y)):(camX=config.mapScale/2,camY=config.mapScale/2);for(var tmpDir,camSpd,total,tmpRate,tmpDiff,lastTime=now-1e3/config.serverUpdateRate,i=0;i<players.length+ais.length;++i)(tmpObj=players[i]||ais[i-players.length])&&tmpObj.visible&&(tmpObj.forcePos?(tmpObj.x=tmpObj.x2,tmpObj.y=tmpObj.y2,tmpObj.dir=tmpObj.d2):(total=tmpObj.t2-tmpObj.t1,total=(lastTime-tmpObj.t1)/total,tmpObj.dt+=delta,tmpRate=Math.min(1.7,tmpObj.dt/170),tmpDiff=tmpObj.x2-tmpObj.x1,tmpObj.x=tmpObj.x1+tmpDiff*tmpRate,tmpDiff=tmpObj.y2-tmpObj.y1,tmpObj.y=tmpObj.y1+tmpDiff*tmpRate,tmpObj.dir=Math.lerpAngle(tmpObj.d2,tmpObj.d1,Math.min(1.2,total))));var xOffset=camX-maxScreenWidth/2,yOffset=camY-maxScreenHeight/2;config.snowBiomeTop-yOffset<=0&&config.mapScale-config.snowBiomeTop-yOffset>=maxScreenHeight?(mainContext.fillStyle="#b6db66",mainContext.fillRect(0,0,maxScreenWidth,maxScreenHeight)):config.mapScale-config.snowBiomeTop-yOffset<=0?(mainContext.fillStyle="#dbc666",mainContext.fillRect(0,0,maxScreenWidth,maxScreenHeight)):config.snowBiomeTop-yOffset>=maxScreenHeight?(mainContext.fillStyle="#fff",mainContext.fillRect(0,0,maxScreenWidth,maxScreenHeight)):0<=config.snowBiomeTop-yOffset?(mainContext.fillStyle="#fff",mainContext.fillRect(0,0,maxScreenWidth,config.snowBiomeTop-yOffset),mainContext.fillStyle="#b6db66",mainContext.fillRect(0,config.snowBiomeTop-yOffset,maxScreenWidth,maxScreenHeight-(config.snowBiomeTop-yOffset))):(mainContext.fillStyle="#b6db66",mainContext.fillRect(0,0,maxScreenWidth,config.mapScale-config.snowBiomeTop-yOffset),mainContext.fillStyle="#dbc666",mainContext.fillRect(0,config.mapScale-config.snowBiomeTop-yOffset,maxScreenWidth,maxScreenHeight-(config.mapScale-config.snowBiomeTop-yOffset))),firstSetup||((waterMult+=waterPlus*config.waveSpeed*delta)>=config.waveMax?(waterMult=config.waveMax,waterPlus=-1):waterMult<=1&&(waterMult=waterPlus=1),mainContext.globalAlpha=1,mainContext.fillStyle="#dbc666",renderWaterBodies(0,yOffset,mainContext,config.riverPadding),mainContext.fillStyle="#91b2db",renderWaterBodies(0,yOffset,mainContext,250*(waterMult-1))),mainContext.globalAlpha=1,mainContext.strokeStyle=outlineColor,renderGameObjects(-1,xOffset,yOffset),mainContext.globalAlpha=1,mainContext.lineWidth=outlineWidth,renderProjectiles(0,xOffset,yOffset),renderPlayers(xOffset,yOffset,0),mainContext.globalAlpha=1;for(var obj,ctxt,tmpIndx,tmpSprite,tmpImg,atckDir,i=0;i<ais.length;++i)(tmpObj=ais[i]).active&&tmpObj.visible&&(tmpObj.animate(delta),mainContext.save(),mainContext.translate(tmpObj.x-xOffset,tmpObj.y-yOffset),mainContext.rotate(tmpObj.dir+tmpObj.dirPlus-Math.PI/2),tmpImg=tmpSprite=tmpIndx=ctxt=obj=void 0,ctxt=mainContext,tmpIndx=(obj=tmpObj).index,(tmpSprite=aiSprites[tmpIndx])||((tmpImg=new Image).onload=function(){this.isLoaded=!0,this.onload=null},tmpImg.src=".././img/animals/"+obj.src+".png",tmpSprite=tmpImg,aiSprites[tmpIndx]=tmpSprite),tmpSprite.isLoaded&&(tmpImg=1.2*obj.scale*(obj.spriteMlt||1),ctxt.drawImage(tmpSprite,-tmpImg,-tmpImg,2*tmpImg,2*tmpImg)),mainContext.restore());renderGameObjects(0,xOffset,yOffset),renderProjectiles(1,xOffset,yOffset),renderGameObjects(1,xOffset,yOffset),renderPlayers(xOffset,yOffset,1),renderGameObjects(2,xOffset,yOffset),renderGameObjects(3,xOffset,yOffset),mainContext.fillStyle="#000",mainContext.globalAlpha=.09,xOffset<=0&&mainContext.fillRect(0,0,-xOffset,maxScreenHeight),config.mapScale-xOffset<=maxScreenWidth&&(tmpY=Math.max(0,-yOffset),mainContext.fillRect(config.mapScale-xOffset,tmpY,maxScreenWidth-(config.mapScale-xOffset),maxScreenHeight-tmpY)),yOffset<=0&&mainContext.fillRect(-xOffset,0,maxScreenWidth+xOffset,-yOffset),config.mapScale-yOffset<=maxScreenHeight&&(tmpX=Math.max(0,-xOffset),atckDir=0,config.mapScale-xOffset<=maxScreenWidth&&(atckDir=maxScreenWidth-(config.mapScale-xOffset)),mainContext.fillRect(tmpX,config.mapScale-yOffset,maxScreenWidth-tmpX-atckDir,maxScreenHeight-(config.mapScale-yOffset))),mainContext.globalAlpha=1,mainContext.fillStyle="rgba(0, 0, 70, "+dayCycle+")",mainContext.fillRect(0,0,maxScreenWidth,maxScreenHeight),mainContext.strokeStyle=darkOutlineColor;for(i=0;i<players.length+ais.length;++i)if(tmpObj=players[i]||ais[i-players.length],mainContext.strokeStyle=darkOutlineColor,tmpObj.visible){tmpObj.isPlayer&&(tmpObj.weaponIndex<9||10==tmpObj.weaponIndex||14==tmpObj.weaponIndex)&&(mainContext.beginPath(),mainContext.arc(tmpObj.x-xOffset,tmpObj.y-yOffset,tmpObj.scale+items.weapons[tmpObj.weaponIndex].range,tmpObj.dir-Math.PI/2,tmpObj.dir+Math.PI/2),mainContext.globalAlpha=.175,mainContext.fillStyle="red",mainContext.fill()),mainContext.globalAlpha=1;var tmpS,tmpText=(tmpObj.team?"["+tmpObj.team+"] ":"")+(tmpObj.name||"");if(tmpText&&(mainContext.font=(tmpObj.nameScale||30)+"px Hammersmith One",mainContext.fillStyle="#fff",mainContext.textBaseline="middle",mainContext.textAlign="center",mainContext.lineWidth=tmpObj.nameScale?11:8,mainContext.lineJoin="round",mainContext.strokeText(tmpText,tmpObj.x-xOffset,tmpObj.y-yOffset-tmpObj.scale-config.nameY),mainContext.fillText(tmpText,tmpObj.x-xOffset,tmpObj.y-yOffset-tmpObj.scale-config.nameY),tmpObj.isLeader&&iconSprites.crown.isLoaded&&(tmpS=config.crownIconScale,tmpX=tmpObj.x-xOffset-tmpS/2-mainContext.measureText(tmpText).width/2-config.crownPad,mainContext.drawImage(iconSprites.crown,tmpX,tmpObj.y-yOffset-tmpObj.scale-config.nameY-tmpS/2-5,tmpS,tmpS)),1==tmpObj.iconIndex)&&iconSprites.skull.isLoaded&&(tmpS=config.crownIconScale,tmpX=tmpObj.x-xOffset-tmpS/2+mainContext.measureText(tmpText).width/2+config.crownPad,mainContext.drawImage(iconSprites.skull,tmpX,tmpObj.y-yOffset-tmpObj.scale-config.nameY-tmpS/2-5,tmpS,tmpS)),tmpObj==player&&bars?(mainContext.font=(tmpObj.nameScale||30)+"px Hammersmith One",mainContext.fillStyle=tmpObj.shameCount<5?"#8ecc51":"#cc5151",mainContext.textBaseline="middle",mainContext.textAlign="center",mainContext.lineWidth=tmpObj.nameScale?11:8,mainContext.lineJoin="round",tmpS=config.crownIconScale,tmpX=tmpObj.x-xOffset-tmpS/2+mainContext.measureText(tmpText).width/2+config.crownPad+(1==tmpObj.iconIndex?2.75*(tmpObj.nameScale||30):tmpObj.nameScale||30),mainContext.strokeText(tmpObj.shameCount,tmpX,tmpObj.y-yOffset-tmpObj.scale-config.nameY),mainContext.fillText(tmpObj.shameCount,tmpX,tmpObj.y-yOffset-tmpObj.scale-config.nameY),mainContext.font="20px Hammersmith One",mainContext.fillStyle="#fff",mainContext.textBaseline="middle",mainContext.textAlign="center",mainContext.lineWidth=tmpObj.nameScale?11:8,mainContext.lineJoin="round",mainContext.strokeText("["+[pktSended,minPacket,secPacket].join("/")+"]",tmpObj.x-xOffset,tmpObj.y-yOffset+tmpObj.scale+config.nameY),mainContext.fillText("["+[pktSended,minPacket,secPacket].join("/")+"]",tmpObj.x-xOffset,tmpObj.y-yOffset+tmpObj.scale+config.nameY)):tmpObj.isPlayer&&bars&&(mainContext.font="20px Hammersmith One",mainContext.fillStyle="#fff",mainContext.textBaseline="middle",mainContext.textAlign="center",mainContext.lineWidth=tmpObj.nameScale?11:8,mainContext.lineJoin="round",mainContext.strokeText("["+[tmpObj.primaryIndex,tmpObj.secondaryIndex].join("/")+"]",tmpObj.x-xOffset,tmpObj.y-yOffset+tmpObj.scale+config.nameY),mainContext.fillText("["+[tmpObj.primaryIndex,tmpObj.secondaryIndex].join("/")+"]",tmpObj.x-xOffset,tmpObj.y-yOffset+tmpObj.scale+config.nameY)),tmpObj!=player&&tmpObj.isPlayer){if(!(tmpObj==player||tmpObj.team&&tmpObj.team==player.team)){tmpText=function(a,b){return Math.atan2(a.y1-b.y1,a.x1-b.x1)};let dist=Math.floor((a=tmpObj,b=player,Math.hypot(a.y1-b.y1,a.x1-b.x1)));mainContext.save(),mainContext.translate(player.x1+dist/2*Math.cos(tmpText(tmpObj,player))-xOffset,player.y1+dist/2*Math.sin(tmpText(tmpObj,player))-yOffset),mainContext.rotate(tmpText(tmpObj,player)+Math.PI/2),mainContext.fillStyle="#cc5151",mainContext.globalAlpha=1<dist/1440?1:dist/1440,a=config.playerScale,b=void 0,tmpText=(tmpText=mainContext)||mainContext,b=a*(Math.sqrt(3)/2),tmpText.beginPath(),tmpText.moveTo(0,-b/2),tmpText.lineTo(-a/2,b/2),tmpText.lineTo(a/2,b/2),tmpText.lineTo(0,-b/2),tmpText.fill(),tmpText.closePath(),mainContext.restore()}enemyCount.length&&waitInsta&&(mainContext.strokeStyle="#cc5151",mainContext.globalAlpha=1,mainContext.lineWidth=8,renderCircle(nearDist.x-xOffset,nearDist.y-yOffset,nearDist.scale,mainContext,!1,!0))}}mainContext.strokeStyle=darkOutlineColor,textManager.update(delta,mainContext,xOffset,yOffset);for(var tmpX,tmpY,tmpSize,a,b,i=0;i<players.length;++i)(tmpObj=players[i]).visible&&0<tmpObj.chatCountdown&&(tmpObj.chatCountdown-=delta,tmpObj.chatCountdown<=0&&(tmpObj.chatCountdown=0),mainContext.font="32px Hammersmith One",tmpSize=mainContext.measureText(tmpObj.chatMessage),mainContext.textBaseline="middle",mainContext.textAlign="center",tmpX=tmpObj.x-xOffset,tmpY=tmpObj.y-tmpObj.scale-yOffset-90,tmpSize=tmpSize.width+17,mainContext.fillStyle="rgba(0,0,0,0.2)",mainContext.roundRect(tmpX-tmpSize/2,tmpY-23.5,tmpSize,47,6),mainContext.fill(),mainContext.fillStyle="#fff",mainContext.fillText(tmpObj.chatMessage,tmpX,tmpY));!function(delta){if(player&&player.alive){mapContext.clearRect(0,0,mapDisplay.width,mapDisplay.height),mapContext.strokeStyle="#fff",mapContext.lineWidth=4;for(var i=0;i<mapPings.length;++i)(tmpPing=mapPings[i]).update(mapContext,delta);mapContext.strokeStyle="#cc5151",mapContext.lineWidth=4;for(i=0;i<objMapPings.length;++i)(tmpObjPing=objMapPings[i]).update(mapContext,delta);if(mapContext.globalAlpha=1,mapContext.fillStyle="#fff",renderCircle(player.x/config.mapScale*mapDisplay.width,player.y/config.mapScale*mapDisplay.height,7,mapContext,!0),mapContext.fillStyle="rgba(255,255,255,0.35)",player.team&&minimapData)for(i=0;i<minimapData.length;)renderCircle(minimapData[i]/config.mapScale*mapDisplay.width,minimapData[i+1]/config.mapScale*mapDisplay.height,7,mapContext,!0),i+=2;for(let i=0;i<loadObjects.length;i++){var tmpObj=loadObjects[i];0!=tmpObj.ueheua&&items.list[tmpObj[6]]&&(mapContext.fillStyle=items.list[tmpObj[6]].dmg?"#a5974c":items.list[tmpObj[6]].trap?darkOutlineColor:items.list[tmpObj[6]].teleport&&"#d76edb",renderCircle(tmpObj[1]/config.mapScale*mapDisplay.width,tmpObj[2]/config.mapScale*mapDisplay.height,items.list[tmpObj[6]].scale/10,mapContext,!0))}lastDeath&&(mapContext.fillStyle="#fc5553",mapContext.font="34px Hammersmith One",mapContext.textBaseline="middle",mapContext.textAlign="center",mapContext.fillText("x",lastDeath.x/config.mapScale*mapDisplay.width,lastDeath.y/config.mapScale*mapDisplay.height))}}(delta),-1!==controllingTouch.id&&renderControl(controllingTouch.startX,controllingTouch.startY,controllingTouch.currentX,controllingTouch.currentY),-1!==attackingTouch.id&&renderControl(attackingTouch.startX,attackingTouch.startY,attackingTouch.currentX,attackingTouch.currentY)}function renderControl(startX,startY,currentX,currentY){mainContext.save(),mainContext.setTransform(1,0,0,1,0,0),mainContext.scale(pixelDensity,pixelDensity);mainContext.beginPath(),mainContext.arc(startX,startY,50,0,2*Math.PI,!1),mainContext.closePath(),mainContext.fillStyle="rgba(255, 255, 255, 0.3)",mainContext.fill();var currentX=currentX-startX,currentY=currentY-startY,mag=Math.sqrt(Math.pow(currentX,2)+Math.pow(currentY,2)),mag=50<mag?mag/50:1;currentX/=mag,currentY/=mag,mainContext.beginPath(),mainContext.arc(startX+currentX,startY+currentY,25,0,2*Math.PI,!1),mainContext.closePath(),mainContext.fillStyle="white",mainContext.fill(),mainContext.restore()}function renderProjectiles(layer,xOffset,yOffset){for(var i=0;i<projectiles.length;++i)(tmpObj=projectiles[i]).active&&tmpObj.layer==layer&&(tmpObj.update(delta),tmpObj.active)&&isOnScreen(tmpObj.x-xOffset,tmpObj.y-yOffset,tmpObj.scale)&&(mainContext.save(),mainContext.translate(tmpObj.x-xOffset,tmpObj.y-yOffset),mainContext.rotate(tmpObj.dir),renderProjectile(0,0,tmpObj,mainContext),mainContext.restore())}var projectileSprites={};function renderProjectile(x,y,obj,ctxt){var tmpSrc,tmpSprite;obj.src?(tmpSrc=items.projectiles[obj.indx].src,(tmpSprite=projectileSprites[tmpSrc])||((tmpSprite=new Image).onload=function(){this.isLoaded=!0},tmpSprite.src=".././img/weapons/"+tmpSrc+".png",projectileSprites[tmpSrc]=tmpSprite),tmpSprite.isLoaded&&ctxt.drawImage(tmpSprite,x-obj.scale/2,y-obj.scale/2,obj.scale,obj.scale)):1==obj.indx&&(ctxt.fillStyle="#939393",renderCircle(x,y,obj.scale,ctxt))}function renderWaterBodies(xOffset,yOffset,ctxt,padding){padding=config.riverWidth+padding,yOffset=config.mapScale/2-yOffset-padding/2;yOffset<maxScreenHeight&&0<yOffset+padding&&ctxt.fillRect(0,yOffset,maxScreenWidth,padding)}function renderGameObjects(layer,xOffset,yOffset){for(var tmpSprite,tmpX,tmpY,i=0;i<gameObjects.length;++i)(tmpObj=gameObjects[i]).active&&(tmpX=tmpObj.x+tmpObj.xWiggle-xOffset,tmpY=tmpObj.y+tmpObj.yWiggle-yOffset,0==layer&&tmpObj.update(delta),tmpObj.layer==layer)&&isOnScreen(tmpX,tmpY,tmpObj.scale+(tmpObj.blocker||0))&&(mainContext.globalAlpha=tmpObj.hideFromEnemy?.6:1,tmpObj.isItem?(tmpSprite=getItemSprite(tmpObj),mainContext.save(),mainContext.translate(tmpX,tmpY),mainContext.rotate(tmpObj.dir),mainContext.drawImage(tmpSprite,-tmpSprite.width/2,-tmpSprite.height/2),(tmpObj.trap||tmpObj.dmg)&&(mainContext.strokeStyle=player&&player.sid!=tmpObj.owner.sid&&!findAllianceBySid(tmpObj.owner.sid)?"#cc5151":"#8ecc51",mainContext.globalAlpha=.6,mainContext.lineWidth=4,renderCircle(0,0,tmpObj.scale,mainContext,!1,!0)),tmpObj.blocker&&(mainContext.strokeStyle="#db6e6e",mainContext.globalAlpha=.3,mainContext.lineWidth=6,renderCircle(0,0,tmpObj.blocker,mainContext,!1,!0)),mainContext.restore()):(tmpSprite=function(obj){var tmpScale,tmpRange,biomeID=obj.y>=config.mapScale-config.snowBiomeTop?2:obj.y<=config.snowBiomeTop?1:0,tmpIndex=obj.type+"_"+obj.scale+"_"+biomeID,tmpSprite=gameObjectSprites[tmpIndex];if(!tmpSprite){var tmpCanvas=document.createElement("canvas"),tmpContext=(tmpCanvas.width=tmpCanvas.height=2.1*obj.scale+outlineWidth,tmpCanvas.getContext("2d"));if(tmpContext.translate(tmpCanvas.width/2,tmpCanvas.height/2),tmpContext.rotate(UTILS.randFloat(0,Math.PI)),tmpContext.strokeStyle=outlineColor,tmpContext.lineWidth=outlineWidth,0==obj.type)for(var i=0;i<2;++i)tmpScale=tmpObj.scale*(i?.5:1),renderStar(tmpContext,7,tmpScale,.7*tmpScale),tmpContext.fillStyle=biomeID?i?"#fff":"#e3f1f4":i?"#b4db62":"#9ebf57",tmpContext.fill(),i||tmpContext.stroke();else if(1==obj.type)if(2==biomeID)tmpContext.fillStyle="#606060",renderStar(tmpContext,6,.3*obj.scale,.71*obj.scale),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#89a54c",renderCircle(0,0,.55*obj.scale,tmpContext),tmpContext.fillStyle="#a5c65b",renderCircle(0,0,.3*obj.scale,tmpContext,!0);else{!function(ctxt,spikes,outer,inner){var tmpOuter,rot=Math.PI/2*3,step=Math.PI/spikes;ctxt.beginPath(),ctxt.moveTo(0,-inner);for(var i=0;i<spikes;i++)tmpOuter=UTILS.randInt(outer+.9,1.2*outer),ctxt.quadraticCurveTo(Math.cos(rot+step)*tmpOuter,Math.sin(rot+step)*tmpOuter,Math.cos(rot+2*step)*inner,Math.sin(rot+2*step)*inner),rot+=2*step;ctxt.lineTo(0,-inner),ctxt.closePath()}(tmpContext,6,tmpObj.scale,.7*tmpObj.scale),tmpContext.fillStyle=biomeID?"#e3f1f4":"#89a54c",tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle=biomeID?"#6a64af":"#c15555";for(var rotVal=mathPI2/4,i=0;i<4;++i)renderCircle((tmpRange=UTILS.randInt(tmpObj.scale/3.5,tmpObj.scale/2.3))*Math.cos(rotVal*i),tmpRange*Math.sin(rotVal*i),UTILS.randInt(10,12),tmpContext)}else 2!=obj.type&&3!=obj.type||(tmpContext.fillStyle=2==obj.type?2==biomeID?"#938d77":"#939393":"#e0c655",renderStar(tmpContext,3,obj.scale,obj.scale),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle=2==obj.type?2==biomeID?"#b2ab90":"#bcbcbc":"#ebdca3",renderStar(tmpContext,3,.55*obj.scale,.65*obj.scale),tmpContext.fill());tmpSprite=tmpCanvas,gameObjectSprites[tmpIndex]=tmpSprite}return tmpSprite}(tmpObj),mainContext.drawImage(tmpSprite,tmpX-tmpSprite.width/2,tmpY-tmpSprite.height/2)))}function gatherAnimation(sid,didHit,index){(tmpObj=findPlayerBySID(sid))&&(tmpObj.startAnim(didHit,index),index<9?tmpObj.pR=-1e3/config.serverUpdateRate/items.weapons[index].speed:8<index&&(tmpObj.sR=-1e3/config.serverUpdateRate/items.weapons[index].speed),tmpObj==player)&&inTrap&&10==player.weapons[1]&&player.skins[40]}var showDir=!0;function renderPlayers(xOffset,yOffset,zIndex){mainContext.globalAlpha=1;for(var obj,ctxt,handAngle,oHandAngle,oHandDist,i=0;i<players.length;++i)(tmpObj=players[i]).zIndex==zIndex&&(tmpObj.animate(delta),tmpObj.visible)&&(tmpObj.skinRot+=.002*delta,tmpDir=(tmpObj!=player||showDir?tmpObj.dir:player?aimToNear||isSpamming&&1==player.pR?nearAim:!aimToNear&&inTrap&&1==(isHammer?player.sR:player.pR)?trapAim:isPress&&!inTrap&&1==(isHammer&&rC?player.sR:player.pR)?player.dir:autoSpin?spinDir:(-1!=attackingTouch.id?lastDir=Math.atan2(attackingTouch.currentY-attackingTouch.startY,attackingTouch.currentX-attackingTouch.startX):player.lockDir||usingTouch||(lastDir=Math.atan2(mouseY-screenHeight/2,mouseX-screenWidth/2)),UTILS.fixTo(lastDir||0,2)):0)+tmpObj.dirPlus,mainContext.save(),mainContext.translate(tmpObj.x-xOffset,tmpObj.y-yOffset),mainContext.rotate(tmpDir),oHandDist=oHandAngle=handAngle=ctxt=obj=void 0,obj=tmpObj,(ctxt=(ctxt=mainContext)||mainContext).lineWidth=outlineWidth,ctxt.lineJoin="miter",handAngle=Math.PI/4*(items.weapons[obj.weaponIndex].armS||1),oHandAngle=obj.buildIndex<0&&items.weapons[obj.weaponIndex].hndS||1,oHandDist=obj.buildIndex<0&&items.weapons[obj.weaponIndex].hndD||1,0<obj.tailIndex&&function(index,ctxt,owner){{var tmpImage;(tmpSkin=accessSprites[index])||((tmpImage=new Image).onload=function(){this.isLoaded=!0,this.onload=null},tmpImage.src=".././img/accessories/access_"+index+".png",accessSprites[index]=tmpImage,tmpSkin=tmpImage)}var tmpObj=accessPointers[index];if(!tmpObj){for(var i=0;i<accessories.length;++i)if(accessories[i].id==index){tmpObj=accessories[i];break}accessPointers[index]=tmpObj}tmpSkin.isLoaded&&(ctxt.save(),ctxt.translate(-20-(tmpObj.xOff||0),0),tmpObj.spin&&ctxt.rotate(owner.skinRot),ctxt.drawImage(tmpSkin,-tmpObj.scale/2,-tmpObj.scale/2,tmpObj.scale,tmpObj.scale),ctxt.restore())}(obj.tailIndex,ctxt,obj),obj.buildIndex<0&&!items.weapons[obj.weaponIndex].aboveHand&&(renderFuck?renderTextureTool(items.weapons[obj.weaponIndex],config.weaponVariants[obj.weaponVariant].src,obj.scale,0,ctxt,obj):renderTool(items.weapons[obj.weaponIndex],config.weaponVariants[obj.weaponVariant].src,obj.scale,0,ctxt),null==items.weapons[obj.weaponIndex].projectile||items.weapons[obj.weaponIndex].hideProjectile||renderProjectile(obj.scale,0,items.projectiles[items.weapons[obj.weaponIndex].projectile],mainContext)),ctxt.fillStyle=config.skinColors[obj.skinColor],renderCircle(obj.scale*Math.cos(handAngle),obj.scale*Math.sin(handAngle),14),renderCircle(obj.scale*oHandDist*Math.cos(-handAngle*oHandAngle),obj.scale*oHandDist*Math.sin(-handAngle*oHandAngle),14),obj.buildIndex<0&&items.weapons[obj.weaponIndex].aboveHand&&(renderFuck?renderTextureTool(items.weapons[obj.weaponIndex],config.weaponVariants[obj.weaponVariant].src,obj.scale,0,ctxt,obj):renderTool(items.weapons[obj.weaponIndex],config.weaponVariants[obj.weaponVariant].src,obj.scale,0,ctxt),null==items.weapons[obj.weaponIndex].projectile||items.weapons[obj.weaponIndex].hideProjectile||renderProjectile(obj.scale,0,items.projectiles[items.weapons[obj.weaponIndex].projectile],mainContext)),0<=obj.buildIndex&&(oHandDist=getItemSprite(items.list[obj.buildIndex]),ctxt.drawImage(oHandDist,obj.scale-items.list[obj.buildIndex].holdOffset,-oHandDist.width/2)),renderCircle(0,0,obj.scale,ctxt),0<obj.skinIndex&&(ctxt.rotate(Math.PI/2),function renderSkin(index,ctxt,parentSkin,owner){tmpSkin=skinSprites[index];{var tmpImage;tmpSkin||((tmpImage=new Image).onload=function(){this.isLoaded=!0,this.onload=null},tmpImage.src=".././img/hats/hat_"+index+".png",skinSprites[index]=tmpImage,tmpSkin=tmpImage)}var tmpObj=parentSkin||skinPointers[index];if(!tmpObj){for(var i=0;i<hats.length;++i)if(hats[i].id==index){tmpObj=hats[i];break}skinPointers[index]=tmpObj}tmpSkin.isLoaded&&ctxt.drawImage(tmpSkin,-tmpObj.scale/2,-tmpObj.scale/2,tmpObj.scale,tmpObj.scale);!parentSkin&&tmpObj.topSprite&&(ctxt.save(),ctxt.rotate(owner.skinRot),renderSkin(index+"_top",ctxt,tmpObj,owner),ctxt.restore())}(obj.skinIndex,ctxt,null,obj)),mainContext.restore())}var renderFuck=!0;var tmpSkin,skinSprites={},skinPointers={};var accessSprites={},accessPointers={};var toolSprites={};function renderTool(obj,variant,x,y,ctxt){var variant=obj.src+(variant||""),tmpSprite=toolSprites[variant];tmpSprite||((tmpSprite=new Image).onload=function(){this.isLoaded=!0},tmpSprite.src=".././img/weapons/"+variant+".png",toolSprites[variant]=tmpSprite),tmpSprite.isLoaded&&ctxt.drawImage(tmpSprite,x+obj.xOff-obj.length/2,y+obj.yOff-obj.width/2,obj.length,obj.width)}var toolFucks={};function renderTextureTool(obj,variant,x,y,ctxt,fuk){var variant=obj.src+(variant||""),tmpSprite=toolFucks[variant];tmpSprite||((tmpSprite=new Image).onload=function(){this.isLoaded=!0},tmpSprite.src=function(obj,fuk,tmpSrc){return 3==fuk.weaponVariant?0==obj.id?"https://i.imgur.com/oRXUfW8.png":1==obj.id?"https://i.imgur.com/kr8H9g7.png":2==obj.id?"https://i.imgur.com/UZ2HcQw.png":3==obj.id?"https://i.imgur.com/V9dzAbF.png":4==obj.id?"https://i.imgur.com/vxLZW0S.png":5==obj.id?"https://i.imgur.com/UY7SV7j.png":6==obj.id?"https://i.imgur.com/6ayjbIz.png":7==obj.id?"https://i.imgur.com/CDAmjux.png":8==obj.id?"https://i.imgur.com/aEs3FSU.png":10==obj.id?"https://i.imgur.com/tmUzurk.png":".././img/weapons/"+tmpSrc+".png":2==fuk.weaponVariant?0==obj.id?"https://i.imgur.com/WPWU8zC.png":1==obj.id?"https://i.imgur.com/OU5os0h.png":2==obj.id?"https://i.imgur.com/aAJyHBB.png":3==obj.id?"https://i.imgur.com/h5jqSRp.png":4==obj.id?"https://i.imgur.com/4ZxIJQM.png":5==obj.id?"https://i.imgur.com/HSWcyku.png":6==obj.id?"https://i.imgur.com/phXTNsa.png":7==obj.id?"https://i.imgur.com/ROTb7Ks.png":8==obj.id?"https://i.imgur.com/RnkmWgs.png":9==obj.id?"https://i.imgur.com/qu7HHT5.png":10==obj.id?"https://i.imgur.com/Fg93gj3.png":11==obj.id?"https://i.imgur.com/hSqLP3t.png":12==obj.id?"https://i.imgur.com/TRqDlgX.png":13==obj.id?"https://i.imgur.com/DVjCdwI.png":".././img/weapons/"+tmpSrc+".png":1==fuk.weaponVariant?3==obj.id?"https://i.imgur.com/wOTr8TG.png":4==obj.id?"https://i.imgur.com/QKBc2ou.png":5==obj.id?"https://i.imgur.com/jKDdyvc.png":6==obj.id?"https://i.imgur.com/ivLPh10.png":8==obj.id?"https://i.imgur.com/DTd8Xl6.png":".././img/weapons/"+tmpSrc+".png":".././img/weapons/"+tmpSrc+".png"}(obj,fuk,variant),toolFucks[variant]=tmpSprite),tmpSprite.isLoaded&&ctxt.drawImage(tmpSprite,x+obj.xOff-obj.length/2,y+obj.yOff-obj.width/2,obj.length,obj.width)}var gameObjectSprites={};var itemSprites=[];function getItemSprite(obj,asIcon){var x,y,l,ctxt,endY,tmpSprite=itemSprites[obj.id];if(!tmpSprite||asIcon){var tmpCanvas=document.createElement("canvas"),tmpContext=(tmpCanvas.width=tmpCanvas.height=2.5*obj.scale+outlineWidth+(items.list[obj.id].spritePadding||0),tmpCanvas.getContext("2d"));if(tmpContext.translate(tmpCanvas.width/2,tmpCanvas.height/2),tmpContext.rotate(asIcon?0:Math.PI/2),tmpContext.strokeStyle=outlineColor,tmpContext.lineWidth=outlineWidth*(asIcon?tmpCanvas.width/81:1),"apple"==obj.name){tmpContext.fillStyle="#c15555",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fillStyle="#89a54c";var leafDir=-Math.PI/2;x=obj.scale*Math.cos(leafDir),y=obj.scale*Math.sin(leafDir),l=25,leafDir=leafDir+Math.PI/2,ctxt=tmpContext,endX=x+l*Math.cos(leafDir),endY=y+l*Math.sin(leafDir),l*=.4,ctxt.moveTo(x,y),ctxt.beginPath(),ctxt.quadraticCurveTo((x+endX)/2+l*Math.cos(leafDir+Math.PI/2),(y+endY)/2+l*Math.sin(leafDir+Math.PI/2),endX,endY),ctxt.quadraticCurveTo((x+endX)/2-l*Math.cos(leafDir+Math.PI/2),(y+endY)/2-l*Math.sin(leafDir+Math.PI/2),x,y),ctxt.closePath(),ctxt.fill(),ctxt.stroke()}else if("cookie"==obj.name){tmpContext.fillStyle="#cca861",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fillStyle="#937c4b";for(var rotVal=mathPI2/(chips=4),i=0;i<chips;++i)renderCircle((tmpRange=UTILS.randInt(obj.scale/2.5,obj.scale/1.7))*Math.cos(rotVal*i),tmpRange*Math.sin(rotVal*i),UTILS.randInt(4,5),tmpContext,!0)}else if("cheese"==obj.name){tmpContext.fillStyle="#f4f3ac",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fillStyle="#c3c28b";for(var chips,tmpRange,rotVal=mathPI2/(chips=4),i=0;i<chips;++i)renderCircle((tmpRange=UTILS.randInt(obj.scale/2.5,obj.scale/1.7))*Math.cos(rotVal*i),tmpRange*Math.sin(rotVal*i),UTILS.randInt(4,5),tmpContext,!0)}else if("wood wall"==obj.name||"stone wall"==obj.name||"castle wall"==obj.name){tmpContext.fillStyle="castle wall"==obj.name?"#83898e":"wood wall"==obj.name?"#a5974c":"#939393";var endX="castle wall"==obj.name?4:3;renderStar(tmpContext,endX,1.1*obj.scale,1.1*obj.scale),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="castle wall"==obj.name?"#9da4aa":"wood wall"==obj.name?"#c9b758":"#bcbcbc",renderStar(tmpContext,endX,.65*obj.scale,.65*obj.scale),tmpContext.fill()}else if("spikes"==obj.name||"greater spikes"==obj.name||"poison spikes"==obj.name||"spinning spikes"==obj.name){tmpContext.fillStyle="poison spikes"==obj.name?"#7b935d":"#939393";var tmpScale=.6*obj.scale;renderStar(tmpContext,"spikes"==obj.name?5:6,obj.scale,tmpScale),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#a5974c",renderCircle(0,0,tmpScale,tmpContext),player&&obj.owner&&player.sid!=obj.owner.sid&&findAllianceBySid(obj.owner.sid),tmpContext.fillStyle="#c9b758",renderCircle(0,0,tmpScale/2,tmpContext,!0)}else if("windmill"==obj.name||"faster windmill"==obj.name||"power mill"==obj.name)tmpContext.fillStyle="#a5974c",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fillStyle="#c9b758",renderRectCircle(0,0,1.5*obj.scale,29,4,tmpContext),tmpContext.fillStyle="#a5974c",renderCircle(0,0,.5*obj.scale,tmpContext);else if("mine"==obj.name)tmpContext.fillStyle="#939393",renderStar(tmpContext,3,obj.scale,obj.scale),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#bcbcbc",renderStar(tmpContext,3,.55*obj.scale,.65*obj.scale),tmpContext.fill();else if("sapling"==obj.name)for(i=0;i<2;++i)renderStar(tmpContext,7,tmpScale=obj.scale*(i?.5:1),.7*tmpScale),tmpContext.fillStyle=i?"#b4db62":"#9ebf57",tmpContext.fill(),i||tmpContext.stroke();else if("pit trap"==obj.name)tmpContext.fillStyle="#a5974c",renderStar(tmpContext,3,1.1*obj.scale,1.1*obj.scale),tmpContext.fill(),tmpContext.stroke(),player&&obj.owner&&player.sid!=obj.owner.sid&&findAllianceBySid(obj.owner.sid),tmpContext.fillStyle=outlineColor,renderStar(tmpContext,3,.65*obj.scale,.65*obj.scale),tmpContext.fill();else if("boost pad"==obj.name)tmpContext.fillStyle="#7e7f82",renderRect(0,0,2*obj.scale,2*obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#dbd97d",endY=+obj.scale,l=(l=tmpContext)||mainContext,leafDir=endY*(Math.sqrt(3)/2),l.beginPath(),l.moveTo(0,-leafDir/2),l.lineTo(-endY/2,leafDir/2),l.lineTo(endY/2,leafDir/2),l.lineTo(0,-leafDir/2),l.fill(),l.closePath();else if("turret"==obj.name){tmpContext.fillStyle="#a5974c",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#939393";renderRect(0,-25,.9*obj.scale,50,tmpContext),renderCircle(0,0,.6*obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke()}else if("platform"==obj.name){tmpContext.fillStyle="#cebd5f";for(var tmpS=2*obj.scale,tmpW=tmpS/4,tmpX=-obj.scale/2,i=0;i<4;++i)renderRect(tmpX-tmpW/2,0,tmpW,2*obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpX+=tmpS/4}else"healing pad"==obj.name?(tmpContext.fillStyle="#7e7f82",renderRect(0,0,2*obj.scale,2*obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#db6e6e",renderRectCircle(0,0,.65*obj.scale,20,4,tmpContext,!0)):"spawn pad"==obj.name?(tmpContext.fillStyle="#7e7f82",renderRect(0,0,2*obj.scale,2*obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.fillStyle="#71aad6",renderCircle(0,0,.6*obj.scale,tmpContext)):"blocker"==obj.name?(tmpContext.fillStyle="#7e7f82",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.rotate(Math.PI/4),tmpContext.fillStyle="#db6e6e",renderRectCircle(0,0,.65*obj.scale,20,4,tmpContext,!0)):"teleporter"==obj.name&&(tmpContext.fillStyle="#7e7f82",renderCircle(0,0,obj.scale,tmpContext),tmpContext.fill(),tmpContext.stroke(),tmpContext.rotate(Math.PI/4),tmpContext.fillStyle="#d76edb",renderCircle(0,0,.5*obj.scale,tmpContext,!0));tmpSprite=tmpCanvas,asIcon||(itemSprites[obj.id]=tmpSprite)}return tmpSprite}function renderCircle(x,y,scale,tmpContext,dontStroke,dontFill){(tmpContext=tmpContext||mainContext).beginPath(),tmpContext.arc(x,y,scale,0,2*Math.PI),dontFill||tmpContext.fill(),dontStroke||tmpContext.stroke()}function renderStar(ctxt,spikes,outer,inner){var x,y,rot=Math.PI/2*3,step=Math.PI/spikes;ctxt.beginPath(),ctxt.moveTo(0,-outer);for(var i=0;i<spikes;i++)x=Math.cos(rot)*outer,y=Math.sin(rot)*outer,ctxt.lineTo(x,y),rot+=step,x=Math.cos(rot)*inner,y=Math.sin(rot)*inner,ctxt.lineTo(x,y),rot+=step;ctxt.lineTo(0,-outer),ctxt.closePath()}function renderRect(x,y,w,h,ctxt,stroke){ctxt.fillRect(x-w/2,y-h/2,w,h),stroke||ctxt.strokeRect(x-w/2,y-h/2,w,h)}function renderRectCircle(x,y,s,sw,seg,ctxt,stroke){ctxt.save(),ctxt.translate(x,y),seg=Math.ceil(seg/2);for(var i=0;i<seg;i++)renderRect(0,0,2*s,sw,ctxt,stroke),ctxt.rotate(Math.PI/seg);ctxt.restore()}var loadObjects=[];function loadGameObject(data){for(var i=0;i<data.length;){if(objectManager.add(data[i],data[i+1],data[i+2],data[i+3],data[i+4],data[i+5],items.list[data[i+6]],!0,0<=data[i+7]?{sid:data[i+7]}:null),15==data[i+6]&&Math.hypot(data[i+2]-player.y2,data[i+1]-player.x2)<=85&&player.sid!=data[i+7]&&!findAllianceBySid(data[i+7])){y=x=void 0;var x=data[i+1],y=data[i+2];if(trapAim=Math.atan2(y-player.y2,x-player.x2),enemyCount.length&&tmpObjDist(nearDist,player)<=250)for(let i=-45;i<=45;i+=90)checkPlc(2,trapAim+rad(i)+Math.PI);else for(let i=-45;i<=45;i+=90)checkPlc(1,trapAim+rad(i)+Math.PI)}data[i+7]&&data[i+6]&&(items.list[data[i+6]].dmg||items.list[data[i+6]].trap||items.list[data[i+6]].teleport)&&player.sid==data[i+7]&&loadObjects.push(data),i+=8}}function wiggleGameObject(dir,sid){(tmpObj=findObjectBySid(sid))&&(tmpObj.xWiggle+=config.gatherWiggle*Math.cos(dir),tmpObj.yWiggle+=config.gatherWiggle*Math.sin(dir))}function shootTurret(sid,dir){(tmpObj=findObjectBySid(sid))&&(tmpObj.dir=dir,tmpObj.xWiggle+=config.gatherWiggle*Math.cos(dir+Math.PI),tmpObj.yWiggle+=config.gatherWiggle*Math.sin(dir+Math.PI))}function addProjectile(x,y,dir,range,speed,indx,layer,sid){player.scale;inWindow&&(projectileManager.addProjectile(x,y,dir,range,speed,indx,null,null,layer).sid=sid)}function remProjectile(sid,range){for(var i=0;i<projectiles.length;++i)projectiles[i].sid==sid&&(projectiles[i].range=range)}function animateAI(sid){(tmpObj=findAIBySID(sid))&&tmpObj.startAnim()}function loadAI(data){for(var i=0;i<ais.length;++i)ais[i].forcePos=!ais[i].visible,ais[i].visible=!1;if(data)for(var tmpTime=Date.now(),i=0;i<data.length;)(tmpObj=findAIBySID(data[i]))?(tmpObj.index=data[i+1],tmpObj.t1=void 0===tmpObj.t2?tmpTime:tmpObj.t2,tmpObj.t2=tmpTime,tmpObj.x1=tmpObj.x,tmpObj.y1=tmpObj.y,tmpObj.x2=data[i+2],tmpObj.y2=data[i+3],tmpObj.d1=void 0===tmpObj.d2?data[i+4]:tmpObj.d2,tmpObj.d2=data[i+4],tmpObj.health=data[i+5],tmpObj.dt=0):((tmpObj=aiManager.spawn(data[i+2],data[i+3],data[i+4],data[i+1])).x2=tmpObj.x,tmpObj.y2=tmpObj.y,tmpObj.d2=tmpObj.dir,tmpObj.health=data[i+5],aiManager.aiTypes[data[i+1]].name||(tmpObj.name=config.cowNames[data[i+6]]),tmpObj.forcePos=!0,tmpObj.sid=data[i]),tmpObj.visible=!0,i+=7}var aiSprites={};function isOnScreen(x,y,s){return 0<=x+s&&x-s<=maxScreenWidth&&0<=y+s&&y-s<=maxScreenHeight}var oldPlayer={x2:0,y2:0},mill={x2:0,y2:0},wpc=0,plcmill=!1,aimToNear=!1,inTrap=!1,trapAim=0,waitHit=!1,isReloaded=!1,turretInRange=0,bullTickCount=0,testtest=!1,cBull=!1,setAcc=21,autoBullSpam=!0,isSpamming=!1;function addPlayer(data,isYou){var tmpPlayer=function(id){for(var i=0;i<players.length;++i)if(players[i].id==id)return players[i];return null}(data[0]);tmpPlayer||(tmpPlayer=new Player(data[0],data[1],config,UTILS,projectileManager,objectManager,players,ais,items,hats,accessories),players.push(tmpPlayer)),tmpPlayer.spawn(isYou?moofoll:null),tmpPlayer.visible=!1,tmpPlayer.x2=void 0,tmpPlayer.y2=void 0,tmpPlayer.pR=1,tmpPlayer.sR=1,tmpPlayer.tR=1,tmpPlayer.primaryIndex=0,tmpPlayer.secondaryIndex=0,tmpPlayer.primaryVariant=0,tmpPlayer.secondaryVariant=0,tmpPlayer.setData(data),isYou&&(camX=(player=tmpPlayer).x,camY=player.y,updateItems(),updateStatusDisplay(),updateAge(),updateUpgrades(0),gameUI.style.display="block")}function removePlayer(id){for(var i=0;i<players.length;i++)if(players[i].id==id){players.splice(i,1);break}}function updateItemCounts(index,value){player&&(player.itemCounts[index]=value)}function updatePlayerValue(index,value,updateView){player&&(player[index]=value,updateView)&&updateStatusDisplay()}var showHeal=!1;function updateHealth(sid,value){if(tmpObj=findPlayerBySID(sid)){let damn=value-tmpObj.health;if(0<damn)tmpObj.hitTime&&(sid=Date.now()-tmpObj.hitTime,tmpObj.hitTime=0,sid<=120?(tmpObj.shameCount++,8<=tmpObj.shameCount&&(tmpObj.shameCount=5)):(tmpObj.shameCount-=2,tmpObj.shameCount<=0&&(tmpObj.shameCount=0)));else if(damn<0&&(tmpObj.hitTime=Date.now(),tmpObj==player)){7==player.skinIndex&&(-5==damn||13==player.tailIndex&&-2==damn)&&(bullTickCount=tickCount,0);sid=!(!enemyCount.length||10!=nearDist.secondaryIndex&&11!=nearDist.secondaryIndex&&14!=nearDist.secondaryIndex);enemyCount.length&&9!=nearDist.secondaryIndex&&12!=nearDist.secondaryIndex&&13!=nearDist.secondaryIndex&&nearDist.secondaryIndex;if(sid?damn<-9&&6!=player.skinIndex&&tmpObjDist(nearDist,player)<=300&&1==nearDist.pR:damn<(6==player.skinIndex?-31:-25)&&tmpObjDist(nearDist,player)<=300&&enemyCount.length&&1==nearDist.pR)if(player.shameCount<5)for(let i=0;i<applCxC(damn);i++)plc(0,getAttackDir());else setTickout(()=>{for(let i=0;i<applCxC(damn);i++)plc(0,getAttackDir())},window.pingTime<120?2:1);else setTickout(()=>{for(let i=0;i<applCxC(damn);i++)plc(0,getAttackDir())},window.pingTime<120?2:1)}tmpObj!=player&&0<damn&&showHeal&&textManager.showText(tmpObj.x,tmpObj.y,50,.18,500,Math.abs(Math.round(damn)),"#8ecc51"),tmpObj.health=value}}function applCxC(value){return 45!=player.skinIndex&&56!=player.skinIndex?0==player.items[0]?value<-80?5:value<-60?4:value<-40?3:value<-20?2:1:1==player.items[0]?value<-80?3:value<-40?2:1:2!=player.items[0]||value<-90?4:value<-60?3:value<-30?2:1:0}function rad(ang){return ang*(Math.PI/180)}function plc(id,ang){var item=items.list[player.items[id]];(null==player.itemCounts[item.group.id]||player.itemCounts[item.group.id]<(!config.isSandbox&&item.group.limit||99))&&(selectToBuild(player.items[id]),io.send("c",1,ang),selectToBuild(wpc,!0))}function checkPlc(id,ang){var item=items.list[player.items[id]],tmpS=player.scale+item.scale+(item.placeOffset||0),tmpX=player.x+tmpS*Math.cos(ang),tmpS=player.y+tmpS*Math.sin(ang);objectManager.checkItemLocation(tmpX,tmpS,item.scale,.6,item.id,!1,player)&&(item&&null==player.itemCounts[item.group.id]||player.itemCounts[item.group.id]<(!config.isSandbox&&item.group.limit||99))&&(selectToBuild(player.items[id]),io.send("c",1,ang),selectToBuild(wpc,!0),setTickout(()=>{0},1))}var enemyCount=[],nearDist=[],nearAim=0,tickCount=0,tickLow=[],isHammer=!1,isShield=!1;function updatePlayers(data){enemyCount=[],nearDist=[],nearAim=0,tickCount++;for(var tmpTime=Date.now(),i=0;i<players.length;++i)players[i].forcePos=!players[i].visible,players[i].visible=!1;for(i=0;i<data.length;)(tmpObj=findPlayerBySID(data[i]))&&(tmpObj.t1=void 0===tmpObj.t2?tmpTime:tmpObj.t2,tmpObj.t2=tmpTime,tmpObj.x1=tmpObj.x,tmpObj.y1=tmpObj.y,tmpObj.x2=data[i+1],tmpObj.y2=data[i+2],tmpObj.d1=void 0===tmpObj.d2?data[i+3]:tmpObj.d2,tmpObj.d2=data[i+3],tmpObj.dt=0,tmpObj.buildIndex=data[i+4],tmpObj.weaponIndex=data[i+5],tmpObj.weaponVariant=data[i+6],tmpObj.team=data[i+7],tmpObj.isLeader=data[i+8],tmpObj.skinIndex=data[i+9],tmpObj.tailIndex=data[i+10],tmpObj.iconIndex=data[i+11],tmpObj.zIndex=data[i+12],tmpObj.visible=!0,tmpObj==player||tmpObj.team&&tmpObj.team==player.team||enemyCount.push(tmpObj),function(tmpObj){tmpObj.weaponIndex<9?(tmpObj.primaryIndex=tmpObj==player?player.weapons[0]:tmpObj.weaponIndex,tmpObj.primaryVariant=tmpObj.weaponVariant,tmpObj.weaponIndex==tmpObj.primaryIndex&&tmpObj.buildIndex<0&&(tmpObj.pR=Math.min(1,tmpObj.pR+1e3/config.serverUpdateRate/items.weapons[tmpObj.primaryIndex].speed))):8<tmpObj.weaponIndex&&(tmpObj.secondaryIndex=tmpObj==player?player.weapons[1]:tmpObj.weaponIndex,tmpObj.secondaryVariant=tmpObj.weaponVariant,tmpObj.weaponIndex==tmpObj.secondaryIndex)&&tmpObj.buildIndex<0&&(tmpObj.sR=Math.min(1,tmpObj.sR+1e3/config.serverUpdateRate/items.weapons[tmpObj.secondaryIndex].speed));tmpObj.tR=Math.min(1,tmpObj.tR+1e3/config.serverUpdateRate/2500)}(tmpObj)),i+=13;isNight?isNight&&(dayCycle<.35&&(isNight=!1),dayCycle-=15e-5):dayCycle+=1e-4,.55<dayCycle&&(isNight=!0),tickCount%36==0&&window.pingTime,isHammer=10==player.weapons[1],enemyCount.length&&(nearDist=enemyCount.sort(function(a,b){return tmpObjDist(a,player)-tmpObjDist(b,player)})[0]),nearAim=enemyCount.length?tmpObjLoc(nearDist,player):getAttackDir(),window.nearAim=nearAim,window.nearDist=nearDist;var trap1,ang,item,tmpS,tmpX;if(isShield=11==nearDist.weaponIndex&&function(a,b){b=Math.abs(b-a)%(2*Math.PI);return b>Math.PI?2*Math.PI-b:b}(tmpObjLoc(nearDist,player),nearDist.d2)<=config.shieldAngle,ae1?plc(0,getAttackDir()):ae2?plc(4,getAttackDir()):ae3?plc(2,getAttackDir()):ae4&&plc(5,getAttackDir()),testtest&&(testtest=!1,io.send("ch",enemyCount.length)),inTrap||instaKill||spikeTick||waitSpikeTick||(lC?(waitHit||1!=player.pR||(waitHit=!0,io.send("7",1),buyEquip(grinder?40:7,0),setTickout(()=>{waitHit=!1,io.send("7",1),buyEquip(turretInRange.length?22:cBull&&!grinder&&21==player.tailIndex&&(4==nearDist.primaryIndex||5==nearDist.primaryIndex&&nearDist.primaryVariant<2)&&(10==nearDist.secondaryIndex||14==nearDist.secondaryIndex)&&player.shameCount<4&&enemyCount.length&&tmpObjDist(nearDist,player)<=250?11:6,0)},1)),wpc=player.weapons[0],player.weaponIndex!=player.weapons[0]&&selectToBuild(player.weapons[0],!0)):rC&&(waitHit||1!=(10==player.weapons[1]?player.sR:player.pR)||(waitHit=!0,io.send("7",1),buyEquip(40,0),setTickout(()=>{waitHit=!1,io.send("7",1),buyEquip(turretInRange.length?22:6,0)},1)),wpc=10==player.weapons[1]?player.weapons[1]:player.weapons[0],player.weaponIndex!=(10==player.weapons[1]?player.weapons[1]:player.weapons[0]))&&selectToBuild(10==player.weapons[1]?player.weapons[1]:player.weapons[0],!0)),waitInsta&&tmpObjDist(nearDist,player)<items.weapons[10==player.weapons[1]?player.weapons[1]:player.weapons[0]].range+(player.scale+nearDist.scale)&&1==player.pR&&1==player.sR&&6!=nearDist.skinIndex&&22!=nearDist.skinIndex&&!isShield&&(aimToNear=instaKill=!(waitInsta=!1),wpc=player.weapons[1],selectToBuild(player.weapons[1],!0),buyEquip(53,0),sendAutoGather(),setTickout(()=>{wpc=player.weapons[0],selectToBuild(player.weapons[0],!0),buyEquip(7,0),setTickout(()=>{sendAutoGather(),aimToNear=instaKill=!1,buyEquip(turretInRange.length?22:6,0)},1)},1)),waitSpikeTick&&(waitSpikeTick=!1,instaKill||(aimToNear=spikeTick=!0,buyEquip(7,0),wpc=player.weapons[0],selectToBuild(player.weapons[0],!0),io.send("7",1),setTickout(()=>{io.send("7",1),aimToNear=spikeTick=!1,buyEquip(turretInRange.length?22:6,0)},1))),gameObjects.length&&(turretInRange=gameObjects.filter(e=>"turret"==e.name&&player.sid!=e.owner.sid&&!findAllianceBySid(e.owner.sid)&&objDist(e,player)<=700&&e.active),trap1=gameObjects.filter(e=>e.trap).sort(function(a,b){return Math.hypot(a.y-player.y2,a.x-player.x2)-Math.hypot(b.y-player.y2,b.x-player.x2)})[0])&&(trapAim=Math.atan2(trap1.y-player.y2,trap1.x-player.x2),player.sid!=trap1.owner.sid&&!findAllianceBySid(trap1.owner.sid)&&Math.hypot(trap1.y-player.y2,trap1.x-player.x2)<=50&&trap1.active?(inTrap=!0,spikeTick||instaKill||(wpc=isHammer?player.weapons[1]:player.weapons[0],(player.weaponIndex!=isHammer?player.weapons[1]:player.weapons[0])&&selectToBuild(isHammer?player.weapons[1]:player.weapons[0],!0),1!=(isHammer?player.sR:player.pR))||waitHit||(waitHit=!0,buyEquip(40,0),io.send("7",1),io.send("2",trapAim),setTickout(()=>{io.send("7",1),waitHit=!1,buyEquip(turretInRange.length?22:6,0)},1))):inTrap=!1),!(!autoBullSpam||inTrap||waitSpikeTick||spikeTick||isPress||instaKill)&&player.alive&&tmpObjDist(nearDist,player)<items.weapons[player.weapons[0]].range+(player.scale+nearDist.scale)?(isSpamming=place2=!0,waitHit||1!=player.pR||(waitHit=!0,io.send("7",1),io.send("2",nearAim),buyEquip(7,0),setTickout(()=>{waitHit=!1,io.send("7",1),buyEquip(turretInRange.length?22:cBull&&!grinder&&21==player.tailIndex&&(4==nearDist.primaryIndex||5==nearDist.primaryIndex&&nearDist.primaryVariant<2)&&(10==nearDist.secondaryIndex||14==nearDist.secondaryIndex)&&player.shameCount<4&&enemyCount.length&&tmpObjDist(nearDist,player)<=250?11:6,0)},1)),wpc=player.weapons[0],player.weaponIndex!=player.weapons[0]&&selectToBuild(player.weapons[0],!0)):isSpamming=place2=!1,!spikeTick&&!waitSpikeTick&&!instaKill&&!isPress&&player.alive&&!ae1&&!ae2&&!ae3&&!ae4)if(player.y2>=config.mapScale/2-config.riverWidth/2&&player.y2<=config.mapScale/2+config.riverWidth/2)18==player.items[5]&&null!=isMoveDir&&checkPlc(5,isMoveDir);else if(gameObjects.length&&enemyCount.length){let nears={x:nearDist.x2,y:nearDist.y2,inTrap:!1};(trap1=gameObjects.filter(e=>e.trap).sort(function(a,b){return objDist(a,nears)-objDist(b,nears)})[0])?((player.sid==trap1.owner.sid||findAllianceBySid(trap1.owner.sid))&&objDist(trap1,nears)<=65&&trap1.active?nears.inTrap=!0:nears.inTrap=!1,tmpObjDist(nearDist,player)<=300&&(nears.inTrap?place2?(trap1=2,ang=nearAim,item=items.list[player.items[trap1]],tmpS=player.scale+item.scale+(item.placeOffset||0),tmpX=player.x+tmpS*Math.cos(ang),tmpS=player.y+tmpS*Math.sin(ang),console.log(tmpX+":"+tmpS),objectManager.checkItemLocation(tmpX,tmpS,item.scale,.6,item.id,!1,player)&&(console.log(objectManager.checkItemLocation(tmpX,tmpS,item.scale,.6,item.id,!1,player)),item&&null==player.itemCounts[item.group.id]||player.itemCounts[item.group.id]<(!config.isSandbox&&item.group.limit||99))&&(selectToBuild(player.items[trap1]),io.send("c",1,ang),selectToBuild(wpc,!0),setTickout(()=>{0},1))):checkPlc(2,nearAim):15==player.items[4]&&(config.isSandbox?checkPlc(place2?2:4,nearAim):checkPlc(4,nearAim)))):config.isSandbox&&15==player.items[4]&&checkPlc(4,getAttackDir()+Math.PI)}if(inTrap||spikeTick||waitSpikeTick||instaKill||isPress||isSpamming||!player.alive||(3!=player.weapons[0]&&4!=player.weapons[0]&&5!=player.weapons[0]||10!=player.weapons[1]&&14!=player.weapons[1]?player.sR<1?(isReloaded=!1,wpc=player.weapons[1],player.weaponIndex!=player.weapons[1]&&selectToBuild(player.weapons[1],!0)):1==player.sR&&player.pR<1?(isReloaded=!1,wpc=player.weapons[0],player.weaponIndex!=player.weapons[0]&&selectToBuild(player.weapons[0],!0)):1==player.sR&&1==player.pR?isReloaded||(wpc=player.weapons[0],player.weaponIndex!=player.weapons[0]&&selectToBuild(player.weapons[0],!0),isReloaded=!0):wpc=player.weaponIndex:player.pR<1?(isReloaded=!1,wpc=player.weapons[0],player.weaponIndex!=player.weapons[0]&&selectToBuild(player.weapons[0],!0)):1==player.pR&&player.sR<1?(isReloaded=!1,wpc=player.weapons[1],player.weaponIndex!=player.weapons[1]&&selectToBuild(player.weapons[1],!0)):1==player.pR&&1==player.sR?isReloaded||(wpc=player.weapons[1],player.weaponIndex!=player.weapons[1]&&selectToBuild(player.weapons[1],!0),isReloaded=!0):wpc=player.weaponIndex),!(oldPlayer.y2==player.y2&&oldPlayer.x2==player.x2||player.y2>=config.mapScale/2-config.riverWidth/2&&player.y2<=config.mapScale/2+config.riverWidth/2)){if(plcmill&&!inTrap&&!isSpamming&&94<tmpObjDist(mill,player)){let ang=tmpObjLoc(oldPlayer,player);plc(3,ang+rad(75.2)),plc(3,ang-rad(75.2)),plc(3,ang),mill.x2=player.x2,mill.y2=player.y2}oldPlayer.x2=player.x2,oldPlayer.y2=player.y2}tickLow[tickCount]&&tickLow[tickCount].forEach(e=>e()),"none"==storeMenu.style.display&&(isPress||inTrap||spikeTick||waitSpikeTick||instaKill||autoBullSpam&&tmpObjDist(nearDist,player)<=250?buyEquip(setAcc,1,!0):enemyCount.length&&tmpObjDist(nearDist,player)<=300&&(tickCount-bullTickCount)%config.serverUpdateRate==0?buyEquip(13,1,!0):buyEquip(11,1,!0)),aimToNear&&io.send("2",nearAim),myConfig.enemyCount=enemyCount.length,window.enemyCount=enemyCount,myConfig.nearAim=function(loc){return enemyCount.length?Math.atan2(nearDist.y2-loc.y,nearDist.x2-loc.x):player.d2},myConfig.clan=player.team,window.player=player}function setTickout(func,delay){"object"==typeof tickLow[tickCount+delay]?tickLow[tickCount+delay].push(func):tickLow[tickCount+delay]=[func]}function findPlayerBySID(sid){for(var i=0;i<players.length;++i)if(players[i].sid==sid)return players[i];return null}function findAIBySID(sid){for(var i=0;i<ais.length;++i)if(ais[i].sid==sid)return ais[i];return null}function findObjectBySid(sid){for(var i=0;i<gameObjects.length;++i)if(gameObjects[i].sid==sid)return gameObjects[i];return null}function findAllianceBySid(sid){for(let i=0;i<alliancePlayers.length;i+=2)if(alliancePlayers[i]==sid)return alliancePlayers[i]}var lastPing=-1;function pingSocketResponse(){var pingTime=Date.now()-lastPing;window.pingTime=pingTime,pingDisplay.innerText="Ping: "+pingTime+" ms"}function pingSocket(){lastPing=Date.now(),io.send("pp")}function serverShutdownNotice(countdown){var minutes;countdown<0||(minutes=Math.floor(countdown/60),countdown=("0"+(countdown=countdown%60)).slice(-2),shutdownDisplay.innerText="Server restarting in "+minutes+":"+countdown,shutdownDisplay.hidden=!1)}pingDisplay.style.left="50px",pingDisplay.style.display="block",document.body.appendChild(pingDisplay),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)};var animText=document.createElement("div"),mStatus=(animText.id="status",animText),spinDir=0;function openLink(link){window.open(link,"_blank")}SoundManager=config.mapScale/2,objectManager.add(0,SoundManager,200+SoundManager,0,config.treeScales[3],0),objectManager.add(1,SoundManager,SoundManager-480,0,config.treeScales[3],0),objectManager.add(2,300+SoundManager,450+SoundManager,0,config.treeScales[3],0),objectManager.add(3,SoundManager-950,SoundManager-130,0,config.treeScales[2],0),objectManager.add(4,SoundManager-750,SoundManager-400,0,config.treeScales[3],0),objectManager.add(5,SoundManager-700,400+SoundManager,0,config.treeScales[2],0),objectManager.add(6,800+SoundManager,SoundManager-200,0,config.treeScales[3],0),objectManager.add(7,SoundManager-260,340+SoundManager,0,config.bushScales[3],1),objectManager.add(8,760+SoundManager,310+SoundManager,0,config.bushScales[3],1),objectManager.add(9,SoundManager-800,100+SoundManager,0,config.bushScales[3],1),objectManager.add(10,SoundManager-800,300+SoundManager,0,items.list[4].scale,items.list[4].id,items.list[10]),objectManager.add(11,650+SoundManager,SoundManager-390,0,items.list[4].scale,items.list[4].id,items.list[10]),objectManager.add(12,SoundManager-400,SoundManager-450,0,config.rockScales[2],2),function doUpdate(){now=Date.now(),delta=now-lastUpdate,lastUpdate=now,updateGame(),window.requestAnimFrame(doUpdate),spinDir>2*Math.PI?spinDir=spinSpeed:spinDir+=spinSpeed,mStatus.style.position="absolute",mStatus.style.color="white",mStatus.textAlign="right",mStatus.style.top="20px",mStatus.style.right="20px",mStatus.style.right="100px",mStatus.style.display="block",mStatus.innerHTML="",document.body.appendChild(mStatus)}(),window.openLink=openLink,window.aJoinReq=aJoinReq,window.follmoo=function(){moofoll||(moofoll=!0,saveVal("moofoll",1))},window.kickFromClan=kickFromClan,window.sendJoin=sendJoin,window.leaveAlliance=leaveAlliance,window.createAlliance=createAlliance,window.storeBuy=storeBuy,window.storeEquip=storeEquip,window.showItemInfo=showItemInfo,window.selectSkinColor=function(index){selectColorIndex=index,skinColor=10==index?"constructor":index,updateSkinColorPicker()},window.changeStoreIndex=function(index){currentStoreIndex!=index&&(currentStoreIndex=index,generateStoreList())},window.config=config,window.FRVR=antiBug},"./src/js/config.js":function(module,exports,__webpack_require__){!function(process){module.exports.maxScreenWidth=2304,module.exports.maxScreenHeight=1296,module.exports.serverUpdateRate=9,module.exports.maxPlayers=process&&-1!=process.argv.indexOf("--largeserver")?80:50,module.exports.maxPlayersHard=module.exports.maxPlayers+10,module.exports.collisionDepth=6,module.exports.minimapRate=500,module.exports.colGrid=10,module.exports.clientSendRate=5,module.exports.healthBarWidth=50,module.exports.healthBarPad=4.5,module.exports.iconPadding=15,module.exports.iconPad=.9,module.exports.deathFadeout=3e3,module.exports.crownIconScale=60,module.exports.crownPad=35,module.exports.chatCountdown=3e3,module.exports.chatCooldown=500,module.exports.inSandbox=process&&"mm_exp"===process.env.VULTR_SCHEME,module.exports.isSandbox="sandbox.moomoo.io"==window.location.hostname,module.exports.maxAge=100,module.exports.gatherAngle=Math.PI/2.6,module.exports.gatherWiggle=10,module.exports.hitReturnRatio=.25,module.exports.hitAngle=Math.PI/2,module.exports.playerScale=35,module.exports.playerSpeed=.0016,module.exports.playerDecel=.993,module.exports.nameY=34,module.exports.skinColors=["#bf8f54","#cbb091","#896c4b","#fadadc","#ececec","#c37373","#4c4c4c","#ecaff7","#738cc3","#8bc373","#91b2db"],module.exports.animalCount=7,module.exports.aiTurnRandom=.06,module.exports.cowNames=["Sid","Steph","Bmoe","Romn","Jononthecool","Fiona","Vince","Nathan","Nick","Flappy","Ronald","Otis","Pepe","Mc Donald","Theo","Fabz","Oliver","Jeff","Jimmy","Helena","Reaper","Ben","Alan","Naomi","XYZ","Clever","Jeremy","Mike","Destined","Stallion","Allison","Meaty","Sophia","Vaja","Joey","Pendy","Murdoch","Theo","Jared","July","Sonia","Mel","Dexter","Quinn","Milky"],module.exports.shieldAngle=Math.PI/3,module.exports.weaponVariants=[{id:0,src:"",xp:0,val:1},{id:1,src:"_g",xp:3e3,val:1.1},{id:2,src:"_d",xp:7e3,val:1.18},{id:3,src:"_r",poison:!0,xp:12e3,val:1.18}],module.exports.fetchVariant=function(player){for(var tmpXP=player.weaponXP[player.weaponIndex]||0,i=module.exports.weaponVariants.length-1;0<=i;--i)if(tmpXP>=module.exports.weaponVariants[i].xp)return module.exports.weaponVariants[i]},module.exports.resourceTypes=["wood","food","stone","points"],module.exports.areaCount=7,module.exports.treesPerArea=9,module.exports.bushesPerArea=3,module.exports.totalRocks=32,module.exports.goldOres=7,module.exports.riverWidth=724,module.exports.riverPadding=114,module.exports.waterCurrent=.0011,module.exports.waveSpeed=1e-4,module.exports.waveMax=1.3,module.exports.treeScales=[150,160,165,175],module.exports.bushScales=[80,85,95],module.exports.rockScales=[80,85,90],module.exports.snowBiomeTop=2400,module.exports.snowSpeed=.75,module.exports.maxNameLength=15,module.exports.mapScale=14400,module.exports.mapPingScale=40,module.exports.mapPingTime=2200}.call(this,__webpack_require__("./node_modules/process/browser.js"))},"./src/js/data/ai.js":function(module,exports){var PI2=2*Math.PI;module.exports=function(sid,objectManager,players,items,UTILS,config,scoreCallback,server){this.sid=sid,this.isAI=!0,this.nameIndex=UTILS.randInt(0,config.cowNames.length-1),this.init=function(x,y,dir,index,data){this.x=x,this.y=y,this.startX=data.fixedSpawn?x:null,this.startY=data.fixedSpawn?y:null,this.xVel=0,this.yVel=0,this.zIndex=0,this.dir=dir,this.dirPlus=0,this.index=index,this.src=data.src,data.name&&(this.name=data.name),this.weightM=data.weightM,this.speed=data.speed,this.killScore=data.killScore,this.turnSpeed=data.turnSpeed,this.scale=data.scale,this.maxHealth=data.health,this.leapForce=data.leapForce,this.health=this.maxHealth,this.chargePlayer=data.chargePlayer,this.viewRange=data.viewRange,this.drop=data.drop,this.dmg=data.dmg,this.hostile=data.hostile,this.dontRun=data.dontRun,this.hitRange=data.hitRange,this.hitDelay=data.hitDelay,this.hitScare=data.hitScare,this.spriteMlt=data.spriteMlt,this.nameScale=data.nameScale,this.colDmg=data.colDmg,this.noTrap=data.noTrap,this.spawnDelay=data.spawnDelay,this.hitWait=0,this.waitCount=1e3,this.moveCount=0,this.targetDir=0,this.active=!0,this.alive=!0,this.runFrom=null,this.chargeTarget=null,this.dmgOverTime={}};var timerCount=0,tmpRatio=(this.update=function(delta){if(this.active)if(this.spawnCounter)this.spawnCounter-=delta,this.spawnCounter<=0&&(this.spawnCounter=0,this.x=this.startX||UTILS.randInt(0,config.mapScale),this.y=this.startY||UTILS.randInt(0,config.mapScale));else{(timerCount-=delta)<=0&&(this.dmgOverTime.dmg&&(this.changeHealth(-this.dmgOverTime.dmg,this.dmgOverTime.doer),--this.dmgOverTime.time,this.dmgOverTime.time<=0)&&(this.dmgOverTime.dmg=0),timerCount=1e3);var charging=!1,slowMlt=1;if(!this.zIndex&&!this.lockMove&&this.y>=config.mapScale/2-config.riverWidth/2&&this.y<=config.mapScale/2+config.riverWidth/2&&(slowMlt=.33,this.xVel+=config.waterCurrent*delta),this.lockMove)this.xVel=0,this.yVel=0;else if(0<this.waitCount){if(this.waitCount-=delta,this.waitCount<=0)if(this.chargePlayer){for(var tmpPlayer,bestDst,tmpDist,i=0;i<players.length;++i)!players[i].alive||players[i].skin&&players[i].skin.bullRepel||(tmpDist=UTILS.getDistance(this.x,this.y,players[i].x,players[i].y))<=this.viewRange&&(!tmpPlayer||tmpDist<bestDst)&&(bestDst=tmpDist,tmpPlayer=players[i]);tmpPlayer?(this.chargeTarget=tmpPlayer,this.moveCount=UTILS.randInt(8e3,12e3)):(this.moveCount=UTILS.randInt(1e3,2e3),this.targetDir=UTILS.randFloat(-Math.PI,Math.PI))}else this.moveCount=UTILS.randInt(4e3,1e4),this.targetDir=UTILS.randFloat(-Math.PI,Math.PI)}else 0<this.moveCount&&(slowMlt=this.speed*slowMlt,this.runFrom&&this.runFrom.active&&(!this.runFrom.isPlayer||this.runFrom.alive)?(this.targetDir=UTILS.getDirection(this.x,this.y,this.runFrom.x,this.runFrom.y),slowMlt*=1.42):this.chargeTarget&&this.chargeTarget.alive&&(this.targetDir=UTILS.getDirection(this.chargeTarget.x,this.chargeTarget.y,this.x,this.y),slowMlt*=1.75,charging=!0),this.hitWait&&(slowMlt*=.3),this.dir!=this.targetDir&&(this.dir%=PI2,netAngle=(this.dir-this.targetDir+PI2)%PI2,amnt=Math.min(Math.abs(netAngle-PI2),netAngle,this.turnSpeed*delta),netAngle=0<=netAngle-Math.PI?1:-1,this.dir+=netAngle*amnt+PI2),this.dir%=PI2,this.xVel+=slowMlt*delta*Math.cos(this.dir),this.yVel+=slowMlt*delta*Math.sin(this.dir),this.moveCount-=delta,this.moveCount<=0)&&(this.runFrom=null,this.chargeTarget=null,this.waitCount=this.hostile?1500:UTILS.randInt(1500,6e3));this.zIndex=0,this.lockMove=!1;for(var netAngle=UTILS.getDistance(0,0,this.xVel*delta,this.yVel*delta),depth=Math.min(4,Math.max(1,Math.round(netAngle/40))),tMlt=1/depth,i=0;i<depth;++i){this.xVel&&(this.x+=this.xVel*delta*tMlt),this.yVel&&(this.y+=this.yVel*delta*tMlt),tmpList=objectManager.getGridArrays(this.x,this.y,this.scale);for(var x=0;x<tmpList.length;++x)for(var y=0;y<tmpList[x].length;++y)tmpList[x][y].active&&objectManager.checkCollision(this,tmpList[x][y],tMlt)}var hitting=!1;if(0<this.hitWait&&(this.hitWait-=delta,this.hitWait<=0)){hitting=!0,this.hitWait=0,this.leapForce&&!UTILS.randInt(0,2)&&(this.xVel+=this.leapForce*Math.cos(this.dir),this.yVel+=this.leapForce*Math.sin(this.dir));for(var tmpList=objectManager.getGridArrays(this.x,this.y,this.hitRange),t=0;t<tmpList.length;++t)for(x=0;x<tmpList[t].length;++x)(tmpObj=tmpList[t][x]).health&&(tmpDst=UTILS.getDistance(this.x,this.y,tmpObj.x,tmpObj.y))<tmpObj.scale+this.hitRange&&(tmpObj.changeHealth(5*-this.dmg)&&objectManager.disableObj(tmpObj),objectManager.hitObj(tmpObj,UTILS.getDirection(this.x,this.y,tmpObj.x,tmpObj.y)));for(x=0;x<players.length;++x)players[x].canSee(this)&&server.send(players[x].id,"aa",this.sid)}if(charging||hitting)for(var tmpObj,tmpDst,tmpDir,i=0;i<players.length;++i)(tmpObj=players[i])&&tmpObj.alive&&(tmpDst=UTILS.getDistance(this.x,this.y,tmpObj.x,tmpObj.y),this.hitRange?!this.hitWait&&tmpDst<=this.hitRange+tmpObj.scale&&(hitting?(tmpDir=UTILS.getDirection(tmpObj.x,tmpObj.y,this.x,this.y),tmpObj.changeHealth(-this.dmg),tmpObj.xVel+=.6*Math.cos(tmpDir),tmpObj.yVel+=.6*Math.sin(tmpDir),this.runFrom=null,this.chargeTarget=null,this.waitCount=3e3,this.hitWait=UTILS.randInt(0,2)?0:600):this.hitWait=this.hitDelay):tmpDst<=this.scale+tmpObj.scale&&(tmpDir=UTILS.getDirection(tmpObj.x,tmpObj.y,this.x,this.y),tmpObj.changeHealth(-this.dmg),tmpObj.xVel+=.55*Math.cos(tmpDir),tmpObj.yVel+=.55*Math.sin(tmpDir)));this.xVel&&(this.xVel*=Math.pow(config.playerDecel,delta)),this.yVel&&(this.yVel*=Math.pow(config.playerDecel,delta));var amnt=this.scale;this.x-amnt<0?(this.x=amnt,this.xVel=0):this.x+amnt>config.mapScale&&(this.x=config.mapScale-amnt,this.xVel=0),this.y-amnt<0?(this.y=amnt,this.yVel=0):this.y+amnt>config.mapScale&&(this.y=config.mapScale-amnt,this.yVel=0)}},this.canSee=function(other){var dx;return!!other&&!(other.skin&&other.skin.invisTimer&&other.noMovTimer>=other.skin.invisTimer)&&(dx=Math.abs(other.x-this.x)-other.scale,other=Math.abs(other.y-this.y)-other.scale,dx<=config.maxScreenWidth/2*1.3)&&other<=config.maxScreenHeight/2*1.3},0),animIndex=0;this.animate=function(delta){0<this.animTime&&(this.animTime-=delta,this.animTime<=0?(this.animTime=0,this.dirPlus=0,animIndex=tmpRatio=0):0==animIndex?(tmpRatio+=delta/(this.animSpeed*config.hitReturnRatio),this.dirPlus=UTILS.lerp(0,this.targetAngle,Math.min(1,tmpRatio)),1<=tmpRatio&&(animIndex=tmpRatio=1)):(tmpRatio-=delta/(this.animSpeed*(1-config.hitReturnRatio)),this.dirPlus=UTILS.lerp(0,this.targetAngle,Math.max(0,tmpRatio))))},this.startAnim=function(){this.animTime=this.animSpeed=600,this.targetAngle=.8*Math.PI,animIndex=tmpRatio=0},this.changeHealth=function(val,doer,runFrom){if(this.active&&(this.health+=val,runFrom&&(this.hitScare&&!UTILS.randInt(0,this.hitScare)?(this.runFrom=runFrom,this.waitCount=0,this.moveCount=2e3):this.hostile&&this.chargePlayer&&runFrom.isPlayer?(this.chargeTarget=runFrom,this.waitCount=0,this.moveCount=8e3):this.dontRun||(this.runFrom=runFrom,this.waitCount=0,this.moveCount=2e3)),val<0&&this.hitRange&&UTILS.randInt(0,1)&&(this.hitWait=500),doer&&doer.canSee(this)&&val<0&&server.send(doer.id,"t",Math.round(this.x),Math.round(this.y),Math.round(-val),1),this.health<=0)&&(this.spawnDelay?(this.spawnCounter=this.spawnDelay,this.x=-1e6,this.y=-1e6):(this.x=this.startX||UTILS.randInt(0,config.mapScale),this.y=this.startY||UTILS.randInt(0,config.mapScale)),this.health=this.maxHealth,this.runFrom=null,doer)&&(scoreCallback(doer,this.killScore),this.drop))for(var i=0;i<this.drop.length;)doer.addResource(config.resourceTypes.indexOf(this.drop[i]),this.drop[i+1]),i+=2}}},"./src/js/data/aiManager.js":function(module,exports){module.exports=function(ais,AI,players,items,objectManager,config,UTILS,scoreCallback,server){this.aiTypes=[{id:0,src:"cow_1",killScore:150,health:500,weightM:.8,speed:95e-5,turnSpeed:.001,scale:72,drop:["food",50]},{id:1,src:"pig_1",killScore:200,health:800,weightM:.6,speed:85e-5,turnSpeed:.001,scale:72,drop:["food",80]},{id:2,name:"Bull",src:"bull_2",hostile:!0,dmg:20,killScore:1e3,health:1800,weightM:.5,speed:94e-5,turnSpeed:74e-5,scale:78,viewRange:800,chargePlayer:!0,drop:["food",100]},{id:3,name:"Bully",src:"bull_1",hostile:!0,dmg:20,killScore:2e3,health:2800,weightM:.45,speed:.001,turnSpeed:8e-4,scale:90,viewRange:900,chargePlayer:!0,drop:["food",400]},{id:4,name:"Wolf",src:"wolf_1",hostile:!0,dmg:8,killScore:500,health:300,weightM:.45,speed:.001,turnSpeed:.002,scale:84,viewRange:800,chargePlayer:!0,drop:["food",200]},{id:5,name:"Quack",src:"chicken_1",dmg:8,killScore:2e3,noTrap:!0,health:300,weightM:.2,speed:.0018,turnSpeed:.006,scale:70,drop:["food",100]},{id:6,name:"MOOSTAFA",nameScale:50,src:"enemy",hostile:!0,dontRun:!0,fixedSpawn:!0,spawnDelay:6e4,noTrap:!0,colDmg:100,dmg:40,killScore:8e3,health:18e3,weightM:.4,speed:7e-4,turnSpeed:.01,scale:80,spriteMlt:1.8,leapForce:.9,viewRange:1e3,hitRange:210,hitDelay:1e3,chargePlayer:!0,drop:["food",100]},{id:7,name:"Treasure",hostile:!0,nameScale:35,src:"crate_1",fixedSpawn:!0,spawnDelay:12e4,colDmg:200,killScore:5e3,health:2e4,weightM:.1,speed:0,turnSpeed:0,scale:70,spriteMlt:1},{id:8,name:"MOOFIE",src:"wolf_2",hostile:!0,fixedSpawn:!0,dontRun:!0,hitScare:4,spawnDelay:3e4,noTrap:!0,nameScale:35,dmg:10,colDmg:100,killScore:3e3,health:7e3,weightM:.45,speed:.0015,turnSpeed:.002,scale:90,viewRange:800,chargePlayer:!0,drop:["food",1e3]}],this.spawn=function(x,y,dir,index){for(var tmpObj,i=0;i<ais.length;++i)if(!ais[i].active){tmpObj=ais[i];break}return tmpObj||(tmpObj=new AI(ais.length,objectManager,players,items,UTILS,config,scoreCallback,server),ais.push(tmpObj)),tmpObj.init(x,y,dir,index,this.aiTypes[index]),tmpObj}}},"./src/js/data/gameObject.js":function(module,exports){module.exports=function(sid){this.sid=sid,this.init=function(x,y,dir,scale,type,data,owner){data=data||{},this.sentTo={},this.gridLocations=[],this.active=!0,this.doUpdate=data.doUpdate,this.x=x,this.y=y,this.dir=dir,this.xWiggle=0,this.yWiggle=0,this.scale=scale,this.type=type,this.id=data.id,this.owner=owner,this.name=data.name,this.isItem=null!=this.id,this.group=data.group,this.health=data.health,this.layer=2,null!=this.group?this.layer=this.group.layer:0==this.type?this.layer=3:2==this.type?this.layer=0:4==this.type&&(this.layer=-1),this.colDiv=data.colDiv||1,this.blocker=data.blocker,this.ignoreCollision=data.ignoreCollision,this.dontGather=data.dontGather,this.hideFromEnemy=data.hideFromEnemy,this.friction=data.friction,this.projDmg=data.projDmg,this.dmg=data.dmg,this.pDmg=data.pDmg,this.pps=data.pps,this.zIndex=data.zIndex||0,this.turnSpeed=data.turnSpeed,this.req=data.req,this.trap=data.trap,this.healCol=data.healCol,this.teleport=data.teleport,this.boostSpeed=data.boostSpeed,this.projectile=data.projectile,this.shootRange=data.shootRange,this.shootRate=data.shootRate,this.shootCount=this.shootRate,this.spawnPoint=data.spawnPoint},this.changeHealth=function(amount,doer){return this.health+=amount,this.health<=0},this.getScale=function(sM,ig){return sM=sM||1,this.scale*(this.isItem||2==this.type||3==this.type||4==this.type?1:.6*sM)*(ig?1:this.colDiv)},this.visibleToPlayer=function(player){return!this.hideFromEnemy||this.owner&&(this.owner==player||this.owner.team&&player.team==this.owner.team)},this.update=function(delta){this.active&&(this.xWiggle&&(this.xWiggle*=Math.pow(.99,delta)),this.yWiggle&&(this.yWiggle*=Math.pow(.99,delta)),this.turnSpeed)&&!this.pps&&(this.dir+=this.turnSpeed*delta)}}},"./src/js/data/items.js":function(module,exports){module.exports.groups=[{id:0,name:"food",layer:0},{id:1,name:"walls",place:!0,limit:30,layer:0},{id:2,name:"spikes",place:!0,limit:15,layer:0},{id:3,name:"mill",place:!0,limit:7,layer:1},{id:4,name:"mine",place:!0,limit:1,layer:0},{id:5,name:"trap",place:!0,limit:6,layer:-1},{id:6,name:"booster",place:!0,limit:12,layer:-1},{id:7,name:"turret",place:!0,limit:2,layer:1},{id:8,name:"watchtower",place:!0,limit:12,layer:1},{id:9,name:"buff",place:!0,limit:4,layer:-1},{id:10,name:"spawn",place:!0,limit:1,layer:-1},{id:11,name:"sapling",place:!0,limit:2,layer:0},{id:12,name:"blocker",place:!0,limit:3,layer:-1},{id:13,name:"teleporter",place:!0,limit:2,layer:-1}],exports.projectiles=[{indx:0,layer:0,src:"arrow_1",dmg:25,speed:1.6,scale:103,range:1e3},{indx:1,layer:1,dmg:25,scale:20},{indx:0,layer:0,src:"arrow_1",dmg:35,speed:2.5,scale:103,range:1200},{indx:0,layer:0,src:"arrow_1",dmg:30,speed:2,scale:103,range:1200},{indx:1,layer:1,dmg:16,scale:20},{indx:0,layer:0,src:"bullet_1",dmg:50,speed:3.6,scale:160,range:1400}],exports.weapons=[{id:0,type:0,name:"tool hammer",desc:"tool for gathering all resources",src:"hammer_1",length:140,width:140,xOff:-3,yOff:18,dmg:25,range:65,gather:1,speed:300},{id:1,type:0,age:2,name:"hand axe",desc:"gathers resources at a higher rate",src:"axe_1",length:140,width:140,xOff:3,yOff:24,dmg:30,spdMult:1,range:70,gather:2,speed:400},{id:2,type:0,age:8,pre:1,name:"great axe",desc:"deal more damage and gather more resources",src:"great_axe_1",length:140,width:140,xOff:-8,yOff:25,dmg:35,spdMult:1,range:75,gather:4,speed:400},{id:3,type:0,age:2,name:"short sword",desc:"increased attack power but slower move speed",src:"sword_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:46,dmg:35,spdMult:.85,range:110,gather:1,speed:300},{id:4,type:0,age:8,pre:3,name:"katana",desc:"greater range and damage",src:"samurai_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:59,dmg:40,spdMult:.8,range:118,gather:1,speed:300},{id:5,type:0,age:2,name:"polearm",desc:"long range melee weapon",src:"spear_1",iPad:1.3,length:130,width:210,xOff:-8,yOff:53,dmg:45,knock:.2,spdMult:.82,range:142,gather:1,speed:700},{id:6,type:0,age:2,name:"bat",desc:"fast long range melee weapon",src:"bat_1",iPad:1.3,length:110,width:180,xOff:-8,yOff:53,dmg:20,knock:.7,range:110,gather:1,speed:300},{id:7,type:0,age:2,name:"daggers",desc:"really fast short range weapon",src:"dagger_1",iPad:.8,length:110,width:110,xOff:18,yOff:0,dmg:20,knock:.1,range:65,gather:1,hitSlow:.1,spdMult:1.13,speed:100},{id:8,type:0,age:2,name:"stick",desc:"great for gathering but very weak",src:"stick_1",length:140,width:140,xOff:3,yOff:24,dmg:1,spdMult:1,range:70,gather:7,speed:400},{id:9,type:1,age:6,name:"hunting bow",desc:"bow used for ranged combat and hunting",src:"bow_1",req:["wood",4],length:120,width:120,xOff:-6,yOff:0,projectile:0,spdMult:.75,speed:600},{id:10,type:1,age:6,name:"great hammer",desc:"hammer used for destroying structures",src:"great_hammer_1",length:140,width:140,xOff:-9,yOff:25,dmg:10,spdMult:.88,range:75,sDmg:7.5,gather:1,speed:400},{id:11,type:1,age:6,name:"wooden shield",desc:"blocks projectiles and reduces melee damage",src:"shield_1",length:120,width:120,shield:.2,xOff:6,yOff:0,spdMult:.7},{id:12,type:1,age:8,pre:9,name:"crossbow",desc:"deals more damage and has greater range",src:"crossbow_1",req:["wood",5],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,projectile:2,spdMult:.7,speed:700},{id:13,type:1,age:9,pre:12,name:"repeater crossbow",desc:"high firerate crossbow with reduced damage",src:"crossbow_2",req:["wood",10],aboveHand:!0,armS:.75,length:120,width:120,xOff:-4,yOff:0,projectile:3,spdMult:.7,speed:230},{id:14,type:1,age:6,name:"mc grabby",desc:"steals resources from enemies",src:"grab_1",length:130,width:210,xOff:-8,yOff:53,dmg:0,steal:250,knock:.2,spdMult:1.05,range:125,gather:0,speed:700},{id:15,type:1,age:9,pre:12,name:"musket",desc:"slow firerate but high damage and range",src:"musket_1",req:["stone",10],aboveHand:!0,rec:.35,armS:.6,hndS:.3,hndD:1.6,length:205,width:205,xOff:25,yOff:0,projectile:5,hideProjectile:!0,spdMult:.6,speed:1500}],module.exports.list=[{group:module.exports.groups[0],name:"apple",desc:"restores 20 health when consumed",req:["food",10],consume:function(doer){return doer.changeHealth(20,doer)},scale:22,holdOffset:15},{age:3,group:module.exports.groups[0],name:"cookie",desc:"restores 40 health when consumed",req:["food",15],consume:function(doer){return doer.changeHealth(40,doer)},scale:27,holdOffset:15},{age:7,group:module.exports.groups[0],name:"cheese",desc:"restores 30 health and another 50 over 5 seconds",req:["food",25],consume:function(doer){return!!(doer.changeHealth(30,doer)||doer.health<100)&&(doer.dmgOverTime.dmg=-10,(doer.dmgOverTime.doer=doer).dmgOverTime.time=5,!0)},scale:27,holdOffset:15},{group:module.exports.groups[1],name:"wood wall",desc:"provides protection for your village",req:["wood",10],projDmg:!0,health:380,scale:50,holdOffset:20,placeOffset:-5},{age:3,group:module.exports.groups[1],name:"stone wall",desc:"provides improved protection for your village",req:["stone",25],health:900,scale:50,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[1],name:"castle wall",desc:"provides powerful protection for your village",req:["stone",35],health:1500,scale:52,holdOffset:20,placeOffset:-5},{group:module.exports.groups[2],name:"spikes",desc:"damages enemies when they touch them",req:["wood",20,"stone",5],health:400,dmg:20,scale:49,spritePadding:-23,holdOffset:8,placeOffset:-5},{age:5,group:module.exports.groups[2],name:"greater spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",10],health:500,dmg:35,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{age:9,group:module.exports.groups[2],name:"poison spikes",desc:"poisons enemies when they touch them",req:["wood",35,"stone",15],health:600,dmg:30,pDmg:5,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{age:9,group:module.exports.groups[2],name:"spinning spikes",desc:"damages enemies when they touch them",req:["wood",30,"stone",20],health:500,dmg:45,turnSpeed:.003,scale:52,spritePadding:-23,holdOffset:8,placeOffset:-5},{group:module.exports.groups[3],name:"windmill",desc:"generates gold over time",req:["wood",50,"stone",10],health:400,pps:1,turnSpeed:.0016,spritePadding:25,iconLineMult:12,scale:45,holdOffset:20,placeOffset:5},{age:5,group:module.exports.groups[3],name:"faster windmill",desc:"generates more gold over time",req:["wood",60,"stone",20],health:500,pps:1.5,turnSpeed:.0025,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5},{age:8,group:module.exports.groups[3],name:"power mill",desc:"generates more gold over time",req:["wood",100,"stone",50],health:800,pps:2,turnSpeed:.005,spritePadding:25,iconLineMult:12,scale:47,holdOffset:20,placeOffset:5},{age:5,group:module.exports.groups[4],type:2,name:"mine",desc:"allows you to mine stone",req:["wood",20,"stone",100],iconLineMult:12,scale:65,holdOffset:20,placeOffset:0},{age:5,group:module.exports.groups[11],type:0,name:"sapling",desc:"allows you to farm wood",req:["wood",150],iconLineMult:12,colDiv:.5,scale:110,holdOffset:50,placeOffset:-15},{age:4,group:module.exports.groups[5],name:"pit trap",desc:"pit that traps enemies if they walk over it",req:["wood",30,"stone",30],trap:!0,ignoreCollision:!0,hideFromEnemy:!0,health:500,colDiv:.2,scale:50,holdOffset:20,placeOffset:-5},{age:4,group:module.exports.groups[6],name:"boost pad",desc:"provides boost when stepped on",req:["stone",20,"wood",5],ignoreCollision:!0,boostSpeed:1.5,health:150,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[7],doUpdate:!0,name:"turret",desc:"defensive structure that shoots at enemies",req:["wood",200,"stone",150],health:800,projectile:1,shootRange:700,shootRate:2200,scale:43,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[8],name:"platform",desc:"platform to shoot over walls and cross over water",req:["wood",20],ignoreCollision:!0,zIndex:1,health:300,scale:43,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[9],name:"healing pad",desc:"standing on it will slowly heal you",req:["wood",30,"food",10],ignoreCollision:!0,healCol:15,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{age:9,group:module.exports.groups[10],name:"spawn pad",desc:"you will spawn here when you die but it will dissapear",req:["wood",100,"stone",100],health:400,ignoreCollision:!0,spawnPoint:!0,scale:45,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[12],name:"blocker",desc:"blocks building in radius",req:["wood",30,"stone",25],ignoreCollision:!0,blocker:300,health:400,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5},{age:7,group:module.exports.groups[13],name:"teleporter",desc:"teleports you to a random point on the map",req:["wood",60,"stone",60],ignoreCollision:!0,teleport:!0,health:200,colDiv:.7,scale:45,holdOffset:20,placeOffset:-5}];for(var i=0;i<module.exports.list.length;++i)module.exports.list[i].id=i,module.exports.list[i].pre&&(module.exports.list[i].pre=i-module.exports.list[i].pre)},"./src/js/data/mapManager.js":function(module,exports){module.exports={}},"./src/js/data/objectManager.js":function(module,exports){var mathFloor=Math.floor,mathABS=Math.abs,mathCOS=Math.cos,mathSIN=Math.sin,mathSQRT=(Math.pow,Math.sqrt);module.exports=function(GameObject,gameObjects,UTILS,config,players,server){this.objects=gameObjects,this.grids={},this.updateObjects=[];var tmpX,tmpY,tmpGrid,tmpObj,tmpS=config.mapScale/config.colGrid,tmpArray=(this.setObjectGrids=function(obj){for(var objX=Math.min(config.mapScale,Math.max(0,obj.x)),objY=Math.min(config.mapScale,Math.max(0,obj.y)),x=0;x<config.colGrid;++x){tmpX=x*tmpS;for(var y=0;y<config.colGrid;++y)tmpY=y*tmpS,objX+obj.scale>=tmpX&&objX-obj.scale<=tmpX+tmpS&&objY+obj.scale>=tmpY&&objY-obj.scale<=tmpY+tmpS&&(this.grids[x+"_"+y]||(this.grids[x+"_"+y]=[]),this.grids[x+"_"+y].push(obj),obj.gridLocations.push(x+"_"+y))}},this.removeObjGrid=function(obj){for(var tmpIndx,i=0;i<obj.gridLocations.length;++i)0<=(tmpIndx=this.grids[obj.gridLocations[i]].indexOf(obj))&&this.grids[obj.gridLocations[i]].splice(tmpIndx,1)},this.disableObj=function(obj){obj.active=!1,server&&(obj.owner&&obj.pps&&(obj.owner.pps-=obj.pps),this.removeObjGrid(obj),0<=(obj=this.updateObjects.indexOf(obj)))&&this.updateObjects.splice(obj,1)},this.hitObj=function(tmpObj,tmpDir){for(var p=0;p<players.length;++p)players[p].active&&(tmpObj.sentTo[players[p].id]&&(tmpObj.active?players[p].canSee(tmpObj)&&server.send(players[p].id,"8",UTILS.fixTo(tmpDir,1),tmpObj.sid):server.send(players[p].id,"12",tmpObj.sid)),tmpObj.active||tmpObj.owner!=players[p]||players[p].changeItemCount(tmpObj.group.id,-1))},[]);this.getGridArrays=function(xPos,yPos,s){tmpX=mathFloor(xPos/tmpS),tmpY=mathFloor(yPos/tmpS),tmpArray.length=0;try{this.grids[tmpX+"_"+tmpY]&&tmpArray.push(this.grids[tmpX+"_"+tmpY]),(tmpX+1)*tmpS<=xPos+s&&((tmpGrid=this.grids[tmpX+1+"_"+tmpY])&&tmpArray.push(tmpGrid),tmpY&&yPos-s<=tmpY*tmpS?(tmpGrid=this.grids[tmpX+1+"_"+(tmpY-1)])&&tmpArray.push(tmpGrid):(tmpY+1)*tmpS<=yPos+s&&(tmpGrid=this.grids[tmpX+1+"_"+(tmpY+1)])&&tmpArray.push(tmpGrid)),tmpX&&xPos-s<=tmpX*tmpS&&((tmpGrid=this.grids[tmpX-1+"_"+tmpY])&&tmpArray.push(tmpGrid),tmpY&&yPos-s<=tmpY*tmpS?(tmpGrid=this.grids[tmpX-1+"_"+(tmpY-1)])&&tmpArray.push(tmpGrid):(tmpY+1)*tmpS<=yPos+s&&(tmpGrid=this.grids[tmpX-1+"_"+(tmpY+1)])&&tmpArray.push(tmpGrid)),(tmpY+1)*tmpS<=yPos+s&&(tmpGrid=this.grids[tmpX+"_"+(tmpY+1)])&&tmpArray.push(tmpGrid),tmpY&&yPos-s<=tmpY*tmpS&&(tmpGrid=this.grids[tmpX+"_"+(tmpY-1)])&&tmpArray.push(tmpGrid)}catch(e){}return tmpArray},this.add=function(sid,x,y,dir,s,type,data,setSID,owner){tmpObj=null;for(var i=0;i<gameObjects.length;++i)if(gameObjects[i].sid==sid){tmpObj=gameObjects[i];break}if(!tmpObj)for(i=0;i<gameObjects.length;++i)if(!gameObjects[i].active){tmpObj=gameObjects[i];break}tmpObj||(tmpObj=new GameObject(sid),gameObjects.push(tmpObj)),setSID&&(tmpObj.sid=sid),tmpObj.init(x,y,dir,s,type,data,owner),server&&(this.setObjectGrids(tmpObj),tmpObj.doUpdate)&&this.updateObjects.push(tmpObj)},this.disableBySid=function(sid){for(var i=0;i<gameObjects.length;++i)if(gameObjects[i].sid==sid){this.disableObj(gameObjects[i]);break}},this.removeAllItems=function(sid,server){for(var i=0;i<gameObjects.length;++i)gameObjects[i].active&&gameObjects[i].owner&&gameObjects[i].owner.sid==sid&&this.disableObj(gameObjects[i]);server&&server.broadcast("13",sid)},this.fetchSpawnObj=function(sid){for(var tmpLoc=null,i=0;i<gameObjects.length;++i)if((tmpObj=gameObjects[i]).active&&tmpObj.owner&&tmpObj.owner.sid==sid&&tmpObj.spawnPoint){tmpLoc=[tmpObj.x,tmpObj.y],this.disableObj(tmpObj),server.broadcast("12",tmpObj.sid),tmpObj.owner&&tmpObj.owner.changeItemCount(tmpObj.group.id,-1);break}return tmpLoc},this.checkItemLocation=function(x,y,s,sM,indx,ignoreWater,placer){for(var i=0;i<gameObjects.length;++i){var blockS=gameObjects[i].blocker||gameObjects[i].getScale(sM,gameObjects[i].isItem);if(gameObjects[i].active&&UTILS.getDistance(x,y,gameObjects[i].x,gameObjects[i].y)<s+blockS)return!1}return!(!ignoreWater&&18!=indx&&y>=config.mapScale/2-config.riverWidth/2&&y<=config.mapScale/2+config.riverWidth/2)},this.addProjectile=function(x,y,dir,range,indx){for(var tmpProj,tmpData=items.projectiles[indx],i=0;i<projectiles.length;++i)if(!projectiles[i].active){tmpProj=projectiles[i];break}tmpProj||(tmpProj=new Projectile(players,UTILS),projectiles.push(tmpProj)),tmpProj.init(indx,x,y,dir,tmpData.speed,range,tmpData.scale)},this.checkCollision=function(player,other,delta){delta=delta||1;var dx=player.x-other.x,dy=player.y-other.y,tmpLen=player.scale+other.scale;if(mathABS(dx)<=tmpLen||mathABS(dy)<=tmpLen){tmpLen=player.scale+(other.getScale?other.getScale():other.scale),dx=mathSQRT(dx*dx+dy*dy)-tmpLen;if(dx<=0)return other.ignoreCollision?!other.trap||player.noTrap||other.owner==player||other.owner&&other.owner.team&&other.owner.team==player.team?other.boostSpeed?(player.xVel+=delta*other.boostSpeed*(other.weightM||1)*mathCOS(other.dir),player.yVel+=delta*other.boostSpeed*(other.weightM||1)*mathSIN(other.dir)):other.healCol?player.healCol=other.healCol:other.teleport&&(player.x=UTILS.randInt(0,config.mapScale),player.y=UTILS.randInt(0,config.mapScale)):(player.lockMove=!0,other.hideFromEnemy=!1):(dy=UTILS.getDirection(player.x,player.y,other.x,other.y),UTILS.getDistance(player.x,player.y,other.x,other.y),other.isPlayer?(player.x+=(dx=-1*dx/2)*mathCOS(dy),player.y+=dx*mathSIN(dy),other.x-=dx*mathCOS(dy),other.y-=dx*mathSIN(dy)):(player.x=other.x+tmpLen*mathCOS(dy),player.y=other.y+tmpLen*mathSIN(dy),player.xVel*=.75,player.yVel*=.75),!other.dmg||other.owner==player||other.owner&&other.owner.team&&other.owner.team==player.team||(player.changeHealth(-other.dmg,other.owner,other),delta=1.5*(other.weightM||1),player.xVel+=delta*mathCOS(dy),player.yVel+=delta*mathSIN(dy),!other.pDmg||player.skin&&player.skin.poisonRes||(player.dmgOverTime.dmg=other.pDmg,player.dmgOverTime.time=5,player.dmgOverTime.doer=other.owner),player.colDmg&&other.health&&(other.changeHealth(-player.colDmg)&&this.disableObj(other),this.hitObj(other,UTILS.getDirection(player.x,player.y,other.x,other.y))))),other.zIndex>player.zIndex&&(player.zIndex=other.zIndex),!0}return!1}}},"./src/js/data/player.js":function(module,exports,__webpack_require__){var langFilter=new(__webpack_require__("./node_modules/bad-words/lib/badwords.js")),mathABS=(langFilter.addWords("jew","black","baby","child","white","porn","pedo","trump","clinton","hitler","nazi","gay","pride","sex","pleasure","touch","poo","kids","rape","white power","nigga","nig nog","doggy","rapist","boner","nigger","nigg","finger","nogger","nagger","nig","fag","gai","pole","stripper","penis","vagina","pussy","nazi","hitler","stalin","burn","chamber","cock","peen","dick","spick","nieger","die","satan","n|ig","nlg","cunt","c0ck","fag","lick","condom","anal","shit","phile","little","kids","free KR","tiny","sidney","ass","kill",".io","(dot)","[dot]","mini","whiore","whore","faggot","github","1337","666","satan","senpa","discord","d1scord","mistik",".io","senpa.io","sidney","sid","senpaio","vries","asa"),Math.abs),mathCOS=Math.cos,mathSIN=Math.sin,mathPOW=Math.pow,mathSQRT=Math.sqrt;module.exports=function(id,sid,config,UTILS,projectileManager,objectManager,players,ais,items,hats,accessories,server,scoreCallback,iconCallback){this.id=id,this.sid=sid,this.tmpScore=0,this.team=null,this.skinIndex=0,this.tailIndex=0,this.hitTime=0,this.tails={};for(var i=0;i<accessories.length;++i)accessories[i].price<=0&&(this.tails[accessories[i].id]=1);this.skins={};for(i=0;i<hats.length;++i)hats[i].price<=0&&(this.skins[hats[i].id]=1);this.points=0,this.dt=0,this.hidden=!1,this.itemCounts={},this.isPlayer=!0,this.pps=0,this.moveDir=void 0,this.skinRot=0,this.lastPing=0,this.iconIndex=0,this.skinColor=0,this.spawn=function(moofoll){this.active=!0,this.alive=!0,this.lockMove=!1,this.lockDir=!1,this.minimapCounter=0,this.chatCountdown=0,this.shameCount=0,this.shameTimer=0,this.sentTo={},this.gathering=0,this.autoGather=0,this.animTime=0,this.animSpeed=0,this.mouseState=0,this.buildIndex=-1,this.weaponIndex=0,this.dmgOverTime={},this.noMovTimer=0,this.maxXP=300,this.XP=0,this.age=1,this.kills=0,this.upgrAge=2,this.upgradePoints=0,this.x=0,this.y=0,this.zIndex=0,this.xVel=0,this.yVel=0,this.slowMult=1,this.dir=0,this.dirPlus=0,this.targetDir=0,this.targetAngle=0,this.maxHealth=100,this.health=this.maxHealth,this.scale=config.playerScale,this.speed=config.playerSpeed,this.resetMoveDir(),this.resetResources(moofoll),this.items=[0,3,6,10],this.weapons=[0],this.shootCount=0,this.weaponXP=[],this.reloads={}},this.resetMoveDir=function(){this.moveDir=void 0},this.resetResources=function(moofoll){for(var i=0;i<config.resourceTypes.length;++i)this[config.resourceTypes[i]]=moofoll?100:0},this.addItem=function(id){var tmpItem=items.list[id];if(tmpItem){for(var i=0;i<this.items.length;++i)if(items.list[this.items[i]].group==tmpItem.group)return this.buildIndex==this.items[i]&&(this.buildIndex=id),this.items[i]=id,!0;return this.items.push(id),!0}return!1},this.setUserData=function(data){if(data){this.name="unknown";var word,name=data.name+"",isProfane=!1,convertedName=(name=(name=(name=(name=name.slice(0,config.maxNameLength)).replace(/[^\w:\(\)\/? -]+/gim," ")).replace(/[^\x00-\x7F]/g," ")).trim()).toLowerCase().replace(/\s/g,"").replace(/1/g,"i").replace(/0/g,"o").replace(/5/g,"s");for(word of langFilter.list)if(-1!=convertedName.indexOf(word)){isProfane=!0;break}0<name.length&&!isProfane&&(this.name=name),this.skinColor=0,config.skinColors[data.skin]&&(this.skinColor=data.skin)}},this.getData=function(){return[this.id,this.sid,this.name,UTILS.fixTo(this.x,2),UTILS.fixTo(this.y,2),UTILS.fixTo(this.dir,3),this.health,this.maxHealth,this.scale,this.skinColor]},this.setData=function(data){this.id=data[0],this.sid=data[1],this.name=data[2],this.x=data[3],this.y=data[4],this.dir=data[5],this.health=data[6],this.maxHealth=data[7],this.scale=data[8],this.skinColor=data[9]};var timerCount=0,tmpRatio=(this.update=function(delta){if(this.alive&&(0<this.shameTimer&&(this.shameTimer-=delta,this.shameTimer<=0)&&(this.shameTimer=0,this.shameCount=0),(timerCount-=delta)<=0&&((regenAmount=(this.skin&&this.skin.healthRegen?this.skin.healthRegen:0)+(this.tail&&this.tail.healthRegen?this.tail.healthRegen:0))&&this.changeHealth(regenAmount,this),this.dmgOverTime.dmg&&(this.changeHealth(-this.dmgOverTime.dmg,this.dmgOverTime.doer),--this.dmgOverTime.time,this.dmgOverTime.time<=0)&&(this.dmgOverTime.dmg=0),this.healCol&&this.changeHealth(this.healCol,this),timerCount=1e3),this.alive)){this.slowMult<1&&(this.slowMult+=8e-4*delta,1<this.slowMult)&&(this.slowMult=1),this.noMovTimer+=delta,(this.xVel||this.yVel)&&(this.noMovTimer=0),this.lockMove?(this.xVel=0,this.yVel=0):(regenAmount=(0<=this.buildIndex?.5:1)*(items.weapons[this.weaponIndex].spdMult||1)*(this.skin&&this.skin.spdMult||1)*(this.tail&&this.tail.spdMult||1)*(!(this.y<=config.snowBiomeTop)||this.skin&&this.skin.coldM?1:config.snowSpeed)*this.slowMult,!this.zIndex&&this.y>=config.mapScale/2-config.riverWidth/2&&this.y<=config.mapScale/2+config.riverWidth/2&&(this.skin&&this.skin.watrImm?(regenAmount*=.75,this.xVel+=.4*config.waterCurrent*delta):(regenAmount*=.33,this.xVel+=config.waterCurrent*delta)),xVel=null!=this.moveDir?mathCOS(this.moveDir):0,yVel=null!=this.moveDir?mathSIN(this.moveDir):0,0!=(length=mathSQRT(xVel*xVel+yVel*yVel))&&(xVel/=length,yVel/=length),xVel&&(this.xVel+=xVel*this.speed*regenAmount*delta),yVel&&(this.yVel+=yVel*this.speed*regenAmount*delta)),this.zIndex=0,this.lockMove=!1,this.healCol=0;for(var length=UTILS.getDistance(0,0,this.xVel*delta,this.yVel*delta),depth=Math.min(4,Math.max(1,Math.round(length/40))),tMlt=1/depth,i=0;i<depth;++i){this.xVel&&(this.x+=this.xVel*delta*tMlt),this.yVel&&(this.y+=this.yVel*delta*tMlt);for(var tmpList=objectManager.getGridArrays(this.x,this.y,this.scale),x=0;x<tmpList.length;++x)for(var y=0;y<tmpList[x].length;++y)tmpList[x][y].active&&objectManager.checkCollision(this,tmpList[x][y],tMlt)}for(var yVel,regenAmount,xVel=players.indexOf(this),i=xVel+1;i<players.length;++i)players[i]!=this&&players[i].alive&&objectManager.checkCollision(this,players[i]);this.xVel&&(this.xVel*=mathPOW(config.playerDecel,delta),this.xVel<=.01)&&-.01<=this.xVel&&(this.xVel=0),this.yVel&&(this.yVel*=mathPOW(config.playerDecel,delta),this.yVel<=.01)&&-.01<=this.yVel&&(this.yVel=0),this.x-this.scale<0?this.x=this.scale:this.x+this.scale>config.mapScale&&(this.x=config.mapScale-this.scale),this.y-this.scale<0?this.y=this.scale:this.y+this.scale>config.mapScale&&(this.y=config.mapScale-this.scale),this.buildIndex<0&&(0<this.reloads[this.weaponIndex]?(this.reloads[this.weaponIndex]-=delta,this.gathering=this.mouseState):(this.gathering||this.autoGather)&&(yVel=!0,null!=items.weapons[this.weaponIndex].gather?this.gather(players):null!=items.weapons[this.weaponIndex].projectile&&this.hasRes(items.weapons[this.weaponIndex],this.skin?this.skin.projCost:0)?(this.useRes(items.weapons[this.weaponIndex],this.skin?this.skin.projCost:0),this.noMovTimer=0,xVel=items.weapons[this.weaponIndex].projectile,regenAmount=2*this.scale,length=this.skin&&this.skin.aMlt?this.skin.aMlt:1,items.weapons[this.weaponIndex].rec&&(this.xVel-=items.weapons[this.weaponIndex].rec*mathCOS(this.dir),this.yVel-=items.weapons[this.weaponIndex].rec*mathSIN(this.dir)),projectileManager.addProjectile(this.x+regenAmount*mathCOS(this.dir),this.y+regenAmount*mathSIN(this.dir),this.dir,items.projectiles[xVel].range*length,items.projectiles[xVel].speed*length,xVel,this,null,this.zIndex)):yVel=!1,this.gathering=this.mouseState,yVel)&&(this.reloads[this.weaponIndex]=items.weapons[this.weaponIndex].speed*(this.skin&&this.skin.atkSpd||1)))}},this.addWeaponXP=function(amnt){this.weaponXP[this.weaponIndex]||(this.weaponXP[this.weaponIndex]=0),this.weaponXP[this.weaponIndex]+=amnt},this.earnXP=function(amount){this.age<config.maxAge&&(this.XP+=amount,this.XP>=this.maxXP?(this.age<config.maxAge?(this.age++,this.XP=0,this.maxXP*=1.2):this.XP=this.maxXP,this.upgradePoints++,server.send(this.id,"16",this.upgradePoints,this.upgrAge),server.send(this.id,"15",this.XP,UTILS.fixTo(this.maxXP,1),this.age)):server.send(this.id,"15",this.XP))},this.changeHealth=function(amount,doer){if(0<amount&&this.health>=this.maxHealth)return!1;amount<0&&this.skin&&(amount*=this.skin.dmgMult||1),amount<0&&this.tail&&(amount*=this.tail.dmgMult||1),amount<0&&(this.hitTime=Date.now()),this.health+=amount,this.health>this.maxHealth&&(amount-=this.health-this.maxHealth,this.health=this.maxHealth),this.health<=0&&this.kill(doer);for(var i=0;i<players.length;++i)this.sentTo[players[i].id]&&server.send(players[i].id,"h",this.sid,Math.round(this.health));return!doer||!doer.canSee(this)||doer==this&&amount<0||server.send(doer.id,"t",Math.round(this.x),Math.round(this.y),Math.round(-amount),1),!0},this.kill=function(doer){doer&&doer.alive&&(doer.kills++,doer.skin&&doer.skin.goldSteal?scoreCallback(doer,Math.round(this.points/2)):scoreCallback(doer,Math.round(100*this.age*(doer.skin&&doer.skin.kScrM?doer.skin.kScrM:1))),server.send(doer.id,"9","kills",doer.kills,1)),this.alive=!1,server.send(this.id,"11"),iconCallback()},this.addResource=function(type,amount,auto){!auto&&0<amount&&this.addWeaponXP(amount),3==type?scoreCallback(this,amount,!0):(this[config.resourceTypes[type]]+=amount,server.send(this.id,"9",config.resourceTypes[type],this[config.resourceTypes[type]],1))},this.changeItemCount=function(index,value){this.itemCounts[index]=this.itemCounts[index]||0,this.itemCounts[index]+=value,server.send(this.id,"14",index,this.itemCounts[index])},this.buildItem=function(item){var worked,timeSinceHit,tmpS=this.scale+item.scale+(item.placeOffset||0),tmpX=this.x+tmpS*mathCOS(this.dir),tmpS=this.y+tmpS*mathSIN(this.dir);!this.canBuild(item)||item.consume&&this.skin&&this.skin.noEat||!item.consume&&!objectManager.checkItemLocation(tmpX,tmpS,item.scale,.6,item.id,!1,this)||(worked=!1,item.consume?(this.hitTime&&(timeSinceHit=Date.now()-this.hitTime,this.hitTime=0,timeSinceHit<=120?(this.shameCount++,8<=this.shameCount&&(this.shameTimer=3e4,this.shameCount=0)):(this.shameCount-=2,this.shameCount<=0&&(this.shameCount=0))),this.shameTimer<=0&&(worked=item.consume(this))):(worked=!0,item.group.limit&&this.changeItemCount(item.group.id,1),item.pps&&(this.pps+=item.pps),objectManager.add(objectManager.objects.length,tmpX,tmpS,this.dir,item.scale,item.type,item,!1,this)),worked&&(this.useRes(item),this.buildIndex=-1))},this.hasRes=function(item,mult){for(var i=0;i<item.req.length;){if(this[item.req[i]]<Math.round(item.req[i+1]*(mult||1)))return!1;i+=2}return!0},this.useRes=function(item,mult){if(!config.inSandbox)for(var i=0;i<item.req.length;)this.addResource(config.resourceTypes.indexOf(item.req[i]),-Math.round(item.req[i+1]*(mult||1))),i+=2},this.canBuild=function(item){return!!config.inSandbox||!(item.group.limit&&this.itemCounts[item.group.id]>=item.group.limit)&&this.hasRes(item)},this.gather=function(){this.noMovTimer=0,this.slowMult-=items.weapons[this.weaponIndex].hitSlow||.3,this.slowMult<0&&(this.slowMult=0);for(var hitSomething,tmpVariant=config.fetchVariant(this),applyPoison=tmpVariant.poison,variantDmg=tmpVariant.val,hitObjs={},tmpList=objectManager.getGridArrays(this.x,this.y,items.weapons[this.weaponIndex].range),t=0;t<tmpList.length;++t)for(var i=0;i<tmpList[t].length;++i)if((tmpObj=tmpList[t][i]).active&&!tmpObj.dontGather&&!hitObjs[tmpObj.sid]&&tmpObj.visibleToPlayer(this)&&UTILS.getDistance(this.x,this.y,tmpObj.x,tmpObj.y)-tmpObj.scale<=items.weapons[this.weaponIndex].range&&(tmpDir=UTILS.getDirection(tmpObj.x,tmpObj.y,this.x,this.y),UTILS.getAngleDist(tmpDir,this.dir)<=config.gatherAngle)){if(hitObjs[tmpObj.sid]=1,tmpObj.health){if(tmpObj.changeHealth(-items.weapons[this.weaponIndex].dmg*variantDmg*(items.weapons[this.weaponIndex].sDmg||1)*(this.skin&&this.skin.bDmg?this.skin.bDmg:1),this)){for(var x=0;x<tmpObj.req.length;)this.addResource(config.resourceTypes.indexOf(tmpObj.req[x]),tmpObj.req[x+1]),x+=2;objectManager.disableObj(tmpObj)}}else{this.earnXP(4*items.weapons[this.weaponIndex].gather);var count=items.weapons[this.weaponIndex].gather+(3==tmpObj.type?4:0);this.skin&&this.skin.extraGold&&this.addResource(3,1),this.addResource(tmpObj.type,count)}hitSomething=!0,objectManager.hitObj(tmpObj,tmpDir)}for(var stealCount,dmgVal,tmpSpd,tmpDir,tmpObj,i=0;i<players.length+ais.length;++i)(tmpObj=players[i]||ais[i-players.length])==this||!tmpObj.alive||tmpObj.team&&tmpObj.team==this.team||UTILS.getDistance(this.x,this.y,tmpObj.x,tmpObj.y)-1.8*tmpObj.scale<=items.weapons[this.weaponIndex].range&&(tmpDir=UTILS.getDirection(tmpObj.x,tmpObj.y,this.x,this.y),UTILS.getAngleDist(tmpDir,this.dir)<=config.gatherAngle)&&((stealCount=items.weapons[this.weaponIndex].steal)&&tmpObj.addResource&&(stealCount=Math.min(tmpObj.points||0,stealCount),this.addResource(3,stealCount),tmpObj.addResource(3,-stealCount)),stealCount=variantDmg,null!=tmpObj.weaponIndex&&items.weapons[tmpObj.weaponIndex].shield&&UTILS.getAngleDist(tmpDir+Math.PI,tmpObj.dir)<=config.shieldAngle&&(stealCount=items.weapons[tmpObj.weaponIndex].shield),dmgVal=items.weapons[this.weaponIndex].dmg*(this.skin&&this.skin.dmgMultO?this.skin.dmgMultO:1)*(this.tail&&this.tail.dmgMultO?this.tail.dmgMultO:1),tmpSpd=.3*(tmpObj.weightM||1)+(items.weapons[this.weaponIndex].knock||0),tmpObj.xVel+=tmpSpd*mathCOS(tmpDir),tmpObj.yVel+=tmpSpd*mathSIN(tmpDir),this.skin&&this.skin.healD&&this.changeHealth(dmgVal*stealCount*this.skin.healD,this),this.tail&&this.tail.healD&&this.changeHealth(dmgVal*stealCount*this.tail.healD,this),tmpObj.skin&&tmpObj.skin.dmg&&1==stealCount&&this.changeHealth(-dmgVal*tmpObj.skin.dmg,tmpObj),tmpObj.tail&&tmpObj.tail.dmg&&1==stealCount&&this.changeHealth(-dmgVal*tmpObj.tail.dmg,tmpObj),!(tmpObj.dmgOverTime&&this.skin&&this.skin.poisonDmg)||tmpObj.skin&&tmpObj.skin.poisonRes||(tmpObj.dmgOverTime.dmg=this.skin.poisonDmg,tmpObj.dmgOverTime.time=this.skin.poisonTime||1,tmpObj.dmgOverTime.doer=this),!tmpObj.dmgOverTime||!applyPoison||tmpObj.skin&&tmpObj.skin.poisonRes||(tmpObj.dmgOverTime.dmg=5,tmpObj.dmgOverTime.time=5,tmpObj.dmgOverTime.doer=this),tmpObj.skin&&tmpObj.skin.dmgK&&(this.xVel-=tmpObj.skin.dmgK*mathCOS(tmpDir),this.yVel-=tmpObj.skin.dmgK*mathSIN(tmpDir)),tmpObj.changeHealth(-dmgVal*stealCount,this,this));this.sendAnimation(hitSomething?1:0)},this.sendAnimation=function(hit){for(var i=0;i<players.length;++i)this.sentTo[players[i].id]&&this.canSee(players[i])&&server.send(players[i].id,"7",this.sid,hit?1:0,this.weaponIndex)},0),animIndex=0;this.animate=function(delta){0<this.animTime&&(this.animTime-=delta,this.animTime<=0?(this.animTime=0,this.dirPlus=0,animIndex=tmpRatio=0):0==animIndex?(tmpRatio+=delta/(this.animSpeed*config.hitReturnRatio),this.dirPlus=UTILS.lerp(0,this.targetAngle,Math.min(1,tmpRatio)),1<=tmpRatio&&(animIndex=tmpRatio=1)):(tmpRatio-=delta/(this.animSpeed*(1-config.hitReturnRatio)),this.dirPlus=UTILS.lerp(0,this.targetAngle,Math.max(0,tmpRatio))))},this.startAnim=function(didHit,index){this.animTime=this.animSpeed=items.weapons[index].speed,this.targetAngle=didHit?-config.hitAngle:-Math.PI,animIndex=tmpRatio=0},this.canSee=function(other){var dx;return!!other&&!(other.skin&&other.skin.invisTimer&&other.noMovTimer>=other.skin.invisTimer)&&(dx=mathABS(other.x-this.x)-other.scale,other=mathABS(other.y-this.y)-other.scale,dx<=config.maxScreenWidth/2*1.3)&&other<=config.maxScreenHeight/2*1.3}}},"./src/js/data/projectile.js":function(module,exports){module.exports=function(players,ais,objectManager,items,config,UTILS,server){this.init=function(indx,x,y,dir,spd,dmg,rng,scl,owner){this.active=!0,this.indx=indx,this.x=x,this.y=y,this.dir=dir,this.skipMov=!0,this.speed=spd,this.dmg=dmg,this.scale=scl,this.range=rng,this.owner=owner,server&&(this.sentTo={})};var tmpObj,objectsHit=[];this.update=function(delta){if(this.active){var tmpScale,tmpSpeed=this.speed*delta;if(this.skipMov?this.skipMov=!1:(this.x+=tmpSpeed*Math.cos(this.dir),this.y+=tmpSpeed*Math.sin(this.dir),this.range-=tmpSpeed,this.range<=0&&(this.x+=this.range*Math.cos(this.dir),this.y+=this.range*Math.sin(this.dir),tmpSpeed=1,this.range=0,this.active=!1)),server){for(var i=0;i<players.length;++i)!this.sentTo[players[i].id]&&players[i].canSee(this)&&(this.sentTo[players[i].id]=1,server.send(players[i].id,"18",UTILS.fixTo(this.x,1),UTILS.fixTo(this.y,1),UTILS.fixTo(this.dir,2),UTILS.fixTo(this.range,1),this.speed,this.indx,this.layer,this.sid));for(i=objectsHit.length=0;i<players.length+ais.length;++i)!(tmpObj=players[i]||ais[i-players.length]).alive||tmpObj==this.owner||this.owner.team&&tmpObj.team==this.owner.team||UTILS.lineInRect(tmpObj.x-tmpObj.scale,tmpObj.y-tmpObj.scale,tmpObj.x+tmpObj.scale,tmpObj.y+tmpObj.scale,this.x,this.y,this.x+tmpSpeed*Math.cos(this.dir),this.y+tmpSpeed*Math.sin(this.dir))&&objectsHit.push(tmpObj);for(var tmpList=objectManager.getGridArrays(this.x,this.y,this.scale),x=0;x<tmpList.length;++x)for(var y=0;y<tmpList[x].length;++y)tmpScale=(tmpObj=tmpList[x][y]).getScale(),tmpObj.active&&this.ignoreObj!=tmpObj.sid&&this.layer<=tmpObj.layer&&objectsHit.indexOf(tmpObj)<0&&!tmpObj.ignoreCollision&&UTILS.lineInRect(tmpObj.x-tmpScale,tmpObj.y-tmpScale,tmpObj.x+tmpScale,tmpObj.y+tmpScale,this.x,this.y,this.x+tmpSpeed*Math.cos(this.dir),this.y+tmpSpeed*Math.sin(this.dir))&&objectsHit.push(tmpObj);if(0<objectsHit.length){for(var tmpDist,hitObj=null,shortDist=null,i=0;i<objectsHit.length;++i)tmpDist=UTILS.getDistance(this.x,this.y,objectsHit[i].x,objectsHit[i].y),(null==shortDist||tmpDist<shortDist)&&(shortDist=tmpDist,hitObj=objectsHit[i]);if(hitObj.isPlayer||hitObj.isAI){delta=.3*(hitObj.weightM||1);hitObj.xVel+=delta*Math.cos(this.dir),hitObj.yVel+=delta*Math.sin(this.dir),null!=hitObj.weaponIndex&&items.weapons[hitObj.weaponIndex].shield&&UTILS.getAngleDist(this.dir+Math.PI,hitObj.dir)<=config.shieldAngle||hitObj.changeHealth(-this.dmg,this.owner,this.owner)}else{hitObj.projDmg&&hitObj.health&&hitObj.changeHealth(-this.dmg)&&objectManager.disableObj(hitObj);for(i=0;i<players.length;++i)players[i].active&&(hitObj.sentTo[players[i].id]&&(hitObj.active?players[i].canSee(hitObj)&&server.send(players[i].id,"8",UTILS.fixTo(this.dir,2),hitObj.sid):server.send(players[i].id,"12",hitObj.sid)),hitObj.active||hitObj.owner!=players[i]||players[i].changeItemCount(hitObj.group.id,-1))}this.active=!1;for(i=0;i<players.length;++i)this.sentTo[players[i].id]&&server.send(players[i].id,"19",this.sid,UTILS.fixTo(shortDist,1))}}}}}},"./src/js/data/projectileManager.js":function(module,exports){module.exports=function(Projectile,projectiles,players,ais,objectManager,items,config,UTILS,server){this.addProjectile=function(x,y,dir,range,speed,indx,owner,ignoreObj,layer){for(var tmpProj,tmpData=items.projectiles[indx],i=0;i<projectiles.length;++i)if(!projectiles[i].active){tmpProj=projectiles[i];break}return tmpProj||((tmpProj=new Projectile(players,ais,objectManager,items,config,UTILS,server)).sid=projectiles.length,projectiles.push(tmpProj)),tmpProj.init(indx,x,y,dir,speed,tmpData.dmg,range,tmpData.scale,owner),tmpProj.ignoreObj=ignoreObj,tmpProj.layer=layer||tmpData.layer,tmpProj.src=tmpData.src,tmpProj}}},"./src/js/data/store.js":function(module,exports){module.exports.hats=[{id:45,name:"Shame!",dontSell:!0,price:0,scale:120,desc:"hacks are for losers"},{id:51,name:"Moo Cap",price:0,scale:120,desc:"coolest mooer around"},{id:50,name:"Apple Cap",price:0,scale:120,desc:"apple farms remembers"},{id:28,name:"Moo Head",price:0,scale:120,desc:"no effect"},{id:29,name:"Pig Head",price:0,scale:120,desc:"no effect"},{id:30,name:"Fluff Head",price:0,scale:120,desc:"no effect"},{id:36,name:"Pandou Head",price:0,scale:120,desc:"no effect"},{id:37,name:"Bear Head",price:0,scale:120,desc:"no effect"},{id:38,name:"Monkey Head",price:0,scale:120,desc:"no effect"},{id:44,name:"Polar Head",price:0,scale:120,desc:"no effect"},{id:35,name:"Fez Hat",price:0,scale:120,desc:"no effect"},{id:42,name:"Enigma Hat",price:0,scale:120,desc:"join the enigma army"},{id:43,name:"Blitz Hat",price:0,scale:120,desc:"hey everybody i'm blitz"},{id:49,name:"Bob XIII Hat",price:0,scale:120,desc:"like and subscribe"},{id:57,name:"Pumpkin",price:50,scale:120,desc:"Spooooky"},{id:8,name:"Bummle Hat",price:100,scale:120,desc:"no effect"},{id:2,name:"Straw Hat",price:500,scale:120,desc:"no effect"},{id:15,name:"Winter Cap",price:600,scale:120,desc:"allows you to move at normal speed in snow",coldM:1},{id:5,name:"Cowboy Hat",price:1e3,scale:120,desc:"no effect"},{id:4,name:"Ranger Hat",price:2e3,scale:120,desc:"no effect"},{id:18,name:"Explorer Hat",price:2e3,scale:120,desc:"no effect"},{id:31,name:"Flipper Hat",price:2500,scale:120,desc:"have more control while in water",watrImm:!0},{id:1,name:"Marksman Cap",price:3e3,scale:120,desc:"increases arrow speed and range",aMlt:1.3},{id:10,name:"Bush Gear",price:3e3,scale:160,desc:"allows you to disguise yourself as a bush"},{id:48,name:"Halo",price:3e3,scale:120,desc:"no effect"},{id:6,name:"Soldier Helmet",price:4e3,scale:120,desc:"reduces damage taken but slows movement",spdMult:.94,dmgMult:.75},{id:23,name:"Anti Venom Gear",price:4e3,scale:120,desc:"makes you immune to poison",poisonRes:1},{id:13,name:"Medic Gear",price:5e3,scale:110,desc:"slowly regenerates health over time",healthRegen:3},{id:9,name:"Miners Helmet",price:5e3,scale:120,desc:"earn 1 extra gold per resource",extraGold:1},{id:32,name:"Musketeer Hat",price:5e3,scale:120,desc:"reduces cost of projectiles",projCost:.5},{id:7,name:"Bull Helmet",price:6e3,scale:120,desc:"increases damage done but drains health",healthRegen:-5,dmgMultO:1.5,spdMult:.96},{id:22,name:"Emp Helmet",price:6e3,scale:120,desc:"turrets won't attack but you move slower",antiTurret:1,spdMult:.7},{id:12,name:"Booster Hat",price:6e3,scale:120,desc:"increases your movement speed",spdMult:1.16},{id:26,name:"Barbarian Armor",price:8e3,scale:120,desc:"knocks back enemies that attack you",dmgK:.6},{id:21,name:"Plague Mask",price:1e4,scale:120,desc:"melee attacks deal poison damage",poisonDmg:5,poisonTime:6},{id:46,name:"Bull Mask",price:1e4,scale:120,desc:"bulls won't target you unless you attack them",bullRepel:1},{id:14,name:"Windmill Hat",topSprite:!0,price:1e4,scale:120,desc:"generates points while worn",pps:1.5},{id:11,name:"Spike Gear",topSprite:!0,price:1e4,scale:120,desc:"deal damage to players that damage you",dmg:.45},{id:53,name:"Turret Gear",topSprite:!0,price:1e4,scale:120,desc:"you become a walking turret",turret:{proj:1,range:700,rate:2500},spdMult:.7},{id:20,name:"Samurai Armor",price:12e3,scale:120,desc:"increased attack speed and fire rate",atkSpd:.78},{id:58,name:"Dark Knight",price:12e3,scale:120,desc:"restores health when you deal damage",healD:.4},{id:27,name:"Scavenger Gear",price:15e3,scale:120,desc:"earn double points for each kill",kScrM:2},{id:40,name:"Tank Gear",price:15e3,scale:120,desc:"increased damage to buildings but slower movement",spdMult:.3,bDmg:3.3},{id:52,name:"Thief Gear",price:15e3,scale:120,desc:"steal half of a players gold when you kill them",goldSteal:.5},{id:55,name:"Bloodthirster",price:2e4,scale:120,desc:"Restore Health when dealing damage. And increased damage",healD:.25,dmgMultO:1.2},{id:56,name:"Assassin Gear",price:2e4,scale:120,desc:"Go invisible when not moving. Can't eat. Increased speed",noEat:!0,spdMult:1.1,invisTimer:1e3}],module.exports.accessories=[{id:12,name:"Snowball",price:1e3,scale:105,xOff:18,desc:"no effect"},{id:9,name:"Tree Cape",price:1e3,scale:90,desc:"no effect"},{id:10,name:"Stone Cape",price:1e3,scale:90,desc:"no effect"},{id:3,name:"Cookie Cape",price:1500,scale:90,desc:"no effect"},{id:8,name:"Cow Cape",price:2e3,scale:90,desc:"no effect"},{id:11,name:"Monkey Tail",price:2e3,scale:97,xOff:25,desc:"Super speed but reduced damage",spdMult:1.35,dmgMultO:.2},{id:17,name:"Apple Basket",price:3e3,scale:80,xOff:12,desc:"slowly regenerates health over time",healthRegen:1},{id:6,name:"Winter Cape",price:3e3,scale:90,desc:"no effect"},{id:4,name:"Skull Cape",price:4e3,scale:90,desc:"no effect"},{id:5,name:"Dash Cape",price:5e3,scale:90,desc:"no effect"},{id:2,name:"Dragon Cape",price:6e3,scale:90,desc:"no effect"},{id:1,name:"Super Cape",price:8e3,scale:90,desc:"no effect"},{id:7,name:"Troll Cape",price:8e3,scale:90,desc:"no effect"},{id:14,name:"Thorns",price:1e4,scale:115,xOff:20,desc:"no effect"},{id:15,name:"Blockades",price:1e4,scale:95,xOff:15,desc:"no effect"},{id:20,name:"Devils Tail",price:1e4,scale:95,xOff:20,desc:"no effect"},{id:16,name:"Sawblade",price:12e3,scale:90,spin:!0,xOff:0,desc:"deal damage to players that damage you",dmg:.15},{id:13,name:"Angel Wings",price:15e3,scale:138,xOff:22,desc:"slowly regenerates health over time",healthRegen:3},{id:19,name:"Shadow Wings",price:15e3,scale:138,xOff:22,desc:"increased movement speed",spdMult:1.1},{id:18,name:"Blood Wings",price:2e4,scale:178,xOff:26,desc:"restores health when you deal damage",healD:.2},{id:21,name:"Corrupt X Wings",price:2e4,scale:178,xOff:26,desc:"deal damage to players that damage you",dmg:.25}]},"./src/js/libs/animText.js":function(module,exports){module.exports.AnimText=function(){this.init=function(x,y,scale,speed,life,text,color){this.x=x,this.y=y,this.color=color,this.scale=scale,this.startScale=this.scale,this.maxScale=1.5*scale,this.scaleSpeed=.7,this.speed=speed,this.life=life,this.text=text},this.update=function(delta){this.life&&(this.life-=delta,this.y-=this.speed*delta,this.scale+=this.scaleSpeed*delta,this.scale>=this.maxScale?(this.scale=this.maxScale,this.scaleSpeed*=-1):this.scale<=this.startScale&&(this.scale=this.startScale,this.scaleSpeed=0),this.life<=0)&&(this.life=0)},this.render=function(ctxt,xOff,yOff){ctxt.fillStyle=this.color,ctxt.font=this.scale+"px Hammersmith One",ctxt.strokeText(this.text,this.x-xOff,this.y-yOff),ctxt.fillText(this.text,this.x-xOff,this.y-yOff)}},module.exports.TextManager=function(){this.texts=[],this.update=function(delta,ctxt,xOff,yOff){ctxt.textBaseline="middle",ctxt.textAlign="center";for(var i=0;i<this.texts.length;++i)this.texts[i].life&&(this.texts[i].update(delta),this.texts[i].render(ctxt,xOff,yOff))},this.showText=function(x,y,scale,speed,life,text,color){for(var tmpText,i=0;i<this.texts.length;++i)if(!this.texts[i].life){tmpText=this.texts[i];break}tmpText||(tmpText=new module.exports.AnimText,this.texts.push(tmpText)),tmpText.init(x,y,scale,speed,life,text,color)}}},"./src/js/libs/io-client.js":function(module,exports,__webpack_require__){var msgpack=__webpack_require__("./node_modules/msgpack-lite/lib/browser.js");__webpack_require__("./src/js/config.js");window.msgpack=msgpack,module.exports={socket:null,connected:!1,socketId:-1,connect:function(address,callback,events){if(!this.socket){var _this=this;try{var socketError=!1;this.socket=new WebSocket(address),this.socket.binaryType="arraybuffer",this.socket.onmessage=function(message){var message=new Uint8Array(message.data),parsed=msgpack.decode(message),type=parsed[0],message=parsed[1];"io-init"==type?_this.socketId=message[0]:events[type].apply(void 0,message)},this.socket.onopen=function(){_this.connected=!0,callback()},this.socket.onclose=function(event){_this.connected=!1,4001==event.code?callback("Invalid Connection"):socketError||callback("disconnected")},this.socket.onerror=function(error){this.socket&&this.socket.readyState!=WebSocket.OPEN&&(socketError=!0,console.error("Socket error",arguments),callback("Socket error"))}}catch(e){console.warn("Socket connection error:",e),callback(e)}}},send:function(type){var data;(antiKick&&secPacket<100&&minPacket<5400||!antiKick)&&(data=Array.prototype.slice.call(arguments,1),data=msgpack.encode([type,data]),this.socket.send(data),minPacket++,secPacket++,pktSended++)},bSend:function(type){},socketReady:function(){return this.socket&&this.connected},close:function(){this.socket&&this.socket.close()}}},"./src/js/libs/modernizr.js":function(module,exports){var e=window,n=document,i=[],r=[],f={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var s=this;setTimeout(function(){n(s[e])},0)},addTest:function(e,n,s){r.push({name:e,fn:n,options:s})},addAsyncTest:function(e){r.push({name:null,fn:e})}},Modernizr=function(){},l=(Modernizr.prototype=f,Modernizr=new Modernizr,n.documentElement),c="svg"===l.nodeName.toLowerCase();Modernizr.addTest("passiveeventlisteners",function(){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});e.addEventListener("test",null,s)}catch(o){}return n}),function(){var e,n,s,a,t,l,c;for(c in r)if(r.hasOwnProperty(c)){if(e=[],(n=r[c]).name&&(e.push(n.name.toLowerCase()),n.options)&&n.options.aliases&&n.options.aliases.length)for(s=0;s<n.options.aliases.length;s++)e.push(n.options.aliases[s].toLowerCase());for(a="function"==typeof n.fn?n.fn():n.fn,t=0;t<e.length;t++)1===(l=e[t].split(".")).length?Modernizr[l[0]]=a:(!Modernizr[l[0]]||Modernizr[l[0]]instanceof Boolean||(Modernizr[l[0]]=new Boolean(Modernizr[l[0]])),Modernizr[l[0]][l[1]]=a),i.push((a?"":"no-")+l.join("-"))}}(),function(e){var o,n=l.className,s=Modernizr._config.classPrefix||"";c&&(n=n.baseVal),Modernizr._config.enableJSClass&&(o=new RegExp("(^|\\s)"+s+"no-js(\\s|$)"),n=n.replace(o,"$1"+s+"js$2")),Modernizr._config.enableClasses&&(n+=" "+s+e.join(" "+s),c?l.className.baseVal=n:l.className=n)}(i),delete f.addTest,delete f.addAsyncTest;for(var u=0;u<Modernizr._q.length;u++)Modernizr._q[u]();e.Modernizr=Modernizr},"./src/js/libs/soundManager.js":function(module,exports){module.exports.obj=function(config,UTILS){var tmpSound;this.sounds=[],this.active=!0,this.play=function(id,volume,loop){volume&&this.active&&((tmpSound=this.sounds[id])||(tmpSound=new Howl({src:".././sound/"+id+".mp3"}),this.sounds[id]=tmpSound),loop&&tmpSound.isPlaying||(tmpSound.isPlaying=!0,tmpSound.play(),tmpSound.volume((volume||1)*config.volumeMult),tmpSound.loop(loop)))},this.toggleMute=function(id,mute){(tmpSound=this.sounds[id])&&tmpSound.mute(mute)},this.stop=function(id){(tmpSound=this.sounds[id])&&(tmpSound.stop(),tmpSound.isPlaying=!1)}}},"./src/js/libs/utils.js":function(module,exports){var mathABS=Math.abs,mathSQRT=(Math.cos,Math.sin,Math.pow,Math.sqrt),mathABS=Math.abs,mathATAN2=Math.atan2,mathPI=Math.PI;module.exports.randInt=function(min,max){return Math.floor(Math.random()*(max-min+1))+min},module.exports.randFloat=function(min,max){return Math.random()*(max-min+1)+min},module.exports.lerp=function(value1,value2,amount){return value1+(value2-value1)*amount},module.exports.decel=function(val,cel){return 0<val?val=Math.max(0,val-cel):val<0&&(val=Math.min(0,val+cel)),val},module.exports.getDistance=function(x1,y1,x2,y2){return mathSQRT((x2-=x1)*x2+(y2-=y1)*y2)},module.exports.getDirection=function(x1,y1,x2,y2){return mathATAN2(y1-y2,x1-x2)},module.exports.getAngleDist=function(a,b){b=mathABS(b-a)%(2*mathPI);return mathPI<b?2*mathPI-b:b},module.exports.isNumber=function(n){return"number"==typeof n&&!isNaN(n)&&isFinite(n)},module.exports.isString=function(s){return s&&"string"==typeof s},module.exports.kFormat=function(num){return 999<num?(num/1e3).toFixed(1)+"k":num},module.exports.capitalizeFirst=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},module.exports.fixTo=function(n,v){return parseFloat(n.toFixed(v))},module.exports.sortByPoints=function(a,b){return parseFloat(b.points)-parseFloat(a.points)},module.exports.lineInRect=function(recX,recY,recX2,recY2,x1,y1,x2,y2){var minX=x1,maxX=x2;return x2<x1&&(minX=x2,maxX=x1),!((maxX=recX2<maxX?recX2:maxX)<(minX=minX<recX?recX:minX)||(recX2=y1,recX=y2,x2=x2-x1,1e-7<Math.abs(x2)&&(recX2=(y2=(y2-y1)/x2)*minX+(x2=y1-y2*x1),recX=y2*maxX+x2),recX<recX2&&(minX=recX,recX=recX2,recX2=minX),(recX=recY2<recX?recY2:recX)<(recX2=recX2<recY?recY:recX2)))},module.exports.containsPoint=function(element,x,y){var element=element.getBoundingClientRect(),left=element.left+window.scrollX,top=element.top+window.scrollY,width=element.width,element=element.height;return left<x&&x<left+width&&(top<y&&y<top+element)},module.exports.mousifyTouchEvent=function(event){var touch=event.changedTouches[0];event.screenX=touch.screenX,event.screenY=touch.screenY,event.clientX=touch.clientX,event.clientY=touch.clientY,event.pageX=touch.pageX,event.pageY=touch.pageY},module.exports.hookTouchEvents=function(element,skipPrevent){var preventDefault=!skipPrevent,isHovering=!1;function touchEnd(e){module.exports.mousifyTouchEvent(e),window.setUsingTouch(!0),preventDefault&&(e.preventDefault(),e.stopPropagation()),isHovering&&(element.onclick&&element.onclick(e),element.onmouseout&&element.onmouseout(e),isHovering=!1)}element.addEventListener("touchstart",module.exports.checkTrusted(function(e){module.exports.mousifyTouchEvent(e),window.setUsingTouch(!0),preventDefault&&(e.preventDefault(),e.stopPropagation());element.onmouseover&&element.onmouseover(e);isHovering=!0}),!1),element.addEventListener("touchmove",module.exports.checkTrusted(function(e){module.exports.mousifyTouchEvent(e),window.setUsingTouch(!0),preventDefault&&(e.preventDefault(),e.stopPropagation());module.exports.containsPoint(element,e.pageX,e.pageY)?isHovering||(element.onmouseover&&element.onmouseover(e),isHovering=!0):isHovering&&(element.onmouseout&&element.onmouseout(e),isHovering=!1)}),!1),element.addEventListener("touchend",module.exports.checkTrusted(touchEnd),!1),element.addEventListener("touchcancel",module.exports.checkTrusted(touchEnd),!1),element.addEventListener("touchleave",module.exports.checkTrusted(touchEnd),!1)},module.exports.removeAllChildren=function(element){for(;element.hasChildNodes();)element.removeChild(element.lastChild)},module.exports.generateElement=function(config){var key,element=document.createElement(config.tag||"div");function bind(configValue,elementValue){config[configValue]&&(element[elementValue]=config[configValue])}for(key in bind("text","textContent"),bind("html","innerHTML"),bind("class","className"),config){switch(key){case"tag":case"text":case"html":case"class":case"style":case"hookTouch":case"parent":case"children":continue}element[key]=config[key]}if(element.onclick&&(element.onclick=module.exports.checkTrusted(element.onclick)),element.onmouseover&&(element.onmouseover=module.exports.checkTrusted(element.onmouseover)),element.onmouseout&&(element.onmouseout=module.exports.checkTrusted(element.onmouseout)),config.style&&(element.style.cssText=config.style),config.hookTouch&&module.exports.hookTouchEvents(element),config.parent&&config.parent.appendChild(element),config.children)for(var i=0;i<config.children.length;i++)element.appendChild(config.children[i]);return element},module.exports.eventIsTrusted=function(ev){return!ev||"boolean"!=typeof ev.isTrusted||ev.isTrusted},module.exports.checkTrusted=function(callback){return function(ev){ev&&ev instanceof Event&&module.exports.eventIsTrusted(ev)&&callback(ev)}},module.exports.randomString=function(length){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},module.exports.countInArray=function(array,val){for(var count=0,i=0;i<array.length;i++)array[i]===val&&count++;return count}},"./vultr/VultrClient.js":function(module,exports,__webpack_require__){var url=__webpack_require__("./node_modules/url/url.js"),md5=__webpack_require__("./node_modules/md5/md5.js");function VultrClient(baseUrl,devPort,lobbySize,lobbySpread,rawIPs){"localhost"==location.hostname&&(window.location.hostname="127.0.0.1"),this.debugLog=!1,this.baseUrl=baseUrl,this.lobbySize=lobbySize,this.devPort=devPort,this.lobbySpread=lobbySpread,this.rawIPs=!!rawIPs,this.server=void 0,this.gameIndex=void 0,this.callback=void 0,this.errorCallback=void 0,this.processServers(vultr.servers)}VultrClient.prototype.regionInfo={0:{name:"Local",latitude:0,longitude:0},"vultr:1":{name:"New Jersey",latitude:40.1393329,longitude:-75.8521818},"vultr:2":{name:"Chicago",latitude:41.8339037,longitude:-87.872238},"vultr:3":{name:"Dallas",latitude:32.8208751,longitude:-96.8714229},"vultr:4":{name:"Seattle",latitude:47.6149942,longitude:-122.4759879},"vultr:5":{name:"Los Angeles",latitude:34.0207504,longitude:-118.691914},"vultr:6":{name:"Atlanta",latitude:33.7676334,longitude:-84.5610332},"vultr:7":{name:"Amsterdam",latitude:52.3745287,longitude:4.7581878},"vultr:8":{name:"London",latitude:51.5283063,longitude:-.382486},"vultr:9":{name:"Frankfurt",latitude:50.1211273,longitude:8.496137},"vultr:12":{name:"Silicon Valley",latitude:37.4024714,longitude:-122.3219752},"vultr:19":{name:"Sydney",latitude:-33.8479715,longitude:150.651084},"vultr:24":{name:"Paris",latitude:48.8588376,longitude:2.2773454},"vultr:25":{name:"Tokyo",latitude:35.6732615,longitude:139.569959},"vultr:39":{name:"Miami",latitude:25.7823071,longitude:-80.3012156},"vultr:40":{name:"Singapore",latitude:1.3147268,longitude:103.7065876}},VultrClient.prototype.start=function(callback,errorCallback){this.callback=callback,this.errorCallback=errorCallback;callback=this.parseServerQuery();callback?(this.log("Found server in query."),this.password=callback[3],this.connect(callback[0],callback[1],callback[2])):(this.log("Pinging servers..."),this.pingServers())},VultrClient.prototype.parseServerQuery=function(){var parsed=url.parse(location.href,!0),serverRaw=parsed.query.server;if("string"==typeof serverRaw){var region,index,split=serverRaw.split(":");if(3==split.length)return region=split[0],index=parseInt(split[1]),split=parseInt(split[2]),[region="0"==region||region.startsWith("vultr:")?region:"vultr:"+region,index,split,parsed.query.password];this.errorCallback("Invalid number of server parameters in "+serverRaw)}},VultrClient.prototype.findServer=function(region,index){var serverList=this.servers[region];if(Array.isArray(serverList)){for(var i=0;i<serverList.length;i++){var server=serverList[i];if(server.index==index)return server}console.warn("Could not find server in region "+region+" with index "+index+".")}else this.errorCallback("No server list for region "+region)},VultrClient.prototype.pingServers=function(){var region,serverList,_this=this,requests=[];for(region in this.servers)this.servers.hasOwnProperty(region)&&(null==(serverList=(serverList=this.servers[region])[Math.floor(Math.random()*serverList.length)])?console.log("No target server for region "+region):function(targetServer){var request=new XMLHttpRequest,targetAddress=(request.onreadystatechange=function(requestEvent){requestEvent=requestEvent.target;if(4==requestEvent.readyState)if(200==requestEvent.status){for(var i=0;i<requests.length;i++)requests[i].abort();_this.log("Connecting to region",targetServer.region);requestEvent=_this.seekServer(targetServer.region);_this.connect(requestEvent[0],requestEvent[1],requestEvent[2])}else console.warn("Error pinging "+targetServer.ip+" in region "+region)},"//"+_this.serverAddress(targetServer.ip,!0)+":"+_this.serverPort(targetServer)+"/ping");request.open("GET",targetAddress,!0),request.send(null),_this.log("Pinging",targetAddress),requests.push(request)}(serverList))},VultrClient.prototype.seekServer=function(region,isPrivate,gameMode){null==gameMode&&(gameMode="random"),null==isPrivate&&(isPrivate=!1);const gameModeList=["random"];var serverRegion,lobbySize=this.lobbySize,lobbySpread=this.lobbySpread,region=this.servers[region].flatMap(function(s){var gameIndex=0;return s.games.map(function(g){var currentGameIndex=gameIndex++;return{region:s.region,index:s.index*s.games.length+currentGameIndex,gameIndex:currentGameIndex,gameCount:s.games.length,playerCount:g.playerCount,isPrivate:g.isPrivate}})}).filter(function(s){return!s.isPrivate}).filter(function(s){return!isPrivate||0==s.playerCount&&s.gameIndex>=s.gameCount/2}).filter(function(s){return"random"==gameMode||gameModeList[s.index%gameModeList.length].key==gameMode}).sort(function(a,b){return b.playerCount-a.playerCount}).filter(function(s){return s.playerCount<lobbySize});if(isPrivate&&region.reverse(),0!=region.length)return lobbySpread=Math.min(lobbySpread,region.length),lobbySpread=Math.floor(Math.random()*lobbySpread),serverRegion=(region=region[lobbySpread=Math.min(lobbySpread,region.length-1)]).region,lobbySpread=Math.floor(region.index/region.gameCount),region=region.index%region.gameCount,this.log("Found server."),[serverRegion,lobbySpread,region];this.errorCallback("No open servers.")},VultrClient.prototype.connect=function(region,index,game){var server;this.connected||(null==(server=this.findServer(region,index))?this.errorCallback("Failed to find server for region "+region+" and index "+index):(this.log("Connecting to server",server,"with game index",game),server.games[game].playerCount>=this.lobbySize?this.errorCallback("Server is already full."):(window.history.replaceState(document.title,document.title,this.generateHref(region,index,game,this.password)),this.server=server,this.gameIndex=game,this.log("Calling callback with address",this.serverAddress(server.ip),"on port",this.serverPort(server),"with game index",game),this.callback(this.serverAddress(server.ip),this.serverPort(server),game))))},VultrClient.prototype.switchServer=function(region,index,game,password){this.switchingServers=!0,window.location.href=this.generateHref(region,index,game,password)},VultrClient.prototype.generateHref=function(region,index,game,password){region="/?server="+(region=this.stripRegion(region))+":"+index+":"+game;return password&&(region+="&password="+encodeURIComponent(password)),region},VultrClient.prototype.serverAddress=function(ip,forceSecure){return"127.0.0.1"==ip||"7f000001"==ip||"903d62ef5d1c2fecdcaeb5e7dd485eff"==ip?window.location.hostname:this.rawIPs?forceSecure?"ip_"+this.hashIP(ip)+"."+this.baseUrl:ip:"ip_"+ip+"."+this.baseUrl},VultrClient.prototype.serverPort=function(server){return 0==server.region?this.devPort:location.protocol.startsWith("https")?443:80},VultrClient.prototype.processServers=function(serverList){for(var region,servers={},i=0;i<serverList.length;i++){var server=serverList[i],list=servers[server.region];null==list&&(servers[server.region]=list=[]),list.push(server)}for(region in servers)servers[region]=servers[region].sort(function(a,b){return a.index-b.index});this.servers=servers},VultrClient.prototype.ipToHex=function(ip){return ip.split(".").map(component=>("00"+parseInt(component).toString(16)).substr(-2)).join("").toLowerCase()},VultrClient.prototype.hashIP=function(ip){return md5(this.ipToHex(ip))},VultrClient.prototype.log=function(){return this.debugLog?console.log.apply(void 0,arguments):console.verbose?console.verbose.apply(void 0,arguments):void 0},VultrClient.prototype.stripRegion=function(region){return region.startsWith("vultr:")?region=region.slice(6):region.startsWith("do:")&&(region=region.slice(3)),region},window.testVultrClient=function(){var assertIndex=1;function assert(actual,expected){(actual=""+actual)==(expected=""+expected)?console.log(`Assert ${assertIndex} passed.`):console.warn(`Assert ${assertIndex} failed. Expected ${expected}, got ${actual}.`),assertIndex++}var client1=new VultrClient("test.io",-1,5,1,!1);client1.errorCallback=function(error){0},client1.processServers(function(regions){var region,servers=[];for(region in regions)for(var regionServers=regions[region],i=0;i<regionServers.length;i++)servers.push({ip:region+":"+i,scheme:"testing",region:region,index:i,games:regionServers[i].map(p=>({playerCount:p,isPrivate:!1}))});return servers}({1:[[0,0,0,0],[0,0,0,0]],2:[[5,1,0,0],[0,0,0,0]],3:[[5,0,1,5],[0,0,0,0]],4:[[5,1,1,5],[1,0,0,0]],5:[[5,1,1,5],[1,0,4,0]],6:[[5,5,5,5],[2,3,1,4]],7:[[5,5,5,5],[5,5,5,5]]})),assert(client1.seekServer(1,!1),[1,0,0]),assert(client1.seekServer(1,!0),[1,1,3]),assert(client1.seekServer(2,!1),[2,0,1]),assert(client1.seekServer(2,!0),[2,1,3]),assert(client1.seekServer(3,!1),[3,0,2]),assert(client1.seekServer(3,!0),[3,1,3]),assert(client1.seekServer(4,!1),[4,0,1]),assert(client1.seekServer(4,!0),[4,1,3]),assert(client1.seekServer(5,!1),[5,1,2]),assert(client1.seekServer(5,!0),[5,1,3]),assert(client1.seekServer(6,!1),[6,1,3]),assert(client1.seekServer(6,!0),void 0),assert(client1.seekServer(7,!1),void 0),assert(client1.seekServer(7,!0),void 0),console.log("Tests passed.")};function concat(x,y){return x.concat(y)}Array.prototype.flatMap=function(f){return function(f,xs){return xs.map(f).reduce(concat,[])}(f,this)},module.exports=VultrClient}},installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/js/app.js")}();
